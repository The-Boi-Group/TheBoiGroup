(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{hIbf:function(e,t,a){"use strict";a.r(t),a.d(t,"ProfileSidebarContainer",(function(){return D})),a.d(t,"toRelativePath",(function(){return U}));var i=a("KEM+"),r=a.n(i),s=(a("kYxP"),a("MvUL"),a("ERkP")),d=a("k49u"),o=a("v6aA"),n=a("es0u"),c=a("hqKg"),l=a("8UdT"),h=a("FLCi"),p=a("P1r1"),m=a("wrlS"),u=a("XOJV"),I=a("YjVx");const b=(e,t)=>Object(I.a)(e,t),f=[],w=Object(c.createSelector)(((e,t)=>b(Object(m.c)(e),t).selectEntries(e)),u.a.createHydratedSelector,p.k,((e,t,a)=>Object(h.a)(e,(e=>{const i=e.type===l.b.Tweet&&t(e.content.id);return!i||i.tombstoneInfo||i.isDeleted||i.possibly_sensitive&&!a||!i.extended_entities||!i.extended_entities.media?f:i.extended_entities.media.map((t=>({mediaItem:t,entry:e})))})))),M=(e,t)=>b(e,t).fetchInitial();var g=a("rxPX"),S=a("0KEI"),x=a("MDbM");const E=(e,t)=>w(e,t.userId),_=(e,t)=>t.hideMediaModule?x.a.LOADED:((e,t)=>b(Object(m.c)(e),t).selectInitialFetchStatus(e))(e,t.userId)||x.a.LOADING;var y=Object(g.a)().propsFromState((()=>({mediaItemsWithEntry:E,mediaFetchStatus:_}))).adjustStateProps((({mediaItemsWithEntry:e,mediaFetchStatus:t})=>({mediaItems:e.map((e=>({...e.mediaItem}))),mediaItemsWithEntry:e,mediaFetchStatus:t}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(S.d)("PROFILE_SIDE_BAR"),fetchRecentMediaIfNeeded:M}))),A=a("kGix"),L=a("3XMw"),O=a.n(L),R=a("fs1G"),v=a("q2Cp"),F=a("Qwev"),P=a("rHpw"),j=a("3dad");const k=O.a.b327c129,C={[d.a.NotAuthorizedToViewUser]:{customAction:R.a}};class D extends s.Component{constructor(...e){super(...e),r()(this,"_fetchRecentUserMedia",(()=>{const{createLocalApiErrorHandler:e,fetchRecentMediaIfNeeded:t,hideMediaModule:a,userId:i}=this.props;!a&&t(this.context.featureSwitches,i).catch(e(C))}))}componentDidUpdate(e){e.userId===this.props.userId&&e.hideMediaModule===this.props.hideMediaModule||this._fetchRecentUserMedia()}componentDidMount(){this._fetchRecentUserMedia()}render(){const{mediaFetchStatus:e}=this.props;return e&&e!==A.a.LOADING?this._renderSidebar():s.createElement(F.a,{accessibilityLabel:"Loading profile sidebar"})}_renderSidebar(){const{hideMediaModule:e,userId:t,withTopicsToFollow:a}=this.props,i=this._getImages();return s.createElement(n.a,{profileUserId:t,withTopicsToFollow:a},i.length>=2&&!e?s.createElement(v.a,{cacheLocationKey:"profileSidebar",images:i,singleImageMaxAspectRatio:P.a.theme.aspectRatios.landscape,singleImageMinAspectRatio:P.a.theme.aspectRatios.landscape}):null)}_getImages(){const{mediaItems:e,mediaItemsWithEntry:t}=this.props;return t.map(((t,a)=>{var i;const{mediaItem:r,entry:s}=t,d={pathname:U(r.expanded_url),state:{mediaItems:{items:e,index:a},forwardPivotInfo:null==(i=s.content)?void 0:i.forwardPivot}},o=j.a.getOriginalImage(r);return o&&{width:o.width,height:o.height,url:o.url,backgroundColor:j.a.getBackgroundColor(r),cropCandidates:j.a.getCropCandidates(r),accessibilityLabel:r.ext_alt_text||k,shouldShowAltLabel:!1,expandedUrl:d}})).filter(Boolean)}}r()(D,"contextType",o.a);const U=e=>e.replace("https://twitter.com",""),T=y(D);t.default=T}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.ProfileSidebar.b42a4405.js.map