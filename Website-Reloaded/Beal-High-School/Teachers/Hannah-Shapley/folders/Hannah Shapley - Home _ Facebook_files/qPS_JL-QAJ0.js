if (self.CavalryLogger) { CavalryLogger.start_js(["zY7jMAc"]); }

__d("UFI2ReactionLink_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],c=[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],d=[a];return{argumentDefinitions:[{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:null,name:"UFI2ReactionLink_feedback",selections:[a,{alias:null,args:b,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:c,storageKey:null},{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"FeedbackReaction",kind:"LinkedField",name:"supported_reactions",plural:!0,selections:c,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:d,storageKey:null},{alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:c,storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'},{alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null}],storageKey:null}],type:"Feedback",abstractKey:null}}();e.exports=a}),null);
__d("LiveVideoCometStreamingReactionsContext",["react"],(function(a,b,c,d,e,f){"use strict";var g;a=g||b("react");c={diffuser:null,setDiffuser:function(){},setViewerProfilePicture:null,viewerProfilePicture:null};d=a.createContext(c);e.exports=d}),null);
__d("UFI2ActionLink.react",["cx","joinClasses","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.children,d=a.linkClassName,e=a.enabled;e=e===void 0?!0:e;var f=a.floating;f=f===void 0?!1:f;a=a.showIcon;a=a===void 0?!0:a;return i.jsx("span",{className:(f===!0?"_8y72":"")+" _18vi",children:c({className:b("joinClasses")((e?"":"_6dc1")+" _18vj"+(a?" _18vk":""),d)})})}c=a;e.exports=c}),null);
__d("useTrackingCodeFnForBlueOrComet",["cr:886520"],(function(a,b,c,d,e,f){"use strict";a=b("cr:886520");e.exports=a}),null);
__d("UFI2ReactionLink.react",["cx","fbt","ix","CometTintedIcon.react","CometTrackingNodeProvider.react","Event","FBLogger","FocusWithinHandler.react","LiveVideoCometStreamingReactionsContext","ReactDOM","ShimButton.react","UFI2CometRelayCreateFragmentContainer","UFI2ReactionLink_feedback.graphql","UFI2ReactionUtils","UFICommonInteractionLogger","UFIReactionTypes","clearTimeout","collectDataAttributes","cr:1157165","cr:1261406","cr:1519067","deferredLoadComponent","emptyFunction","fbicon","gkx","injectSubscriptionsHandler.react","joinClasses","nullthrows","react","requireDeferred","setTimeoutAcrossTransitions","stylex","useTrackingCodeFnForBlueOrComet"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||b("react");c=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;var n=b("requireDeferred")("UFI2FeedbackReactMutation").__setRef("UFI2ReactionLink.react"),aa=b("deferredLoadComponent")(b("requireDeferred")("UFI2ReactionsMenu").__setRef("UFI2ReactionLink.react")),o=b("UFIReactionTypes").reactions,p=20,q="ontouchstart"in window,r=500,s={accessible_elem:{clip:"ofryzvom",clipPath:"cd7xify8",position:"tn8apwoe"},hasNotReacted:{filter:"tw2q2tq1"},hasReacted:{fontWeight:"bhd12jwn"},iconWrapper:{display:"hbms080z",verticalAlign:"gkamr9iy"},inlineReactButton:{marginStart:"t0fmm8kf"},overlayReactButton:{end:"mvk0mo06",paddingTop:"qn38drkc",paddingEnd:"erfhpm37",paddingBottom:"rh0er1zr",paddingStart:"r6s06x95",position:"tn8apwoe",top:"v1023e52"},reactButtonSpacing:{paddingEnd:"j47wuhhg",paddingStart:"ci49qrzt"},reactWithA11yButton:{alignItems:"rh7womw9",display:"q4pta889"},root:{alignItems:"rh7womw9",display:"q4pta889",flexGrow:"q4j490t4",flexShrink:"rmfx599b",justifyContent:"bn9dirzp"}};function ba(a){if(a==null)return null;a=b("UFIReactionTypes").ordering.indexOf(a);if(a!==-1){a=b("UFIReactionTypes").ordering[a];return a}return null}function a(a){var c,d=m.useRef(null),e=m.useRef(null),f=m.useRef(null),g=m.useRef(null),j=m.useRef(null),k=m.useRef(null),t=m.useRef(null),u=m.useRef(null),v=m.useRef(null),w=m.useRef(null),x=m.useState({hasPreviouslyShownMenu:!1,isLongPressing:!1,isScrubbing:!1,isTouchDown:!1,showMenu:!1}),y=x[0],z=x[1],A=m.useCallback(function(a,c){var d=b("ReactDOM").findDOMNode(u.current);return d?b("collectDataAttributes")(d,a,c):null},[]);x=m.useCallback(function(){var b;return((b=a.feedback.supported_reactions)!=null?b:[]).map(function(a){return ba(a.key)}).filter(Boolean)},[a.feedback.supported_reactions]);var B=b("useTrackingCodeFnForBlueOrComet")(),C=b("emptyFunction").thatReturnsNull;b("cr:1157165")!=null&&(C=b("cr:1157165")());var D=m.useContext(b("LiveVideoCometStreamingReactionsContext")),E=D.diffuser,F=D.viewerProfilePicture,G=a.feedback,H=a.feedbackSource,I=a.mutationInputAugmenter,J=a.onReactionError,K=a.relay.environment,L=a.useDefaultActor,M=m.useCallback(function(a,c){var f,g=b("nullthrows")(G.id),h=b("nullthrows")((f=G.viewer_actor)==null?void 0:f.id);d.current&&d.current.dispose();e.current&&e.current.remove();var i=babelHelpers["extends"]({feedback_id:g,feedback_reaction:a,feedback_source:H},B(A));I&&(i=I(i));e.current=n.onReadyImmediately(function(a){d.current=a.commit({actorID:h,environment:K,feedbackArg:G,input:i,onError:(a=J)!=null?a:b("emptyFunction"),useDefaultActor:L})});W.current&&(v.current!=null&&v.current.focus(),W.current=!1);z(function(a){return babelHelpers["extends"]({},a,{isScrubbing:!1,showMenu:!1})});E!=null&&b("cr:1519067")!=null&&F!=null&&b("cr:1519067")(E,a,F);f=-1;C(c.timeStamp,f);g=n.getModuleIfRequired();g==null&&b("FBLogger")("ufi2").warn("UFI2 reactions loading state was not ready")},[E,K,G,H,A,I,C,J,L,B,F]),N=m.useCallback(function(c){var d,e;a.interactionEvent&&(e=b("UFICommonInteractionLogger").startInteraction(a.interactionEvent));d=(d=a.feedback.viewer_feedback_reaction_info)==null?void 0:d.key;d=b("UFI2ReactionUtils").checkReactionKey(d);d=d?b("UFIReactionTypes").NONE:b("UFIReactionTypes").LIKE;e!=null&&(k.current={newReactionKey:d,trackingID:e});M(d,c)},[M,a]),O=m.useCallback(function(a){y.isTouchDown&&a.preventDefault()},[y]),ca=m.useCallback(function(a){a.preventDefault()},[]);D=m.useCallback(function(a){b("clearTimeout")(j.current)},[]);var P=function(a){b("clearTimeout")(j.current),t.current=b("setTimeoutAcrossTransitions")(function(){z(function(a){return babelHelpers["extends"]({},a,{hasPreviouslyShownMenu:!0,isLongPressing:!0,showMenu:!0})})},r),z(function(a){return babelHelpers["extends"]({},a,{isLongPressing:!1})})},Q=m.useCallback(function(a){b("clearTimeout")(t.current)},[]),R=m.useCallback(function(){z(function(a){return babelHelpers["extends"]({},a,{hasPreviouslyShownMenu:!0,showMenu:!0})})},[]),S=m.useCallback(function(){W.current&&(v.current!=null&&v.current.focus(),W.current=!1),z(function(a){return babelHelpers["extends"]({},a,{isScrubbing:!1,showMenu:!1})})},[]),T=m.useCallback(function(){W.current=!0,R()},[R]),U=m.useCallback(function(c){b("clearTimeout")(j.current),y.showMenu||(j.current=b("setTimeoutAcrossTransitions")(R,a.showDelay))},[y.showMenu,R,a.showDelay]),V=m.useCallback(function(c){b("clearTimeout")(j.current);if(W.current)return;y.showMenu&&(j.current=b("setTimeoutAcrossTransitions")(S,a.hideDelay))},[S,a.hideDelay,y.showMenu]),da=m.useCallback(function(a){y.showMenu||(t.current=b("setTimeoutAcrossTransitions")(function(){z(function(a){return babelHelpers["extends"]({},a,{hasPreviouslyShownMenu:!0,isLongPressing:!0,showMenu:!0})})},r)),z(function(a){return babelHelpers["extends"]({},a,{isLongPressing:!1,isTouchDown:!0})})},[y.showMenu]),ea=m.useCallback(function(a){f.current=null,g.current=null,b("clearTimeout")(t.current),z(function(a){return babelHelpers["extends"]({},a,{isLongPressing:!1,isTouchDown:!1})})},[]),fa=m.useCallback(function(a){if(y.isScrubbing)return;a=a.touches[0];var b=a.clientX;a=a.clientY;if(f.current===null&&g.current===null){f.current=b;g.current=a;return}typeof f.current==="number"&&typeof g.current==="number"&&(f.current>b+p||f.current<b-p||g.current>a+p||g.current<a-p)&&z(function(a){return babelHelpers["extends"]({},a,{isScrubbing:!0})})},[y.isScrubbing]);m.useEffect(function(){return function(){b("clearTimeout")(j.current)}},[]);m.useEffect(function(){var c=k.current;if(c){var d;d=(d=a.feedback)==null?void 0:(d=d.viewer_feedback_reaction_info)==null?void 0:d.key;d=b("UFI2ReactionUtils").checkReactionKey(d);d===c.newReactionKey&&(b("UFICommonInteractionLogger").endInteraction(c.trackingID),k.current=null)}});m.useEffect(function(){if(y.showMenu){if(q){var c;a.subscriptionsHandler.addSubscriptions(b("Event").listen(document.documentElement,"touchstart",function(a){c=a.touches[0]}),b("Event").listen(document.documentElement,"touchmove",function(a){c=a.touches[0]}),b("Event").listen(document.documentElement,"touchend",function(a){c&&w.current&&w.current.contains(document.elementFromPoint(c.clientX,c.clientY))&&z(function(a){return babelHelpers["extends"]({},a,{isScrubbing:!1,showMenu:!1})})}))}}else a.subscriptionsHandler.release(),a.subscriptionsHandler.engage()},[a.subscriptionsHandler,y.showMenu]);var W=m.useRef(!1);c=(c=a.feedback.viewer_feedback_reaction_info)==null?void 0:c.key;var X=b("UFI2ReactionUtils").checkReactionKey(c),Y,Z;if(!X)Y=o[b("UFIReactionTypes").LIKE].display_name;else{c=o[X];var ga=c.display_name;c=c.color;Y=ga;Z=c}var $=X?h._("Remove {selected reaction}",[h._param("selected reaction",Y)]):Y,ha=X?h._("Change {selected reaction} reaction",[h._param("selected reaction",Y)]):h._("React"),ia=a.displayInlineBlock===!1?b("fbicon")._(i("481882"),16):b("fbicon")._(i("481880"),12);return m.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:X===b("UFIReactionTypes").NONE?5:6,children:m.jsxs("div",{className:"_8c74",ref:w,children:[m.jsx(b("FocusWithinHandler.react"),{children:function(c,d){c=c&&d;d=c||W.current;return b("gkx")("708253")&&b("cr:1261406")?m.jsxs("span",{className:a.displayInlineBlock!==!1&&d?(l||(l=b("stylex")))(s.reactWithA11yButton):null,children:[m.jsx(b("cr:1261406"),{label:$,onContextMenu:O,onHoverIn:U,onHoverOut:V,onPress:N,onPressIn:P,onPressOut:Q,overlayDisabled:!0,ref:u,testid:void 0,xstyle:[s.root,!!X&&s.hasReacted,d&&a.displayInlineBlock!==!0&&s.reactButtonSpacing],children:m.jsxs("div",{className:a.className,style:{color:Z},children:[m.jsx("span",{className:(l||(l=b("stylex")))(s.iconWrapper,!X&&s.hasNotReacted),children:a.children}),Y]})}),m.jsx(b("cr:1261406"),{focusable:!0,label:ha,onPress:T,ref:v,xstyle:[!d&&s.accessible_elem,a.displayInlineBlock===!1&&s.overlayReactButton,a.displayInlineBlock!==!1&&s.inlineReactButton],children:m.jsx(b("CometTintedIcon.react"),{color:"fds-gray-70",icon:ia})})]}):m.jsxs("span",{className:a.displayInlineBlock!==!1&&d?(l||(l=b("stylex")))(s.reactWithA11yButton):null,children:[m.jsxs("a",{"aria-label":$,className:b("joinClasses")((X?"_3_16":"")+(d&&a.displayInlineBlock!==!0?" _9cmp":"")+" _6a-y",a.className),"data-testid":void 0,href:"#",onClick:N,onContextMenu:O,onDragStart:ca,onMouseDown:P,onMouseEnter:U,onMouseLeave:V,onMouseUp:Q,onTouchEnd:q?ea:null,onTouchMove:q?fa:null,onTouchStart:q?da:null,ref:u,role:"button",style:{color:Z},tabIndex:0,children:[a.children,Y]}),m.jsx(b("ShimButton.react"),{"aria-label":ha,className:(l||(l=b("stylex")))([!d&&s.accessible_elem,a.displayInlineBlock===!1&&s.overlayReactButton,a.displayInlineBlock!==!1&&s.inlineReactButton]),onClick:T,onRef:function(a){return v.current=a},children:m.jsx(b("CometTintedIcon.react"),{color:"fds-gray-70",icon:ia})})]})}}),m.jsx(m.Suspense,{fallback:null,children:m.jsx(aa,{initialReaction:X,isLongPressing:y.isLongPressing,isScreenReader:!1,onBlur:S,onFocus:R,onMouseEnter:D,onMouseLeave:V,onReactionClick:M,onReactionMouseEnter:b("emptyFunction"),onReactionMouseLeave:b("emptyFunction"),shouldFocusOnShow:function(){return W.current},shouldRenderDialog:!0,shown:y.showMenu,supportedReactions:x()})})]})})}d=c(b("injectSubscriptionsHandler.react")(a),{feedback:j!==void 0?j:j=b("UFI2ReactionLink_feedback.graphql")});e.exports=d}),null);
__d("concatMap",[],(function(a,b,c,d,e,f){e.exports=a;function a(a,b){var c=-1,d=b.length,e=[],f;while(++c<d)f=a(b[c],c,b),Array.isArray(f)?Array.prototype.push.apply(e,f):Array.prototype.push.call(e,f);return e}}),null);