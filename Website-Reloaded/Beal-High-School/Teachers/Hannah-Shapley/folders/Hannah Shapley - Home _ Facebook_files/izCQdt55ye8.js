if (self.CavalryLogger) { CavalryLogger.start_js(["LD+M4L2"]); }

__d("EntstreamAttachmentRelatedShare",["csx","cx","Arbiter","AsyncRequest","CSS","DOM","Event","SubscribeButton","ThisControllerNoLongerExists","ge","getOrCreateDOMID","tidyEvent"],(function(a,b,c,d,e,f,g,h){var i=2,j=3;a={loadSuggestedShowsPivotAttachment:function(a,c,d){var e=b("ge")(a);if(!e)return;var f=b("Arbiter").subscribe(b("SubscribeButton").SUBSCRIBED,function(a,g){f.unsubscribe();if(g.profile_id!==c.toString())return;b("Arbiter").inform("show_follow_click",{attachment:e,pageID:c,storyID:d})})},loadRelatedAttachment:function(a,c,d){var e=null;typeof a==="string"?e=b("ge")(a):e=a;if(!e)return;var f=b("Event").listen(e,"click",function(){f.remove(),b("Arbiter").inform("article_click",{attachment:e,global_share_id:c,is_right_click:!1,share_id:d})}),g=b("Event").listen(e,"mousedown",function(a){(a.which===j||a.button===i)&&(g.remove(),b("Arbiter").inform("article_click",{attachment:e,global_share_id:c,is_right_click:!0}))})},loadInlineStoryPivotAttachment:function(a,c){var d=b("ge")(a);if(!d)return;var e=b("Event").listen(d,"click",function(){e.remove(),b("Arbiter").inform("photo_click",{attachment:d,storyid:c})})},loadRelatedGameAttachment:function(a,c){var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;b("tidyEvent")(b("Event").listen(d,"click",function(){b("Arbiter").inform("game_click",{attachment:d,global_share_id:c})}));b("tidyEvent")(b("Event").listen(d,"mousedown",function(a){(a.which===j||a.button===i)&&b("Arbiter").inform("game_click",{attachment:d,global_share_id:c})}))},loadRelatedLSCVideoAttachment:function(a,c){var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;var e=b("Event").listen(d,"click",function(){e.remove(),b("Arbiter").inform("video_click",{attachment:d,global_share_id:c})})},loadRelatedLSCInlineVideoAttachment:function(a,c){var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;b("Event").listen(d,"click",function(){var a="^div._4-u2",e="_1d8v";a=b("DOM").scry(d,a);a=a.length===1?a[0]:null;var f=a.parentNode,g=f.previousSibling;while(!g)f=f.parentNode,g=f.previousSibling;if(!b("CSS").hasClass(g,e))var f=b("DOM").create("div",{className:e}),e=b("DOM").insertBefore(a.parentNode,f),a=e.length>=1?e[0]:null;else a=g;f=b("getOrCreateDOMID")(a);new(b("AsyncRequest"))().setURI("/ajax/flash/expand_inline.php").setData({share_id:c,target_div:f,max_width:470,max_height:264,replace_target_div:!0}).setMethod("GET").setReadOnly(!0).setRelativeTo(d.parentNode).send()})},loadRelatedEventsPivotAttachment:function(a,c){var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;b("tidyEvent")(b("Event").listen(d,"click",function(){b("Arbiter").inform("event_join",{attachment:d,event_id:c})}))},loadMapAttachment:function(a,c,d){a=typeof a==="string"?b("ge")(a):a;if(!a)return;var e=typeof c==="string"?b("ge")(c):c;if(!e)return;b("tidyEvent")(b("Event").listen(a,"click",function(){b("Arbiter").inform("map_click",{attachment:e,story_id:d})}))},loadMapAttachmentActionButton:function(a,c){var d=typeof a==="string"?b("ge")(a):a;if(!d)return;b("tidyEvent")(b("Event").listen(d,"click",function(){b("Arbiter").inform("action_button_click",{button:d,story_id:c})}))},closeButton:function(a,c){b("Event").listen(a,"click",function(){b("DOM").remove(c)})},closeButtonPhotoPivots:function(a,c,d,e){b("Event").listen(a,"click",function(){var a=b("ThisControllerNoLongerExists").__DEADBUILDER__("ac8f3xt4"),f={story_id:d,search_query_type:e,event:"hide"};new(b("AsyncRequest"))().setMethod("POST").setURI(a.getURI()).setData(f).send();b("DOM").remove(c)})},seeAllLinkPhotoPivots:function(a,c,d){b("Event").listen(a,"click",function(){var a=b("ThisControllerNoLongerExists").__DEADBUILDER__("0pr7u8i9i"),e={story_id:c,search_query_type:d,event:"see_all"};new(b("AsyncRequest"))().setMethod("POST").setURI(a.getURI()).setData(e).send()})},removeOldSuggestions:function(a){a=b("ge")(a);if(!a)return;var c=b("DOM").scry(a.parentNode,"._5d73");for(var a=1;a<c.length;a++)b("DOM").remove(c[a]);window.setTimeout(function(){b("CSS").show(c[0])},1e3)},showHiddenSuggestions:function(a){var c=b("Event").listen(a,"click",function(){c.remove();var d="^._1ui8";d=b("DOM").scry(a,d);if(!d)return;b("CSS").hide(d[0]);d=d[0].previousSibling;while(d)b("CSS").show(d),d=d.previousSibling})}};e.exports=a}),null);
__d("CtaImpressionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:CtaImpressionsLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:CtaImpressionsLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:CtaImpressionsLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCtaType=function(a){this.$1.cta_type=a;return this};c.setOriginalURI=function(a){this.$1.original_uri=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={cta_type:!0,original_uri:!0};e.exports=a}),null);
__d("ExpandingCtaModern",["Animation","Arbiter","CtaImpressionsTypedLogger","Style","clearInterval","setInterval","setTimeout"],(function(a,b,c,d,e,f){f.show=a;var g=150,h=750;function a(a,c,d,e,f,i,j,k){if(document.documentElement!==null){var l=function(){!p&&window.pageYOffset>h&&(m(),b("clearInterval")(q))},m=function(){if(!p){b("Style").set(c,"display","none");b("Style").set(d,"display","block");n(a,"height",o+"px");n(a,"background","rgba(0,0,0,0.5)");p=!0;var e=new(b("CtaImpressionsTypedLogger"))();e.setCtaType("www_pages_cta");e.setOriginalURI(window.location.href);e.logVital()}},n=function(a,c,d){new(b("Animation"))(a).to(c,d).duration(g).ease(b("Animation").ease.both).go()},o=document.documentElement.clientHeight,p=!1;b("Style").set(document.body,"margin-bottom",j+"px");k&&b("Style").set(c,"display","none");var q=b("setInterval")(l,1e3);f&&b("setTimeout")(function(){p||m()},3e3);window.onload=function(){!f&&window.pageYOffset<=h&&n(a,"height",j+"px")};e.addEventListener("click",function(){!i?(b("Style").set(d,"display","none"),b("Style").set(a,"height","70%"),k||b("Style").set(c,"display","block"),b("Style").set(a,"background","none"),n(a,"height",j+"px")):n(a,"height","0px"),b("clearInterval")(q)});b("Arbiter").subscribe("pages/messages/message_button_clicked",function(){p=!1,m()})}}}),null);
__d("StickyPlaceholderInput",["CSS","DOM","Event","Input","Parent","emptyFunction","getElementText"],(function(a,b,c,d,e,f){function g(a){return b("Parent").byClass(a,"uiStickyPlaceholderInput")}function h(a){return b("DOM").scry(a,".placeholder")[0]}function i(a){a=a||window.event;var c=a.target||a.srcElement;if(b("DOM").isNodeOfType(c,["input","textarea"])){var d=g(c);d&&setTimeout(function(){b("CSS").conditionClass(d,"uiStickyPlaceholderEmptyInput",!c.value.length)},0)}}var j={init:function(){j.init=b("emptyFunction"),b("Event").listen(document.documentElement,{keydown:i,keyup:i,paste:i,focusout:i})},registerInput:function(a){j.init();var c=a.getAttribute("placeholder")||"";if(c.length)if(document.activeElement===a)var d=b("Event").listen(a,"blur",function(){j.manipulateInput(a,c),d.remove()});else j.manipulateInput(a,c)},manipulateInput:function(a,c){var d=b("DOM").create("div",{className:"placeholder","aria-hidden":"true"},c),e=b("DOM").create("div",{className:"uiStickyPlaceholderInput"},d);b("DOM").isNodeOfType(a,"textarea")&&b("CSS").addClass(e,"uiStickyPlaceholderTextarea");b("Event").listen(d,"click",function(){a.focus()});a.value===c&&(a.value="");a.setAttribute("placeholder","");b("DOM").replace(a,e);b("DOM").appendContent(e,a);b("CSS").conditionClass(e,"uiStickyPlaceholderEmptyInput",!a.value.length)},setPlaceholderText:function(a,c){var d=g(a);if(!d)b("Input").setPlaceholder(a,c);else{a=h(d);a&&b("DOM").setContent(a,c)}},getPlaceholderText:function(a){a=g(a);a=h(a);return a&&b("getElementText")(a)},update:function(a){var c=g(a);c&&b("CSS").conditionClass(c,"uiStickyPlaceholderEmptyInput",!a.value.length)},getVisibleText:function(a){var c=g(a);if(b("CSS").hasClass(c,"uiStickyPlaceholderEmptyInput")){c=h(c);return c&&b("getElementText")(c)}else return a.value}};e.exports=j}),null);