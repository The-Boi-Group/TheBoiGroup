if (self.CavalryLogger) { CavalryLogger.start_js(["bYoV7om"]); }

__d("FleetBeaconSubscriptionNetwork_LogMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FleetBeaconLogResponsePayload",kind:"LinkedField",name:"fleet_beacon_log",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FleetBeaconSubscriptionNetwork_LogMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FleetBeaconSubscriptionNetwork_LogMutation",selections:b},params:{id:"3531482613593478",metadata:{},name:"FleetBeaconSubscriptionNetwork_LogMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FleetBeaconSubscriptionNetwork_PublishMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FleetBeaconPublishResponsePayload",kind:"LinkedField",name:"fleet_beacon_publish",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FleetBeaconSubscriptionNetwork_PublishMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FleetBeaconSubscriptionNetwork_PublishMutation",selections:b},params:{id:"3918234471547751",metadata:{},name:"FleetBeaconSubscriptionNetwork_PublishMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FleetBeaconSubscriptionNetwork_Subscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"TestFleetBeaconSubscribeResponsePayload",kind:"LinkedField",name:"test_fleet_beacon_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_subscription_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"test_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"FleetBeaconSubscriptionNetwork_Subscription",selections:b,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"FleetBeaconSubscriptionNetwork_Subscription",selections:b},params:{id:"3194829573871785",metadata:{subscriptionName:"test_fleet_beacon_subscribe"},name:"FleetBeaconSubscriptionNetwork_Subscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("BaseToastAnimationInternal.react",["react","stylex","useFadeEffect","useMergeRefs","useToasterStateManager","useVisibilityObserver"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react"),j=100,k={mount:{opacity:"pedkr2u6",transform:"g3zh7qmp",transitionDuration:"pc15xi3s",transitionTimingFunction:"ilcmz9jb"},root:{opacity:"b5wmifdl",transform:"f2tghaqp",transitionDuration:"s1992sns",transitionProperty:"r5qslco7",transitionTimingFunction:"nf1dmkjp"}};function a(a){var c=a.children,d=a.expired;d=d===void 0?!1:d;var e=a.id,f=a.position;a=a.xstyle;var g=b("useToasterStateManager")(),l=i.Children.only(c);c=i.useCallback(function(){g.resetTimer(e)},[e,g]);var m=i.useCallback(function(){g.stopTimer(e)},[e,g]),n=i.useCallback(function(){g.shown(e)},[e,g]),o=i.useCallback(function(){g.hidden(e)},[e,g]),p=i.useCallback(function(a){l.props.onActionPress!=null&&l.props.onActionPress(a),a.defaultPrevented||g.expire(e)},[l.props,e,g]);o=b("useVisibilityObserver")({onHidden:o,onVisible:n,options:{activityMonitorOverride:null}});n=b("useFadeEffect")(!d);d=n[0];var q=n[1];n=n[2];n=b("useMergeRefs")(n,o);return d?i.jsx("li",{className:(h||(h=b("stylex")))(k.root,q&&k.mount,a),onMouseEnter:m,onMouseLeave:c,ref:n,style:{bottom:j*f},children:i.cloneElement(l,{onActionPress:p})}):null}}),null);
__d("BaseToasterView.react",["BaseToasterStateManager","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("BaseToasterStateManager").getInstance();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={visibleToasts:[]},b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromProps=function(a,b){b=b!=null?b.visibleToasts.slice(0,a.maxVisible):[];var c=0,d=a.filterToasts,e=a.toasterState,f={},g=d!=null?Object.keys(e).filter(function(a){var b,c=e[a];f[a]=c;var g=c==null?void 0:c.shown;b=c==null?void 0:(b=c.value)==null?void 0:(b=b.type)==null?void 0:b.name;if(c==null||b==null)return!0;if(d.has(b)&&!g){i.expire(a);return!1}}):Object.keys(e),h=b.reduce(function(a,b){b!=null&&a.add(b.id);return a},new Set()),j=0;while(c<a.maxVisible){var k=b[c],l=Object.keys(f).length>0?f:a.toasterState;if(k!=null){l=Object.prototype.hasOwnProperty.call(l,k.id);if(l){l=e[k.id];b[c]={expired:l.expired,id:l.id,toast:l.value};c++;continue}else b[c]=null}k=null;while(k==null&&j<g.length){l=g[j++];var m=h.has(l);m||(k=a.toasterState[l])}k!=null&&(b[c]={expired:k.expired,id:k.id,toast:k.value});c++}return{visibleToasts:b}};var c=b.prototype;c.render=function(){var a=this;return h.jsx("ul",{className:this.props.className,children:this.state.visibleToasts.map(function(b,c){return b!=null?a.props.children(b.toast,b.id,b.expired,c):null})})};return b}(h.PureComponent);e.exports=a;a.defaultProps={maxVisible:1}}),null);
__d("TetraButtonGroup.react",["CometFocusTableContext","CometRow.react","CometRowItem.react","TetraButton.react","react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react"),j={hiddenButton:{height:"do00u71z",visibility:"kr9hpln1"},resetFlexBasis:{flexBasis:"mg4g778l"}};function k(a){var c=i.useContext(b("CometFocusTableContext"));c=c.FocusCell;a=a.children;return c!=null?i.jsx(c,{children:a}):a}function a(a){var c=a.align,d=c===void 0?"justify":c;c=a.direction;c=c===void 0?"forward":c;var e=a.expanding;e=e===void 0?!1:e;var f=a.paddingHorizontal,g=a.paddingTop,l=a.primary,m=a.secondary,n=a.size,o=a.verticalAlign,p=a.wrap;p=p===void 0?"none":p;var q=[],r=[],s=null;if(l!=null){var t=l.ref,u=l.testid;u=babelHelpers.objectWithoutPropertiesLoose(l,["ref","testid"]);s=i.jsx(k,{children:i.jsx(b("TetraButton.react"),babelHelpers["extends"]({},u,{ref:t,size:n,testid:void 0}))});q.push({hidden:i.jsx(b("TetraButton.react"),babelHelpers["extends"]({},u,{disabled:!0,padding:"normal",size:n})),visible:s})}if(m!=null){l=m.ref;t=m.testid;u=babelHelpers.objectWithoutPropertiesLoose(m,["ref","testid"]);q.push({hidden:i.jsx(b("TetraButton.react"),babelHelpers["extends"]({},u,{disabled:!0,padding:"normal",size:n,type:"secondary"})),visible:i.jsx(k,{children:i.jsx(b("TetraButton.react"),babelHelpers["extends"]({},u,{ref:l,size:n,testid:void 0,type:"secondary"}))})})}else if(a.secondaryIcon!=null)r.push(i.jsx(b("CometRowItem.react"),{children:i.jsx(k,{children:i.jsx(b("TetraButton.react"),babelHelpers["extends"]({},a.secondaryIcon,{labelIsHidden:!0,size:n,type:"secondary"}))})},"secondary-icon"));else if(a.secondaryIconGroup!=null){t=a.secondaryIconGroup;m=t.primaryIcon;u=t.secondaryIcon;r.push(i.jsx(b("CometRowItem.react"),{children:i.jsx(k,{children:i.jsx(b("TetraButton.react"),babelHelpers["extends"]({},m,{labelIsHidden:!0,size:n,type:"secondary"}))})},"secondary-icon-1"),i.jsx(b("CometRowItem.react"),{children:i.jsx(k,{children:i.jsx(b("TetraButton.react"),babelHelpers["extends"]({},u,{labelIsHidden:!0,size:n,type:"secondary"}))})},"secondary-icon-2"))}l=q.map(function(a,c){return i.jsx(b("CometRowItem.react"),{expanding:d==="justify",xstyle:j.resetFlexBasis,children:q.map(function(a,d){return i.jsx(i.Fragment,{children:c!==d?i.jsx("div",{"aria-hidden":!0,className:(h||(h=b("stylex")))(j.hiddenButton),children:a.hidden}):a.visible},d)})},c)});a=s!=null?i.jsx(b("CometRowItem.react"),{expanding:d==="justify",xstyle:j.resetFlexBasis,children:s},"primary"):null;t=[a].concat(r);m=q.length===2;return i.jsx(b("CometRow.react"),{align:d,direction:c,expanding:e,paddingHorizontal:f,paddingTop:g,spacing:8,verticalAlign:o,wrap:p,children:m||s==null?l:t})}}),null);
__d("CometTwoButtonDialogImpl.react",["fbt","CometCardedDialog.react","CometTrackingNodeProvider.react","TetraButtonGroup.react","TetraText.react","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react"),j={dialog:"comet-two-button-dialog",primary:"comet-two-button-dialog-primary",secondary:"comet-two-button-dialog-secondary"};function a(a){var c=a.body,d=a.disabled;d=d===void 0?!1:d;var e=a.onClose,f=a.primary,h=a.secondary,k=a.testids;k=k===void 0?j:k;a=a.title;return i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:163,children:i.jsxs(b("CometCardedDialog.react"),{onClose:function(){return e("EXIT")},testid:void 0,title:a,titleHorizontalAlignment:"start",withCloseButton:!0,children:[i.jsx("div",{className:"l9j0dhe7 dati1w0a f10w8fjw hv4rvrfc pybr56ya",children:i.jsx(b("TetraText.react"),{type:"body3",children:c})}),i.jsx("div",{className:"a8nywdso ihqw7lf3 rz4wbd8a jb3vyjys bkfpd7mw btwxx1t3 j83agx80",children:i.jsx(b("TetraButtonGroup.react"),{direction:"backward",paddingHorizontal:16,primary:{disabled:d,label:(a=f)!=null?a:g._("Confirm"),onPress:function(){return e("PRIMARY")},testid:k.primary},secondary:{disabled:d,label:(c=h)!=null?c:g._("Cancel"),onPress:function(){return e("SECONDARY")},reduceEmphasis:!0,testid:k.secondary}})})]})})}}),null);
__d("CometConfirmationDialogImpl.react",["CometTwoButtonDialogImpl.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.body,d=a.cancel,e=a.confirm,f=a.disabled;f=f===void 0?!1:f;var g=a.onClose;a=a.title;return h.jsx(b("CometTwoButtonDialogImpl.react"),{body:c,disabled:f,onClose:function(a){return g(a==="PRIMARY")},primary:e,secondary:d,testids:{dialog:"CometConfirmationDialogImpl",primary:"CometConfirmationDialogConfirmButton",secondary:"CometConfirmationDialogCancelButton"},title:a})}}),null);
__d("CometToast.react",["fbt","ix","CometPressable.react","CometRow.react","CometRowItem.react","CometTheme.react","TetraCircleButton.react","TetraText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=i||b("react"),k={icon:{minWidth:"s3zjy1r9"},pressable:{display:"a8c37x1j"},root:{backgroundColor:"cwj9ozl2",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"m1ttxjm6",maxWidth:"d2edcug0",minWidth:"p01isnhg"}};function a(a){var c=a.action,d=a.href,e=a.icon,f=a.impressionLoggingRef,i=a.message,l=a.onDismiss,m=a.size,n=a.supressCloseButton;n=n===void 0?!1:n;var o=a.target,p=a.testid;a.title;p=a.truncateText;p=p===void 0?!0:p;a=babelHelpers.objectWithoutPropertiesLoose(a,["action","href","icon","impressionLoggingRef","message","onDismiss","size","supressCloseButton","target","testid","title","truncateText"]);var q=j.useMemo(function(){return d!=null?{target:o,url:d}:void 0},[d,o]);f=j.jsxs(b("CometRow.react"),{paddingHorizontal:m==="small"?8:16,paddingVertical:m==="small"?8:16,ref:f,spacing:12,testid:void 0,verticalAlign:"center",children:[e!=null?j.jsx(b("CometRowItem.react"),{xstyle:k.icon,children:e}):null,j.jsx(b("CometRowItem.react"),{"aria-atomic":!0,expanding:!0,role:"alert",children:j.jsx(b("TetraText.react"),{color:"primary",numberOfLines:p?1:void 0,type:m==="small"?"body4":"body3",children:i})}),c!=null?j.jsx(b("CometRowItem.react"),{children:j.jsx(b("CometPressable.react"),{onPress:function(a){l(),c.onPress(a)},testid:void 0,children:j.jsx(b("TetraText.react"),{color:"blueLink",numberOfLines:1,type:"body3",children:c.label})})}):null,n!==!0&&j.jsx(b("CometRowItem.react"),{children:j.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(h("478231"),12),label:g._("Close"),onPress:l,size:24})})]});(a.onPress!=null||q!=null)&&(f=j.jsx(b("CometPressable.react"),babelHelpers["extends"]({},a,{expanding:!0,linkProps:q,xstyle:k.pressable,children:f})));return j.jsx(b("CometTheme.react"),{testid:void 0,theme:"invert",xstyle:k.root,children:f})}}),null);
__d("CometToasterView_DO_NOT_USE.react",["BaseContextualLayerAnchorRoot.react","BasePortal.react","BaseToastAnimationInternal.react","BaseToasterView.react","gkx","react","stylex","useToasterStateManager"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react"),j={list:{listStyle:"p7hjln8o"},root:{bottom:"lfi1tu6t",position:"poy2od1o",start:"re5koujm",zIndex:"kavbgo14"},rootBlue:{zIndex:"guygq49l"},rootWorkplaceLegacy:{zIndex:"lidd1b6n"},toastContainer:{display:"q9uorilb",position:"pmk7jnqg",start:"j9ispegn"}};function a(a){var c=a.filterToasts;a=a.maxVisible;a=a===void 0?1:a;var d=b("useToasterStateManager")(),e=i.useState(function(){return d.getEmptyState()}),f=e[0],g=e[1];i.useEffect(function(){var a=d.registerView(g,0);return function(){a.remove()}},[d]);return i.jsx(b("BasePortal.react"),{target:document.body,xstyle:[j.root,b("gkx")("708253")?null:b("gkx")("1341692")?j.rootWorkplaceLegacy:j.rootBlue],children:i.jsx(b("BaseContextualLayerAnchorRoot.react"),{children:i.jsx(b("BaseToasterView.react"),{className:(h||(h=b("stylex")))(j.list),filterToasts:c,maxVisible:a,toasterState:f,children:function(a,c,d,e){return i.jsx(b("BaseToastAnimationInternal.react"),{expired:d,id:c,position:e,xstyle:j.toastContainer,children:a},e)}})})})}}),null);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","gkx","isEmpty"],(function(a,b,c,d,e,f){var g,h="javascript-sandbox",i="OverrideServer",j="www_sandbox";a=function(){function a(){}var c=a.prototype;c.patchRequestHeaders=function(a){var c={},d=b("RTISubscriptionManagerConfig").bladerunner_www_sandbox;if(!(g||(g=b("isEmpty")))(b("WebDriverConfig").auxiliaryServiceInfo)){var e;e=(e=b("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?e:b("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];e!=null&&(typeof e.ip_address==="string"?c[i]=e.ip_address+":18295":typeof e.hostname==="string"&&(c[i]=e.hostname+":18295"),typeof b("WebDriverConfig").originHost==="string"&&(c[j]="www."+b("WebDriverConfig").originHost))}else d!=null&&(c[h]=d);b("gkx")("307")&&(c["Accept-Ack"]="RSAck");for(var f in a)c[f]=a[f];return c};return a}();c=new a();d=c;e.exports=d}),null);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(a,b,c,d,e,f){var g="bladerunner_js_client",h={info:"info",warning:"warning",exception:"exception"};a=function(){function a(){this.setFBLoggerLevel(1)}var c=a.prototype;c.info=function(a){this.$2>=2&&b("FBLogger")(g).info("BladeRunner info: %s",a),this.$3(h.info,a)};c.warn=function(a){this.$2>=1&&b("FBLogger")(g).warn("BladeRunner warn: %s",a),this.$3(h.warning,a)};c.exception=function(a,c){c===void 0&&(c="");var d=c+" "+a.toString();this.$2>=0&&b("FBLogger")(g).warn("BladeRunner exception: %s, %s",c,a.toString());this.$3(h.exception,d)};c.trimForLogging=function(a){var b=1024;return typeof a==="string"&&a.length>b?"[trimmed]:"+a.substring(0,b)+"...":a};c.bumpCounter=function(a,c){c===void 0&&(c=1),b("ODS").bumpEntityKey(2966,"BladeRunnerClient",a,c)};c.setClientSessionId=function(a){this.$1=a};c.setFBLoggerLevel=function(a){this.$2=a};c.$3=function(a,b){};return a}();c=new a();d=c;e.exports=d}),null);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f){var g=function(){function a(){}var c=a.prototype;c.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")};c.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};c.updateRetryRequestPayload=function(a){a!=null?this.payload=b("Base64").encode(a):this.payload=null};a.readObject=function(b){var c=new a();c.streamId=n(b.streamId);c.requestType=n(b.requestType);c.payload=q(b.payload);c.headers=t(b.headers);c.extraHeader=q(b.extraHeader);c.requestTarget=q(b.requestTarget);c.instrumentationData=q(b.instrumentationData);return c};return a}();f.GatewayStreamRequest=g;var h=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=n(b.streamId);c.dataId=o(b.dataId);c.data=q(b.data);c.shouldAck=v(b.shouldAck);return c};var c=a.prototype;c.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data};c.rawDataSize=function(){return this.data==null?0:this.data.length};c.decodeData=function(){if(this.data==null)throw new Error("Expected data");return b("Base64").decode(this.data)};c.setData=function(a){this.data=b("Base64").encode(a)};c.getInstrumentationData=function(){if(this.instrumentationData!=null)return JSON.parse(this.instrumentationData);else return null};return a}();f.GatewayStreamData=h;var i=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=n(b.streamId);c.dataId=n(b.dataId);c.success=u(b.success);c.message=q(b.message);c.code=o(b.code);return c};return a}();f.GatewayStreamDataAck=i;i.ACK_CODE_LANDED_AND_ACCEPTED=20;i.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21;i.ACK_CODE_FAILED_TO_LAND=50;var j=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.message=q(b.message);return c};return a}();f.GatewayStreamLog=j;var k=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=n(b.streamId);c.status=n(b.status);c.message=q(b.message);c.code=o(b.code);c.shouldRetry=v(b.shouldRetry);c.retryDelayMs=o(b.retryDelayMs);return c};return a}();f.GatewayStreamStatusUpdate=k;var l=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=n(b.streamId);c.newBody=q(b.newBody);c.newExtraHeader=q(b.newExtraHeader);c.patchExtraHeader=q(b.patchExtraHeader);c.killBody=v(b.killBody);c.temporary=v(b.temporary);return c};return a}();f.GatewayStreamRewriteRequest=l;var m=function(){function a(){}var c=a.prototype;c.getRequest=function(){if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};c.getData=function(){if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};c.getDataAck=function(){if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};c.getStatusUpdate=function(){if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};c.getLog=function(){if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};c.getRewriteRequest=function(){if(this.type==b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};c.getStreamId=function(){if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")};c.isInstrumented=function(){if(this.type===b("BladeRunnerTypes").StreamFrameType.REQUEST)return this.getRequest().instrumentationData!=null;else if(this.type===b("BladeRunnerTypes").StreamFrameType.DATA)return this.getData().instrumentationData!=null;else return!1};a.readObject=function(c){var d=new a();d.type=n(c.type);switch(d.type){case b("BladeRunnerTypes").StreamFrameType.REQUEST:d.request=g.readObject(r(c.request));break;case b("BladeRunnerTypes").StreamFrameType.DATA:d.data=h.readObject(r(c.data));break;case b("BladeRunnerTypes").StreamFrameType.DATA_ACK:d.dataAck=i.readObject(r(c.dataAck));break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:d.statusUpdate=k.readObject(r(c.statusUpdate));break;case b("BladeRunnerTypes").StreamFrameType.LOG:d.log=j.readObject(r(c.log));break;case b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:d.rewriteRequest=l.readObject(r(c.rewriteRequest));break;default:b("BladeRunnerLogger").warn("Frame with unexpected type: "+d.type);return null}return d};a.newRequestFrame=function(c){var d=new a();d.type=b("BladeRunnerTypes").StreamFrameType.REQUEST;d.request=c;return d};a.newDataFrame=function(c){var d=new a();d.type=b("BladeRunnerTypes").StreamFrameType.DATA;d.data=c;return d};a.newDataAckFrame=function(c){var d=new a();d.type=b("BladeRunnerTypes").StreamFrameType.DATA_ACK;d.dataAck=c;return d};a.newStatusUpdateFrame=function(c){var d=new a();d.type=b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;d.statusUpdate=c;return d};a.newLogFrame=function(c){var d=new a();d.type=b("BladeRunnerTypes").StreamFrameType.LOG;d.log=c;return d};a.newRewriteRequestFrame=function(c){var d=new a();d.type=b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;d.rewriteRequest=c;return d};return a}();f.GatewayStreamFrame=m;a=function(){function a(a,b,c){this.batchId=a,this.frames=b,this.instrumentationData=c}var b=a.prototype;b.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")};b.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.write=function(){return JSON.stringify(this)};b.isInstrumented=function(){return this.getFrames().some(function(a){return a.isInstrumented()})};a.read=function(b){b=JSON.parse(b);var c=b.batchId||0,d=[];for(var e=b.frames,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h=m.readObject(h);h!=null&&d.push(h)}h=b.instrumentationData||null;return new a(c,d,h)};return a}();f.GatewayStreamBatch=a;function n(a){if(typeof a==="number")return a;throw new Error("Expected number")}function o(a){return a==null?null:n(a)}function p(a){if(typeof a==="string")return a;throw new Error("Expected string")}function q(a){return a==null?null:p(a)}function r(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function s(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function t(a){return a==null?null:s(a)}function u(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function v(a){return a==null?null:u(a)}}),null);
__d("RequestStreamE2EClientLoggerEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});e.exports=a}),null);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});e.exports=a}),null);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","FBLogger","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=1e3;a=function(){function a(a,b,c){this.$2=a,this.$1=b,this.$3=c}var c=a.prototype;c.onProxyResponse=function(a){this.$4(a);var c=[];for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$2.witnessFrame(g)&&c.push(g)}g=this.$2.getRequest();(f=g.e2eLogger)==null?void 0:f.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").SENT,{},(e=a.getInstrumentationData())==null?void 0:e.auxId);c.length>0&&this.$5(new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,c,a.instrumentationData))};c.onDisconnect=function(){this.$2.resetErrors();var a=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=b("BladeRunnerTypes").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};c.$4=function(a){var c=this;a=a.getFrames().filter(function(a){return a.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f=f.getStatusUpdate();if(f.status==b("BladeRunnerTypes").StreamStatus.CLOSED||f.status==b("BladeRunnerTypes").StreamStatus.REJECTED){this.$2.onError();var h=f.shouldRetry!=null&&f.shouldRetry,i=f.message!=null?f.message:"null";if(h&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){f.status=b("BladeRunnerTypes").StreamStatus.PAUSED;var j=g;f.retryDelayMs!=null&&(j=f.retryDelayMs);b("BladeRunnerLogger").info("Can retry: stream "+f.streamId+" closed with status "+f.status+", message "+i+". Error count: "+this.$2.getErrorCount()+", retryDelay "+j+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?b("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(b("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),j>0?b("setTimeoutAcrossTransitions")(function(){return c.$6()},j):this.$6())}else b("BladeRunnerLogger").info("Will not retry: stream "+f.streamId+" closed with status "+f.status+", message "+i+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+h.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),h?b("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):b("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(f.streamId)}}};c.$6=function(){this.$2.setRetryRequestScheduled(!1);if(this.$2.isAlive()){var a=this.$1.getUpdatedRequestBody();if(a!=null){var c;c=(c=this.$2.getRequest().getHeaders().method)!=null?c:"unknown method";b("FBLogger")("RequestStream_MQTT").info("retry with updated body for"+c);this.$2.updateRetryRequestPayload(a)}this.$3.sendRetryStreamRequest(this.$2)}};c.$5=function(a){b("BladeRunnerLogger").bumpCounter("send_to_handler");var c=[];this.$1.onBatch(a);for(var a=a.getFrames(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;try{switch(f.type){case b("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(f.getData());c.push(f.getData());break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(f.getStatusUpdate().status);break;case b("BladeRunnerTypes").StreamFrameType.LOG:f=f.getLog().message;f!=null&&this.$1.onLog(f);break;case b("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(a){b("BladeRunnerLogger").bumpCounter("send_to_handler_error"),b("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}}this.$7(c)};c.$7=function(a){var c=[];for(var d=0;d<a.length;d++){var e=a[d];if(e.shouldAck===!0&&e.dataId!=null){var f=new(b("BladeRunnerTypesInternal").GatewayStreamDataAck)();f.streamId=e.streamId;f.dataId=e.dataId;f.success=!0;c.push(f)}}this.$3.sendDataAcks(c)};return a}();e.exports=a}),null);
__d("RequestStreamTransport",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);f.RequestStreamTransport=a}),null);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1857112");c=b("FalcoLoggerInternal").create("rti_request_stream_e2e_client",a);e.exports=c}),null);
__d("RequestStreamE2ELogger",["RtiRequestStreamE2eClientFalcoEvent"],(function(a,b,c,d,e,f){"use strict";f.createStreamLogger=a;f.logRequestStreamE2EEventStatic=c;var g=function(){function a(a,b,c,d,e,f,g){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g}var c=a.prototype;c.logE2EEvent=function(a,c,d,e){d===void 0&&(d=null);e===void 0&&(e=null);var f={request_id:this.$1,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:a,event:c,timestamp_ms:Date.now().toString(),aux_id:e,additional_data:d};b("RtiRequestStreamE2eClientFalcoEvent").log(function(){return f})};c.getRequestId=function(){return this.$1};return a}();f.RequestStreamE2ELogger=g;function a(a,b,c){if(a==null||a.method==null)return null;if(b==null||b.length==0)return null;b=JSON.parse(b);if(b.requestId==null)return null;return b.clientLoggingDisabled!=null?null:new g(b.requestId,c,a.method,h(a.method,a),b.requestLogContext,b.forceLogContext,b.sampleRate)}function h(a,b){return a==="FBLQ"&&b.config_id?b.config_id:a}function c(a,c,d,e,f){f===void 0&&(f=null);if(a==null||a.requestId==null||a.clientLoggingDisabled!=null)return;var g={request_id:a.requestId,transport:c,e2e_sample_rate:a.sampleRate,message_type:d,event:e,timestamp_ms:Date.now().toString(),aux_id:a.auxId,additional_data:f};b("RtiRequestStreamE2eClientFalcoEvent").log(function(){return g})}}),null);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","uuid"],(function(a,b,c,d,e,f){"use strict";var g="Connected",h="Disconnected",i=511*1024,j="/br_sr",k="/sr_res",l=null;function m(a){var c;switch(a.type){case b("BladeRunnerTypes").StreamFrameType.REQUEST:return(c=a.request)==null?void 0:c.getInstrumentationData();case b("BladeRunnerTypes").StreamFrameType.DATA:return(c=a.data)==null?void 0:c.getInstrumentationData()}return null}function n(a){switch(a.type){case b("BladeRunnerTypes").StreamFrameType.REQUEST:return b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case b("BladeRunnerTypes").StreamFrameType.DATA:return b("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function o(a,c){var d;switch(a.type){case b("BladeRunnerTypes").StreamFrameType.REQUEST:c.data_base64_size=(d=a.request)==null?void 0:(d=d.payload)==null?void 0:(d=d.length)==null?void 0:d.toString();break;case b("BladeRunnerTypes").StreamFrameType.DATA:c.data_base64_size=(d=a.data)==null?void 0:(c=d.rawDataSize())==null?void 0:c.toString();break}return null}function p(a,c,d){var e=m(a);if(e==null)return;var f=n(a);if(f==null)return;var g=null;switch(c){case b("MqttPublishListener").MqttPublishEvent.SENT:g=b("RequestStreamE2EClientLoggerEvent").SENT;break;case b("MqttPublishListener").MqttPublishEvent.ACKED:g=b("RequestStreamE2EClientLoggerEvent").PUBACK;break;case b("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case b("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case b("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:g=b("RequestStreamE2EClientLoggerEvent").FAILURE;d.reason==null&&(d.reason=c);break}if(g==null)return;o(a,d);if(((c=a.request)==null?void 0:c.e2eLogger)!=null){(c=a.request)==null?void 0:c.e2eLogger.logE2EEvent(f,g,d,e.auxId)}else b("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(e,b("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,f,g,d)}a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map(),this.$7=a!=null?a:b("FBMqttChannel"),this.$8=new Map(),b("BladeRunnerLogger").setClientSessionId(b("uuid")()),this.$9()}a.get=function(){l==null&&(l=new a(b("FBMqttChannel")));return l};var c=a.prototype;c.sendNewStreamRequest=function(c,d){d=new(b("BladeRunnerEventHandler"))(c,d,this);var e=c.getRequest();this.$6.set(e.streamId,d);if(!this.$10()){this.$11(d,e.streamId);return}this.getStreamCount()<=a.maxStreamCount?this.$12(e):(b("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),b("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(c.getRequest().getHeaders())),this.$11(d,e.streamId))};c.sendRetryStreamRequest=function(a){this.$12(a.getRequest())};c.sendCancel=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_cancel");var c=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();c.streamId=a.streamId;c.status=b("BladeRunnerTypes").StreamStatus.CLOSED;this.$13(c,a);this.removeStream(a.streamId)};c.sendAmendment=function(a,c,d){b("BladeRunnerLogger").bumpCounter("socket_send_amendment");var e=new(b("BladeRunnerTypesInternal").GatewayStreamData)();e.streamId=a;e.setData(c);d!=null&&(e.instrumentationData=d);this.$14(e)};c.sendAmendmentWithAck=function(a,c,d){var e=this;b("BladeRunnerLogger").bumpCounter("socket_send_amendment");var f=this.$15(),g=new(b("BladeRunnerTypesInternal").GatewayStreamData)();g.streamId=a;g.setData(c);g.shouldAck=!0;g.dataId=f;d!=null&&(g.instrumentationData=d);a=new(b("Promise"))(function(a,b){e.$8.set(f,{resolve:a,reject:b})});this.$14(g);return a};c.$14=function(a){this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(a)),this.$16()};c.sendDataAcks=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$17(a)};c.removeStream=function(a){this.$6["delete"](a)};c.getStreamCount=function(){return this.$6.size};c.getNextStreamId=function(){this.$5++;return this.$5};c.onMQTTStateChanged=function(a){this.$16();if(a!=h&&a!=g||this.$4==a)return;this.$4=a;b("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==h?(b("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):a==g&&b("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};c.$12=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_request");this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a));if(!this.$16()){(a=a.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}};c.$13=function(a,c){this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a));if(this.$16()){(a=c.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").CANCEL,b("RequestStreamE2EClientLoggerEvent").SENT)}};c.$17=function(a){for(var c=0;c<a.length;c++){var d=a[c];this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(d))}this.$16()};c.$19=function(){this.$2++;return this.$2};c.$15=function(){this.$3++;return this.$3};c.$16=function(){var a=!1;if(this.$7.getConnectionState()===g&&this.$1.length>0)try{this.$20(this.$1),a=!0}catch(a){}finally{this.$1=[]}return a};c.$20=function(a){var c=this,d=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$19(),a),e=d.write();if(e.length>i){var f=Math.floor(a.length/2);if(f===0){a.forEach(function(a){return p(a,b("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var g=new Error("Publish is too long: "+e.length);g.stack;this.$21(d,g,"Publish is too long");throw g}this.$20(a.slice(0,f));this.$20(a.slice(f,a.length))}else try{b("BladeRunnerLogger").info("send message to "+j+" ("+e.length+" bytes)");g={qos:1,skipBuffer:!1};if(d.isInstrumented()){var h=Date.now();g.listener={onEvent:function(b){var c=(Date.now()-h).toString();a.forEach(function(a){p(a,b,{latency:c})})}}}this.$7.publish(j,e,g)["catch"](function(a){c.$21(d,a,"Failed publishing to MQTT")});b("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){this.$21(d,a,"Failed publishing to MQTT");throw a}};c.$9=function(){var a=this;b("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent);this.onMQTTStateChanged(this.$7.getConnectionState());this.$7.subscribeChannelEvents({onMQTTStateChanged:function(b){a.onMQTTStateChanged(b)},onJSError:function(a){var c=a!=null&&typeof a.isRecoverable==="boolean"?a.isRecoverable:!1;c?b("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(b("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),b("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}});this.$7.subscribe(j,function(a){throw new Error("Unexpected response: "+j+" "+a.toString())});this.$7.subscribe(k,function(b){a.$22(b)})};c.$22=function(a){a=b("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};c.$21=function(a,c,d){for(var a=a.getFrames(),e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(g.type===b("BladeRunnerTypes").StreamFrameType.REQUEST){var h=g.getRequest(),i=this.$6.get(h.streamId);i!=null&&this.$23(i,h.streamId,b("BladeRunnerTypes").StreamStatus.CLOSED,!0,null)}else if(g.type===b("BladeRunnerTypes").StreamFrameType.DATA){i=g.getData();h=i.dataId;if(i.shouldAck!=null&&i.shouldAck&&h!=null){g=new(b("BladeRunnerTypesInternal").GatewayStreamDataAck)();g.streamId=i.streamId;g.dataId=h;g.success=!1;g.code=b("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND;g.message=d;this.$24(g)}}}b("BladeRunnerLogger").info("Failed publishing to MQTT: "+c.message);b("BladeRunnerLogger").bumpCounter("mqtt_publish_error")};c.$24=function(a){var c=this.$8.get(a.dataId);c!=null&&(this.$8["delete"](a.dataId),a.success?c.resolve(!0):a.code===b("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?c.resolve(!1):c.reject(a.message))};c.processBatch=function(a){try{b("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(a.getInstrumentationData(),b("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").RECEIVED);b("BladeRunnerLogger").bumpCounter("socket_process_batch");var c=JSON.stringify(a);b("BladeRunnerLogger").info("Received batch ("+c.length+" bytes)");c=null;for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=g.getStreamId();c==null&&(c=h);if(h!=null&&c!=h)throw new Error("Received batch with frames for multiple streams");g.type==b("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$24(g.getDataAck())}if(c!=null){h=this.$6.get(c);h!=null?h.onProxyResponse(a):b("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+c)}else b("BladeRunnerLogger").info("Received batch with no frames")}catch(a){b("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");b("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};c.$18=function(){this.$6.forEach(function(a,b,c){a.onDisconnect()})};c.$11=function(a,c){this.$23(a,c,b("BladeRunnerTypes").StreamStatus.REJECTED,!1,0)};c.$23=function(a,c,d,e,f){var g=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();g.streamId=c;g.status=d;g.shouldRetry=e;g.retryDelayMs=f;c=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(g)]);a.onProxyResponse(c)};c.$10=function(){if(!b("CurrentUser").isLoggedIn()){b("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out");return!1}return!0};return a}();e.exports=a;a.maxStreamCount=2e3}),null);
__d("IRequestStreamRef",[],(function(a,b,c,d,e,f){"use strict"}),null);
__d("BladeRunnerStream",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a}var c=a.prototype;c.getStreamHandler=function(){return this.$1};c.cancel=function(){};c.amendWithAck=function(a){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",!1);case 1:case"end":return a.stop()}},null,this)};c.amendFireAndForget=function(a){};c.amendWithoutAck=function(a){};c.start=function(){return b("Promise").resolve()};c.isAlive=function(){return!1};c.canAmend=function(){return!1};c.getStatus=function(){return null};c.getStreamId=function(){return 0};return a}();e.exports=a}),null);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var c=a.prototype;c.getRequest=function(){return this.$1};c.updateRetryRequestPayload=function(a){this.$1.updateRetryRequestPayload(a)};c.isAlive=function(){return!(this.$2==b("BladeRunnerTypes").StreamStatus.CLOSED||this.$2==b("BladeRunnerTypes").StreamStatus.REJECTED)};c.canAmend=function(){return this.$2==b("BladeRunnerTypes").StreamStatus.ACCEPTED||this.$2==b("BladeRunnerTypes").StreamStatus.STARTED||this.$2==b("BladeRunnerTypes").StreamStatus.PAUSED};c.getLastStatus=function(){return this.$2};c.setLastStatus=function(a){this.$2=a};c.onError=function(){this.$3+=1};c.getErrorCount=function(){return this.$3};c.resetErrors=function(){this.$3=0};c.getRetryRequestScheduled=function(){return this.$6};c.setRetryRequestScheduled=function(a){this.$6=a};c.witnessFrame=function(a){switch(a.type){case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var c=a.getStatusUpdate(),d=!0;switch(c.status){case b("BladeRunnerTypes").StreamStatus.ACCEPTED:d=!this.$4;this.$4||(this.$4=!0);break;case b("BladeRunnerTypes").StreamStatus.STARTED:d=this.getLastStatus()!=b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.PAUSED:d=this.getLastStatus()==b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.CLOSED:case b("BladeRunnerTypes").StreamStatus.REJECTED:default:d=!0}this.setLastStatus(c.status);return d;case b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};c.setRetriesAllowed=function(a){this.$5=a};c.getRetriesAllowed=function(){return this.$5};c.$7=function(a){if(!(a.temporary!=null||a.temporary==!0)){a.newBody!=null&&(this.$1.payload=a.newBody);a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader));if(a.patchExtraHeader!=null)try{var c=JSON.parse(a.patchExtraHeader),d=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});var e=Object.keys(c);for(var f=0;f<e.length;f++){var g=e[f];this.$1.headers[g]=c[g];d[g]=c[g]}this.$1.extraHeader=JSON.stringify(d)}catch(c){b("BladeRunnerLogger").warn("Failed to patch header: "+a.patchExtraHeader)}a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null)}};return a}();e.exports=a}),null);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerTypes","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","regeneratorRuntime","uuid"],(function(a,b,c,d,e,f){var g=4,h={reason:"stream_dead"};a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){c=a.call(this,c)||this;c.$BladeRunnerSocketStream1=e;c.$BladeRunnerSocketStream2=new(b("BladeRunnerStreamState"))(d);c.$BladeRunnerSocketStream2.setRetriesAllowed(g);return c}var d=c.prototype;d.start=function(){var a=this;return new(b("Promise"))(function(b){a.send(),b()})};d.send=function(){var a,c=this.$BladeRunnerSocketStream2.getRequest();(a=c.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(a=c.payload)==null?void 0:(c=a.length)==null?void 0:c.toString()});this.$BladeRunnerSocketStream1.sendNewStreamRequest(this.$BladeRunnerSocketStream2,this.getStreamHandler())};d.amendWithAck=function(a){var c,d,e,f,g,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:d=this.$BladeRunnerSocketStream2.getRequest();e=d.getInstrumentationData();e&&(e.auxId=b("uuid")(),(f=d.e2eLogger)==null?void 0:f.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(g=a.length)==null?void 0:g.toString()},e.auxId));if(!this.canAmend()){k.next=6;break}e&&((i=d.e2eLogger)==null?void 0:i.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(j=a.length)==null?void 0:j.toString()},e.auxId));return k.abrupt("return",this.$BladeRunnerSocketStream1.sendAmendmentWithAck(d.streamId,a,e==null?null:JSON.stringify(e)));case 6:(c=d.e2eLogger)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").FAILURE,h,e==null?void 0:e.auxId);return k.abrupt("return",b("Promise").reject("Stream is closed or not accepted"));case 8:case"end":return k.stop()}},null,this)};d.amendFireAndForget=function(a){var c=this.$BladeRunnerSocketStream2.getRequest(),d=c.getInstrumentationData();if(d){var e;d.auxId=b("uuid")();(e=c.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}if(this.canAmend()){this.$BladeRunnerSocketStream1.sendAmendment(this.$BladeRunnerSocketStream2.getRequest().streamId,a,d==null?null:JSON.stringify(d));if(d){(e=c.e2eLogger)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}}else{(a=c.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").FAILURE,h,d==null?void 0:d.auxId);throw new Error("Stream is closed or not accepted")}};d.amendWithoutAck=function(a){this.amendFireAndForget(a)};d.cancel=function(){var a=this.$BladeRunnerSocketStream2.getRequest();(a=a.e2eLogger)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").CANCEL,b("RequestStreamE2EClientLoggerEvent").RECEIVED);this.isAlive()&&(this.$BladeRunnerSocketStream1.sendCancel(this.$BladeRunnerSocketStream2.getRequest()),this.$BladeRunnerSocketStream2.setLastStatus(b("BladeRunnerTypes").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())};d.isAlive=function(){return this.$BladeRunnerSocketStream2.isAlive()};d.canAmend=function(){return this.$BladeRunnerSocketStream2.canAmend()};d.getStatus=function(){return this.$BladeRunnerSocketStream2.getLastStatus()};d.getStreamId=function(){return this.$BladeRunnerSocketStream2.getRequest().streamId};return c}(b("BladeRunnerStream"));e.exports=a}),null);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","gkx","qex","uuid"],(function(a,b,c,d,e,f,g){"use strict";f.isForceLogged=h;f.getSampleRateForLogging=i;f.normalizeInstrumentationData=j;f.validateInstrumentationData=a;function h(a){return a==null?!1:a.requestId!=null&&typeof a.requestId=="string"&&a.forceLogContext!=null&&typeof a.forceLogContext=="string"}function i(a){var c=b("RequestStreamE2EClientSamplingConfig").sampleRate;if(c>1&&a!=null){var d=b("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[a];d==0?c=0:d!=null&&(c/=d)}a==="FBGQLS:FEEDBACK_LIKE_SUBSCRIBE"&&b("gkx")("1956158")&&(c/=100);return c}function j(a,c,d){var e=b("uuid")();(c.requestId==null||c.requestId===""||typeof c.requestId!="string")&&(a.requestId!=null&&typeof a.requestId=="string"?c.requestId=a.requestId:c.requestId=e);c.requestId+="/_"+e.substring(0,4);d!=null?c.sampleRate=d:c.sampleRate=void 0;e=b("qex")._("1926644");e!=null&&e.length>0&&(c.requestLogContext!=null&&c.requestLogContext.length>0?c.requestLogContext+=":":c.requestLogContext="",c.requestLogContext+=e);(a==null?void 0:a.method)==="Falco"&&(c.clientLoggingDisabled="Falco");return JSON.stringify(c)}function a(a,c){c&&(!c.requestId.includes("/")&&!c.requestId.includes("#")||g(0,41721));var d=i(a.method);if(b("Random").coinflip(d))return j(a,c||{requestId:""},d);return h(c)?j(a,c||{requestId:""}):""}}),null);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(a,b,c,d,e,f){a=function(){function a(a,c){this.$2=b("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=a!=null?a:b("BladeRunnerSocket").get(),c&&(this.$2=c)}var c=a.prototype;c.createStream=function(a,b,c,d){return this.$3(a,b,c,d)};c.requestStream=function(a,c,d,e){a=this.$3(a,c,d,e);a.send();b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return a};c.logInfo=function(a){b("BladeRunnerLogger").info(a)};c.bumpCounter=function(a){b("BladeRunnerLogger").bumpCounter(a)};c.$3=function(a,c,d,e){var f=new(b("BladeRunnerTypesInternal").GatewayStreamRequest)();f.streamId=this.$1.getNextStreamId();f.requestType=b("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;f.headers=b("BladeRunnerConfig").patchRequestHeaders(a);f.extraHeader=JSON.stringify(f.headers);f.payload=c!=null?b("Base64").encode(c):null;f.instrumentationData=b("RequestStreamE2ESampling").validateInstrumentationData(f.headers||{},e);f.e2eLogger=b("RequestStreamE2ELogger").createStreamLogger(f.headers,f.instrumentationData,this.$2);return new(b("BladeRunnerSocketStream"))(d,f,this.$1)};return a}();e.exports=a}),null);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDrain","ReestablishError","ClientError"]);f.RequestStreamCloseReason=a}),null);
__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();e.exports=a;a.DEFAULT_BYTE_BUFFER_SIZE=16}),null);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f){a=function(a){var c=new(b("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)c.writeByte(d);else if(d<2048)c.writeByte(d>>6|192),c.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);c.writeByte(d>>18|240);c.writeByte(d>>12&63|128);c.writeByte(d>>6&63|128);c.writeByte(d&63|128)}else c.writeByte(d>>12|224),c.writeByte(d>>6&63|128),c.writeByte(d&63|128)}return c.toByteArray()};f.StringToUtf8=a}),null);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;e.exports=b}),null);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),null);
__d("jsbi",[],(function(a,b,c,d,e,f){(function(a,b){"object"==typeof f&&"undefined"!=typeof e?e.exports=b():"function"==typeof define&&define.amd?define(b):a.JSBI=b()})(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function i(){return i=h()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);b=Function.bind.apply(a,d);a=new b();return c&&g(a,c.prototype),a},i.apply(null,arguments)}function j(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function k(a){var b="function"==typeof Map?new Map():void 0;return k=function(a){function c(){return i(a,arguments,f(this).constructor)}if(null===a||!j(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),g(c,a)},k(a)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:l(a)}var n=function(c){var h=Math.abs,i=Math.max,j=Math.imul,k=Math.clz32;function g(a,c){if(b(this,g),a>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return a=m(this,f(g).call(this,a)),a.sign=c,a}return e(g,c),d(g,[{key:"toDebugString",value:function(){var a=["BigInt["],b=!0,c=!1,d=void 0;try{for(var e,e,f=this[Symbol.iterator]();!(b=(e=f.next()).done);b=!0)e=e.value,a.push((e?(e>>>0).toString(16):e)+", ")}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a.push("]"),a.join("")}},{key:"toString",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>a||36<a)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?g.__toStringBasePowerOfTwo(this,a):g.__toStringGeneric(this,a,!1)}},{key:"__copy",value:function(){for(var a=new g(this.length,this.sign),b=0;b<this.length;b++)a[b]=this[b];return a}},{key:"__trim",value:function(){for(var a=this.length,b=this[a-1];0===b;)a--,b=this[a-1],this.pop();return 0===a&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var a=0;a<this.length;a++)this[a]=0}},{key:"__clzmsd",value:function(){return k(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(a,b,c){c>this.length&&(c=this.length);for(var d=65535&a,a=a>>>16,e=0,f=65535&b,b=b>>>16,i=0;i<c;i++){var n=this.__digit(i),m=65535&n;n=n>>>16;var o=j(m,d);m=j(m,a);var p=j(n,d);n=j(n,a);var q=f+(65535&o);o=b+e+(q>>>16)+(o>>>16)+(65535&m)+(65535&p);f=(m>>>16)+(p>>>16)+(65535&n)+(o>>>16),e=f>>>16,f&=65535,b=n>>>16;this.__setDigit(i,65535&q|o<<16)}if(0!==e||0!==f||0!==b)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(a,b,c){for(var d,e=0,f=0;f<c;f++)d=this.__halfDigit(b+f)+a.__halfDigit(f)+e,e=d>>>16,this.__setHalfDigit(b+f,d);return e}},{key:"__inplaceSub",value:function(a,b,c){var d=0;if(1&b){b>>=1;for(var e=this.__digit(b),f=65535&e,k=0;k<c-1>>>1;k++){var l=a.__digit(k),m=(e>>>16)-(65535&l)-d;d=1&m>>>16,this.__setDigit(b+k,m<<16|65535&f),e=this.__digit(b+k+1),f=(65535&e)-(l>>>16)-d,d=1&f>>>16}m=a.__digit(k);l=(e>>>16)-(65535&m)-d;d=1&l>>>16,this.__setDigit(b+k,l<<16|65535&f);if(b+k+1>=this.length)throw new RangeError("out of bounds");0==(1&c)&&(e=this.__digit(b+k+1),f=(65535&e)-(m>>>16)-d,d=1&f>>>16,this.__setDigit(b+a.length,4294901760&e|65535&f))}else{b>>=1;for(var l=0;l<a.length-1;l++){k=this.__digit(b+l);m=a.__digit(l);e=(65535&k)-(65535&m)-d;d=1&e>>>16;f=(k>>>16)-(m>>>16)-d;d=1&f>>>16,this.__setDigit(b+l,f<<16|65535&e)}k=this.__digit(b+l);m=a.__digit(l);f=(65535&k)-(65535&m)-d;d=1&f>>>16;e=0;0==(1&c)&&(e=(k>>>16)-(m>>>16)-d,d=1&e>>>16),this.__setDigit(b+l,e<<16|65535&f)}return d}},{key:"__inplaceRightShift",value:function(a){if(0!==a){for(var b,c=this.__digit(0)>>>a,d=this.length-1,e=0;e<d;e++)b=this.__digit(e+1),this.__setDigit(e,b<<32-a|c),c=b>>>a;this.__setDigit(d,c)}}},{key:"__digit",value:function(a){return this[a]}},{key:"__unsignedDigit",value:function(a){return this[a]>>>0}},{key:"__setDigit",value:function(a,b){this[a]=0|b}},{key:"__setDigitGrow",value:function(a,b){this[a]=0|b}},{key:"__halfDigitLength",value:function(){var a=this.length;return 65535>=this.__unsignedDigit(a-1)?2*a-1:2*a}},{key:"__halfDigit",value:function(a){return 65535&this[a>>>1]>>>((1&a)<<4)}},{key:"__setHalfDigit",value:function(a,b){var c=a>>>1,d=this.__digit(c);a=1&a?65535&d|b<<16:4294901760&d|65535&b;this.__setDigit(c,a)}}],[{key:"BigInt",value:function(b){var c=Math.floor,d=Number.isFinite;if("number"==typeof b){if(0===b)return g.__zero();if((0|b)===b)return 0>b?g.__oneDigit(-b,!0):g.__oneDigit(b,!1);if(!d(b)||c(b)!==b)throw new RangeError("The number "+b+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(b)}if("string"==typeof b){d=g.__fromString(b);if(null===d)throw new SyntaxError("Cannot convert "+b+" to a BigInt");return d}if("boolean"==typeof b)return!0===b?g.__oneDigit(1,!1):g.__zero();if("object"===a(b)){if(b.constructor===g)return b;c=g.__toPrimitive(b);return g.BigInt(c)}throw new TypeError("Cannot convert "+b+" to a BigInt")}},{key:"toNumber",value:function(a){var b=a.length;if(0===b)return 0;if(1===b){var c=a.__unsignedDigit(0);return a.sign?-c:c}c=a.__digit(b-1);var d=k(c),e=32*b-d;if(1024<e)return a.sign?-Infinity:1/0;e=e-1;c=c;b=b-1;d=d+1;var f=32===d?0:c<<d;f>>>=12;var h=d-12,i=12<=d?0:c<<20+d;d=20+d;0<h&&0<b&&(b--,c=a.__digit(b),f|=c>>>32-h,i=c<<h,d=h),0<d&&0<b&&(b--,c=a.__digit(b),i|=c>>>32-d,d-=32);h=g.__decideRounding(a,d,b,c);if((1===h||0===h&&1==(1&i))&&(i=i+1>>>0,0===i&&(f++,0!=f>>>20&&(f=0,e++,1023<e))))return a.sign?-Infinity:1/0;d=a.sign?-2147483648:0;return e=e+1023<<20,g.__kBitConversionInts[1]=d|e|f,g.__kBitConversionInts[0]=i,g.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(a){if(0===a.length)return a;var b=a.__copy();return b.sign=!a.sign,b}},{key:"bitwiseNot",value:function(a){return a.sign?g.__absoluteSubOne(a).__trim():g.__absoluteAddOne(a,!0)}},{key:"exponentiate",value:function(a,b){if(b.sign)throw new RangeError("Exponent must be positive");if(0===b.length)return g.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?g.unaryMinus(a):a;if(1<b.length)throw new RangeError("BigInt too big");b=b.__unsignedDigit(0);if(1===b)return a;if(b>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){var c=1+(b>>>5),d=a.sign&&0!=(1&b);d=new g(c,d);d.__initializeDigits();var e=1<<(31&b);return d.__setDigit(c-1,e),d}c=null;e=a;for(0!=(1&b)&&(c=a),b>>=1;0!==b;b>>=1)e=g.multiply(e,e),0!=(1&b)&&(null===c?c=e:c=g.multiply(c,e));return c}},{key:"multiply",value:function(a,b){if(0===a.length)return a;if(0===b.length)return b;var c=a.length+b.length;32<=a.__clzmsd()+b.__clzmsd()&&c--;c=new g(c,a.sign!==b.sign);c.__initializeDigits();for(var d=0;d<a.length;d++)g.__multiplyAccumulate(b,a.__digit(d),c,d);return c.__trim()}},{key:"divide",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return g.__zero();var c=a.sign!==b.sign,d=b.__unsignedDigit(0);if(1===b.length&&65535>=d){if(1===d)return c===a.sign?a:g.unaryMinus(a);d=g.__absoluteDivSmall(a,d,null)}else d=g.__absoluteDivLarge(a,b,!0,!1);return d.sign=c,d.__trim()}},{key:"remainder",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return a;var c=b.__unsignedDigit(0);if(1===b.length&&65535>=c){if(1===c)return g.__zero();c=g.__absoluteModSmall(a,c);return 0===c?g.__zero():g.__oneDigit(c,a.sign)}c=g.__absoluteDivLarge(a,b,!1,!0);return c.sign=a.sign,c.__trim()}},{key:"add",value:function(a,b){var c=a.sign;return c===b.sign?g.__absoluteAdd(a,b,c):0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c)}},{key:"subtract",value:function(a,b){var c=a.sign;return c===b.sign?0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c):g.__absoluteAdd(a,b,c)}},{key:"leftShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__rightShiftByAbsolute(a,b):g.__leftShiftByAbsolute(a,b)}},{key:"signedRightShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__leftShiftByAbsolute(a,b):g.__rightShiftByAbsolute(a,b)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(a,b){return 0>g.__compareToBigInt(a,b)}},{key:"lessThanOrEqual",value:function(a,b){return 0>=g.__compareToBigInt(a,b)}},{key:"greaterThan",value:function(a,b){return 0<g.__compareToBigInt(a,b)}},{key:"greaterThanOrEqual",value:function(a,b){return 0<=g.__compareToBigInt(a,b)}},{key:"equal",value:function(a,b){if(a.sign!==b.sign)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}},{key:"notEqual",value:function(a,b){return!g.equal(a,b)}},{key:"bitwiseAnd",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length)+1;c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return c=g.__absoluteOr(c,d,c),g.__absoluteAddOne(c,!0,c).__trim()}if(a.sign){d=[b,a];a=d[0],b=d[1]}return g.__absoluteAndNot(a,g.__absoluteSubOne(b)).__trim()}},{key:"bitwiseXor",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length);c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return g.__absoluteXor(c,d,c).__trim()}d=i(a.length,b.length)+1;if(a.sign){c=[b,a];a=c[0],b=c[1]}c=g.__absoluteSubOne(b,d);return c=g.__absoluteXor(c,a,c),g.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(a,b){var c=i(a.length,b.length);if(!a.sign&&!b.sign)return g.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){var d=g.__absoluteSubOne(a,c),e=g.__absoluteSubOne(b);return d=g.__absoluteAnd(d,e,d),g.__absoluteAddOne(d,!0,d).__trim()}if(a.sign){e=[b,a];a=e[0],b=e[1]}d=g.__absoluteSubOne(b,c);return d=g.__absoluteAndNot(d,a,d),g.__absoluteAddOne(d,!0,d).__trim()}},{key:"asIntN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=b.__unsignedDigit(c-1),e=1<<(31&a-1);if(b.length===c&&d<e)return b;if(!((d&e)===e))return g.__truncateToNBits(a,b);if(!b.sign)return g.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(d&e-1)){for(var f=c-2;0<=f;f--)if(0!==b.__digit(f))return g.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&d===e?b:g.__truncateToNBits(a,b)}return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}},{key:"asUintN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(b.sign){if(a>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=31&a;if(b.length==c){if(0==d)return b;c=b.__digit(c-1);if(0==c>>>d)return b}return g.__truncateToNBits(a,b)}},{key:"ADD",value:function(a,b){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)&&g.__isBigInt(b))return g.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(a,b){return g.__compare(a,b,0)}},{key:"LE",value:function(a,b){return g.__compare(a,b,1)}},{key:"GT",value:function(a,b){return g.__compare(a,b,2)}},{key:"GE",value:function(a,b){return g.__compare(a,b,3)}},{key:"EQ",value:function(b,c){for(;;){if(g.__isBigInt(b))return g.__isBigInt(c)?g.equal(b,c):g.EQ(c,b);if("number"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("string"==typeof b){if(g.__isBigInt(c))return b=g.__fromString(b),null!==b&&g.equal(b,c);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("boolean"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,+b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("symbol"===a(b)){if(g.__isBigInt(c))return!1;if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("object"===a(b)){if("object"===a(c)&&c.constructor!==g)return b==c;b=g.__toPrimitive(b)}else return b==c}}},{key:"NE",value:function(a,b){return!g.EQ(a,b)}},{key:"__zero",value:function(){return new g(0,!1)}},{key:"__oneDigit",value:function(a,b){b=new g(1,b);return b.__setDigit(0,a),b}},{key:"__decideRounding",value:function(a,b,c,d){if(0<b)return-1;if(0>b)b=-b-1;else{if(0===c)return-1;c--,d=a.__digit(c),b=31}b=1<<b;if(0==(d&b))return-1;if(b-=1,0!=(d&b))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}},{key:"__fromDouble",value:function(a){g.__kBitConversionDouble[0]=a;var b,c=2047&g.__kBitConversionInts[1]>>>20;c=c-1023;var d=(c>>>5)+1;a=new g(d,0>a);var e=1048575&g.__kBitConversionInts[1]|1048576,f=g.__kBitConversionInts[0],k=20;c=31&c;var n=0;if(c<k){var m=k-c;n=m+32,b=e>>>m,e=e<<32-m|f>>>m,f<<=32-m}else if(c===k)n=32,b=e,e=f;else{m=c-k;n=32-m,b=e<<m|f>>>32-m,e=f<<m}a.__setDigit(d-1,b);for(var c=d-2;0<=c;c--)0<n?(n-=32,b=e,e=f):b=0,a.__setDigit(c,b);return a.__trim()}},{key:"__isWhitespace",value:function(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?(a&=131071,10>=a||40==a||41==a||47==a||95==a||4096==a):65279==a)}},{key:"__fromString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=0,d=a.length,e=0;if(e===d)return g.__zero();for(var f=a.charCodeAt(e);g.__isWhitespace(f);){if(++e===d)return g.__zero();f=a.charCodeAt(e)}if(43===f){if(++e===d)return null;f=a.charCodeAt(e),c=1}else if(45===f){if(++e===d)return null;f=a.charCodeAt(e),c=-1}if(0===b){if(b=10,48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(b=16,++e===d)return null;f=a.charCodeAt(e)}else if(79===f||111===f){if(b=8,++e===d)return null;f=a.charCodeAt(e)}else if(66===f||98===f){if(b=2,++e===d)return null;f=a.charCodeAt(e)}}}else if(16===b&&48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(++e===d)return null;f=a.charCodeAt(e)}}for(;48===f;){if(++e===d)return g.__zero();f=a.charCodeAt(e)}var m=d-e,i=g.__kMaxBitsPerChar[b],j=g.__kBitsPerCharTableMultiplier-1;if(m>1073741824/i)return null;var k=i*m+j>>>g.__kBitsPerCharTableShift,l=new g(k+31>>>5,!1),n=10>b?b:10,o=10<b?b-10:0;if(0==(b&b-1)){i>>=g.__kBitsPerCharTableShift;var p=[],q=[],r=!1;do{for(var s,t=0,u=0;;){if(void 0,f-48>>>0<n)s=f-48;else if((32|f)-97>>>0<o)s=(32|f)-87;else{r=!0;break}if(u+=i,t=t<<i|s,++e===d){r=!0;break}if(f=a.charCodeAt(e),32<u+i)break}p.push(t),q.push(u)}while(!r);g.__fillFromParts(l,p,q)}else{l.__initializeDigits();var v=!1,w=0;do{for(var x,y=0,z=1;;){if(void 0,f-48>>>0<n)x=f-48;else if((32|f)-97>>>0<o)x=(32|f)-87;else{v=!0;break}var A=z*b;if(4294967295<A)break;if(z=A,y=y*b+x,w++,++e===d){v=!0;break}f=a.charCodeAt(e)}j=32*g.__kBitsPerCharTableMultiplier-1;var B=i*w+j>>>g.__kBitsPerCharTableShift+5;l.__inplaceMultiplyAdd(z,y,B)}while(!v)}if(e!==d){if(!g.__isWhitespace(f))return null;for(e++;e<d;e++)if(f=a.charCodeAt(e),!g.__isWhitespace(f))return null}return 0!==c&&10!==b?null:(l.sign=-1===c,l.__trim())}},{key:"__fillFromParts",value:function(a,b,c){for(var d=0,e=0,f=0,k=b.length-1;0<=k;k--){var l=b[k],m=c[k];e|=l<<f,f+=m,32===f?(a.__setDigit(d++,e),f=0,e=0):32<f&&(a.__setDigit(d++,e),f-=32,e=l>>>m-f)}if(0!==e){if(d>=a.length)throw new Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}},{key:"__toStringBasePowerOfTwo",value:function(a,b){var c=a.length,d=b-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);d=d;b=b-1;var e=a.__digit(c-1),f=k(e);f=0|(32*c-f+d-1)/d;if(a.sign&&f++,268435456<f)throw new Error("string too long");for(var h=Array(f),f=f-1,l=0,n=0,o=0;o<c-1;o++){var p=a.__digit(o),q=(l|p<<n)&b;h[f--]=g.__kConversionChars[q];q=d-n;for(l=p>>>q,n=32-q;n>=d;)h[f--]=g.__kConversionChars[l&b],l>>>=d,n-=d}p=(l|e<<n)&b;for(h[f--]=g.__kConversionChars[p],l=e>>>d-n;0!==l;)h[f--]=g.__kConversionChars[l&b],l>>>=d;if(a.sign&&(h[f--]="-"),-1!==f)throw new Error("implementation bug");return h.join("")}},{key:"__toStringGeneric",value:function(a,b,c){var d=a.length;if(0===d)return"";if(1===d){var e=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(e="-"+e),e}e=32*d-k(a.__digit(d-1));d=g.__kMaxBitsPerChar[b];d=d-1;e=e*g.__kBitsPerCharTableMultiplier;e+=d-1,e=0|e/d;var f;d=e+1>>1;e=g.exponentiate(g.__oneDigit(b,!1),g.__oneDigit(d,!1));var h=e.__unsignedDigit(0);if(1===e.length&&65535>=h){f=new g(a.length,!1),f.__initializeDigits();for(var i,j=0,l=2*a.length-1;0<=l;l--)i=j<<16|a.__halfDigit(l),f.__setHalfDigit(l,0|i/h),j=0|i%h;i=j.toString(b)}else{h=g.__absoluteDivLarge(a,e,!0,!0);f=h.quotient;l=h.remainder.__trim();i=g.__toStringGeneric(l,b,!0)}f.__trim();for(var j=g.__toStringGeneric(f,b,!0);i.length<d;)i="0"+i;return!1===c&&a.sign&&(j="-"+j),j+i}},{key:"__unequalSign",value:function(a){return a?-1:1}},{key:"__absoluteGreater",value:function(a){return a?-1:1}},{key:"__absoluteLess",value:function(a){return a?1:-1}},{key:"__compareToBigInt",value:function(a,b){var c=a.sign;if(c!==b.sign)return g.__unequalSign(c);a=g.__absoluteCompare(a,b);return 0<a?g.__absoluteGreater(c):0>a?g.__absoluteLess(c):0}},{key:"__compareToNumber",value:function(a,b){if(!0|b){var c=a.sign,d=0>b;if(c!==d)return g.__unequalSign(c);if(0===a.length){if(d)throw new Error("implementation bug");return 0===b?0:-1}if(1<a.length)return g.__absoluteGreater(c);d=h(b);var e=a.__unsignedDigit(0);return e>d?g.__absoluteGreater(c):e<d?g.__absoluteLess(c):0}return g.__compareToDouble(a,b)}},{key:"__compareToDouble",value:function(a,b){if(b!==b)return b;if(b===1/0)return-1;if(b===-Infinity)return 1;var c=a.sign;if(c!==0>b)return g.__unequalSign(c);if(0===b)throw new Error("implementation bug: should be handled elsewhere");if(0===a.length)return-1;g.__kBitConversionDouble[0]=b;b=2047&g.__kBitConversionInts[1]>>>20;if(2047==b)throw new Error("implementation bug: handled elsewhere");b=b-1023;if(0>b)return g.__absoluteGreater(c);var d=a.length,e=a.__digit(d-1),f=k(e),l=32*d-f;b=b+1;if(l<b)return g.__absoluteLess(c);if(l>b)return g.__absoluteGreater(c);b=1048576|1048575&g.__kBitConversionInts[1];var m=g.__kBitConversionInts[0],o=20;f=31-f;if(f!==(l-1)%31)throw new Error("implementation bug");var p;l=0;if(f<o){var q=o-f;l=q+32,p=b>>>q,b=b<<32-q|m>>>q,m<<=32-q}else if(f===o)l=32,p=b,b=m;else{q=f-o;l=32-q,p=b<<q|m>>>32-q,b=m<<q}if(e>>>=0,p>>>=0,e>p)return g.__absoluteGreater(c);if(e<p)return g.__absoluteLess(c);for(var f=d-2;0<=f;f--){0<l?(l-=32,p=b>>>0,b=m,m=0):p=0;o=a.__unsignedDigit(f);if(o>p)return g.__absoluteGreater(c);if(o<p)return g.__absoluteLess(c)}if(0!==b||0!==m){if(0===l)throw new Error("implementation bug");return g.__absoluteLess(c)}return 0}},{key:"__equalToNumber",value:function(a,b){return b|0===b?0===b?0===a.length:1===a.length&&a.sign===0>b&&a.__unsignedDigit(0)===h(b):0===g.__compareToDouble(a,b)}},{key:"__comparisonResultToBool",value:function(a,b){switch(b){case 0:return 0>a;case 1:return 0>=a;case 2:return 0<a;case 3:return 0<=a}throw new Error("unreachable")}},{key:"__compare",value:function(a,b,c){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(g.__isBigInt(a)&&"string"==typeof b)return b=g.__fromString(b),null!==b&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("string"==typeof a&&g.__isBigInt(b))return a=g.__fromString(a),null!==a&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)){if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("number"!=typeof b)throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(a,b),c)}if("number"!=typeof a)throw new Error("implementation bug");if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw new Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}},{key:"__absoluteAdd",value:function(a,b,c){if(a.length<b.length)return g.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);var d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;for(var d=new g(d,c),c=0,e=0;e<b.length;e++){var f=b.__digit(e),h=a.__digit(e),m=(65535&h)+(65535&f)+c;h=(h>>>16)+(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}for(;e<a.length;e++){f=a.__digit(e);m=(65535&f)+c;h=(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}return e<d.length&&d.__setDigit(e,c),d.__trim()}},{key:"__absoluteSub",value:function(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);for(var c=new g(a.length,c),d=0,e=0;e<b.length;e++){var f=a.__digit(e),l=b.__digit(e),m=(65535&f)-(65535&l)-d;d=1&m>>>16;f=(f>>>16)-(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}for(;e<a.length;e++){l=a.__digit(e);m=(65535&l)-d;d=1&m>>>16;f=(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}return c.__trim()}},{key:"__absoluteAddOne",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length;null===c?c=new g(d,b):c.sign=b;for(var e=!0,f=0;f<d;f++){var k=a.__digit(f),l=-1===k;e&&(k=0|k+1),e=l,c.__setDigit(f,k)}return e&&c.__setDigitGrow(d,1),c}},{key:"__absoluteSubOne",value:function(a,b){var c=a.length;b=b||c;for(var d=new g(b,!1),e=!0,f=0;f<c;f++){var k=a.__digit(f),l=0===k;e&&(k=0|k-1),e=l,d.__setDigit(f,k)}for(var l=c;l<b;l++)d.__setDigit(l,0);return d}},{key:"__absoluteAnd",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,e,b=m,n}var k=f;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&b.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteAndNot",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;d<e&&(f=d);var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&~b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteOr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)|b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteXor",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)^b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteCompare",value:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=a.length-1;0<=c&&a.__digit(c)===b.__digit(c);)c--;return 0>c?0:a.__unsignedDigit(c)>b.__unsignedDigit(c)?1:-1}},{key:"__multiplyAccumulate",value:function(a,b,c,d){if(0!==b){for(var e=65535&b,b=b>>>16,f=0,g=0,k=0,l=0;l<a.length;l++,d++){var m=c.__digit(d),n=65535&m,o=m>>>16,p=a.__digit(l),q=65535&p;p=p>>>16;var r=j(q,e);q=j(q,b);var s=j(p,e);p=j(p,b);n+=g+(65535&r),o+=k+f+(n>>>16)+(r>>>16)+(65535&q)+(65535&s),f=o>>>16,g=(q>>>16)+(s>>>16)+(65535&p)+f,f=g>>>16,g&=65535,k=p>>>16,m=65535&n|o<<16,c.__setDigit(d,m)}for(;0!==f||0!==g||0!==k;d++){r=c.__digit(d);q=(65535&r)+g;s=(r>>>16)+(q>>>16)+k+f;g=0,k=0,f=s>>>16,r=65535&q|s<<16,c.__setDigit(d,r)}}}},{key:"__internalMultiplyAdd",value:function(a,b,c,d,e){for(var c=c,f=0,h=0;h<d;h++){var l=a.__digit(h),m=j(65535&l,b),n=(65535&m)+f+c;c=n>>>16;l=j(l>>>16,b);m=(65535&l)+(m>>>16)+c;c=m>>>16,f=l>>>16,e.__setDigit(h,m<<16|65535&n)}if(e.length>d)for(e.__setDigit(d++,c+f);d<e.length;)e.__setDigit(d++,0);else if(0!==c+f)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(a,b,c){null===c&&(c=new g(a.length,!1));for(var d=0,e=2*a.length-1;0<=e;e-=2){var f=(d<<16|a.__halfDigit(e))>>>0,k=0|f/b;d=0|f%b,f=(d<<16|a.__halfDigit(e-1))>>>0;var l=0|f/b;d=0|f%b,c.__setDigit(e>>>1,k<<16|l)}return c}},{key:"__absoluteModSmall",value:function(a,b){for(var c,d=0,e=2*a.length-1;0<=e;e--)c=(d<<16|a.__halfDigit(e))>>>0,d=0|c%b;return d}},{key:"__absoluteDivLarge",value:function(a,b,c,d){var f=b.__halfDigitLength(),e=b.length,n=a.__halfDigitLength()-f,i=null;c&&(i=new g(n+2>>>1,!1),i.__initializeDigits());var l=new g(f+2>>>1,!1);l.__initializeDigits();var m=g.__clz16(b.__halfDigit(f-1));0<m&&(b=g.__specialLeftShift(b,m,0));for(var a=g.__specialLeftShift(a,m,1),k=b.__halfDigit(f-1),o=0,n=n;0<=n;n--){var p=65535,q=a.__halfDigit(n+f);if(q!==k){q=(q<<16|a.__halfDigit(n+f-1))>>>0;p=0|q/k;for(var q=0|q%k,r=b.__halfDigit(f-2),s=a.__halfDigit(n+f-2);j(p,r)>>>0>(q<<16|s)>>>0&&(p--,q+=k,!(65535<q)););}g.__internalMultiplyAdd(b,p,0,e,l);r=a.__inplaceSub(l,n,f+1);0!==r&&(r=a.__inplaceAdd(b,n,f),a.__setHalfDigit(n+f,a.__halfDigit(n+f)+r),p--),c&&(1&n?o=p<<16:i.__setDigit(n>>>1,o|p))}return d?(a.__inplaceRightShift(m),c?{quotient:i,remainder:a}:a):c?i:void 0}},{key:"__clz16",value:function(a){return k(a)-16}},{key:"__specialLeftShift",value:function(a,b,c){var e=a.length,d=new g(e+c,!1);if(0===b){for(var f=0;f<e;f++)d.__setDigit(f,a.__digit(f));return 0<c&&d.__setDigit(e,0),d}for(var j,f=0,l=0;l<e;l++)j=a.__digit(l),d.__setDigit(l,j<<b|f),f=j>>>32-b;return 0<c&&d.__setDigit(e,f),d}},{key:"__leftShiftByAbsolute",value:function(a,b){b=g.__toShiftAmount(b);if(0>b)throw new RangeError("BigInt too big");var c=b>>>5;b=31&b;var d=a.length,e=0!==b&&0!=a.__digit(d-1)>>>32-b,f=d+c+(e?1:0),m=new g(f,a.sign);if(0===b){for(var n=0;n<c;n++)m.__setDigit(n,0);for(;n<f;n++)m.__setDigit(n,a.__digit(n-c))}else{for(var n=0,f=0;f<c;f++)m.__setDigit(f,0);for(var o,f=0;f<d;f++)o=a.__digit(f),m.__setDigit(f+c,o<<b|n),n=o>>>32-b;if(e)m.__setDigit(d+c,n);else if(0!==n)throw new Error("implementation bug")}return m.__trim()}},{key:"__rightShiftByAbsolute",value:function(a,b){var c=a.length,d=a.sign;b=g.__toShiftAmount(b);if(0>b)return g.__rightShiftByMaximum(d);var e=b>>>5;b=31&b;var f=c-e;if(0>=f)return g.__rightShiftByMaximum(d);var i=!1;if(d)if(0!=(a.__digit(e)&(1<<b)-1))i=!0;else for(var m=0;m<e;m++)if(0!==a.__digit(m)){i=!0;break}if(i&&0===b){m=a.__digit(c-1);0==~m&&f++}m=new g(f,d);if(0===b)for(var f=e;f<c;f++)m.__setDigit(f-e,a.__digit(f));else{for(var n,d=a.__digit(e)>>>b,f=c-e-1,c=0;c<f;c++)n=a.__digit(c+e+1),m.__setDigit(c,n<<32-b|d),d=n>>>b;m.__setDigit(f,d)}return i&&(m=g.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(a){return a?g.__oneDigit(1,!0):g.__zero()}},{key:"__toShiftAmount",value:function(a){if(1<a.length)return-1;a=a.__unsignedDigit(0);return a>g.__kMaxLengthBits?-1:a}},{key:"__toPrimitive",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==a(b))return b;if(b.constructor===g)return b;var d=b[Symbol.toPrimitive];if(d){var e=d(c);if("object"!==a(e))return e;throw new TypeError("Cannot convert object to primitive value")}var f=b.valueOf;if(f){var k=f.call(b);if("object"!==a(k))return k}var l=b.toString;if(l){var m=l.call(b);if("object"!==a(m))return m}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(a){return g.__isBigInt(a)?a:+a}},{key:"__isBigInt",value:function(b){return"object"===a(b)&&b.constructor===g}},{key:"__truncateToNBits",value:function(a,b){for(var c=a+31>>>5,d=new g(c,b.sign),c=c-1,e=0;e<c;e++)d.__setDigit(e,b.__digit(e));e=b.__digit(c);if(0!=(31&a)){b=32-(31&a);e=e<<b>>>b}return d.__setDigit(c,e),d.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(a,b,c){for(var d=Math.min,e=a+31>>>5,c=new g(e,c),f=0,e=e-1,h=0,d=d(e,b.length);f<d;f++){var j=b.__digit(f),l=0-(65535&j)-h;h=1&l>>>16;j=0-(j>>>16)-h;h=1&j>>>16,c.__setDigit(f,65535&l|j<<16)}for(;f<e;f++)c.__setDigit(f,0|-h);l=e<b.length?b.__digit(e):0;j=31&a;if(0===j){d=0-(65535&l)-h;h=1&d>>>16;f=0-(l>>>16)-h;b=65535&d|f<<16}else{a=32-j;l=l<<a>>>a;d=1<<32-a;f=(65535&d)-(65535&l)-h;h=1&f>>>16;j=(d>>>16)-(l>>>16)-h;b=65535&f|j<<16,b&=d-1}return c.__setDigit(e,b),c.__trim()}},{key:"__digitPow",value:function(a,b){for(var c=1;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}}]),g}(k(Array));return n.__kMaxLength=33554432,n.__kMaxLengthBits=n.__kMaxLength<<5,n.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],n.__kBitsPerCharTableShift=5,n.__kBitsPerCharTableMultiplier=1<<n.__kBitsPerCharTableShift,n.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.__kBitConversionBuffer=new ArrayBuffer(8),n.__kBitConversionDouble=new Float64Array(n.__kBitConversionBuffer),n.__kBitConversionInts=new Int32Array(n.__kBitConversionBuffer),n})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(a,b,c,d,e,f){var g=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),h=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:g.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:g.CT_BOOLEAN_FALSE}),i=[g.CT_STOP,0,g.CT_BOOLEAN_TRUE,g.CT_BYTE,g.CT_DOUBLE,0,g.CT_I16,0,g.CT_I32,0,g.CT_I64,g.CT_BINARY,g.CT_STRUCT,g.CT_MAP,g.CT_SET,g.CT_LIST,0,0,0,g.CT_FLOAT],j=Math.pow(2,7)-1,k=-1*Math.pow(2,7),l=Math.pow(2,15)-1,m=-1*Math.pow(2,15),n=Math.pow(2,31)-1,o=-1*Math.pow(2,31),p=Math.pow(2,32)-1,q=(a=b("jsbi")).BigInt("9223372036854775807"),r=a.BigInt("-9223372036854775808"),s=a.BigInt("18446744073709551615"),t=a.BigInt(63),u=a.BigInt(1),v=a.BigInt(0),w=a.BigInt(7),x=a.BigInt(70),y=a.BigInt(127),z=a.BigInt(128),A=Math.pow(2,4);c=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var c=a.prototype;c.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};c.readStructEnd=function(){this.$3=this.$2.pop()};c.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};c.writeStructEnd=function(){this.$3=this.$2.pop();return 0};c.writeFieldBegin=function(a){if(a.ftype===b("ThriftTypes").BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,h.NONE)};c.writeListBegin=function(a){return this.$8(a)};c.writeSetBegin=function(a){return this.$8(a)};c.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};c.$7=function(a,b){var c=0;b=b===h.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=A-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};c.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=A-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};c.readFieldBegin=function(){var a=this.$1.readByte(),c=a&15;if(c===b("ThriftTypes").STOP)return{ftype:b("ThriftTypes").STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(c);(c===g.CT_BOOLEAN_TRUE||c===g.CT_BOOLEAN_FALSE)&&(this.$5=c===g.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};c.readListBegin=function(){return this.$11()};c.readSetBegin=function(){return this.$11()};c.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};c.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};c.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};c.readFieldEnd=function(){};c.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};c.writeByte=function(a){if(a<k||a>j)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};c.readFloat=function(){return this.$1.readFloatBE()};c.writeFloat=function(a){return this.$1.writeFloatBE(a)};c.readDouble=function(){return this.$1.readDoubleBE()};c.writeDouble=function(a){return this.$1.writeDoubleBE(a)};c.writeString=function(a){return this.writeBinary(b("StringToUtf8").StringToUtf8(a))};c.skip=function(a){switch(a){case b("ThriftTypes").STOP:return;case b("ThriftTypes").BOOL:this.readBool();break;case b("ThriftTypes").BYTE:this.readByte();break;case b("ThriftTypes").DOUBLE:this.readDouble();break;case b("ThriftTypes").I16:this.readI16();break;case b("ThriftTypes").I32:this.readI32();break;case b("ThriftTypes").I64:this.readI64();break;case b("ThriftTypes").STRING:this.readString();break;case b("ThriftTypes").STRUCT:this.readStructBegin();var c;while(!0){c=this.readFieldBegin();if(c.ftype===b("ThriftTypes").STOP)break;this.skip(c.ftype)}this.readStructEnd();break;case b("ThriftTypes").MAP:c=this.readMapBegin();if(c.size>0&&c.ktype!=null&&c.vtype!=null){var d=c.ktype,e=c.vtype;for(var f=0;f<c.size;f++)this.skip(d),this.skip(e)}break;case b("ThriftTypes").SET:case b("ThriftTypes").LIST:f=this.$11();for(var d=0;d<f.size;d++)this.skip(f.etype);break;case b("ThriftTypes").FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};c.toByteArray=function(){return this.$1.toByteArray()};c.writeFieldStop=function(){return this.$1.writeByte(b("ThriftTypes").STOP)};c.writeI16=function(a){if(a<m||a>l)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};c.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<m||a>l)throw new Error("read invalid i16: "+a);return a};c.writeI32=function(a){if(a<o||a>n)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};c.readI32=function(){return this.zigzagToI32(this.readVarint32())};c.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};c.readI64=function(){return this.zigzagToI64(this.readVarint64())};c.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===g.CT_BOOLEAN_TRUE;return a};c.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?h.CT_BOOLEAN_TRUE:h.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?g.CT_BOOLEAN_TRUE:g.CT_BOOLEAN_FALSE);return b};c.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};c.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};c.i32ToZigzag=function(a){if(a<o||a>n)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};c.zigzagToI32=function(a){if(a<0||a>p)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};c.i64ToZigzag=function(a){if(b("jsbi").greaterThan(a,q)||b("jsbi").lessThan(a,r))throw new Error("i64 out of range: "+a.toString());return b("jsbi").bitwiseXor(b("jsbi").signedRightShift(a,t),b("jsbi").leftShift(a,u))};c.zigzagToI64=function(a){if(b("jsbi").lessThan(a,0)||b("jsbi").greaterThan(a,s))throw new Error("invalid uint64: "+a.toString());return b("jsbi").equal(b("jsbi").bitwiseAnd(a,u),u)?b("jsbi").bitwiseNot(b("jsbi").signedRightShift(a,u)):b("jsbi").signedRightShift(a,u)};c.writeVarint32=function(a){if(a<0||a>p)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};c.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};c.writeVarint64=function(a){if(b("jsbi").lessThan(a,v)||b("jsbi").greaterThan(a,s))throw new Error("invalid uint64: "+a.toString());a=a;var c=0;while(!0)if(b("jsbi").equal(b("jsbi").signedRightShift(a,w),v)){this.$1.writeByte(b("jsbi").toNumber(a));c++;break}else{var d,e=(d=b("jsbi")).toNumber(d.bitwiseOr(d.bitwiseAnd(a,y),z));this.$1.writeByte(e);c++;a=d.signedRightShift(a,w)}return c};c.readVarint64=function(){var a=v,c=v,d;while(!0){var e;d=(e=b("jsbi")).BigInt(this.$1.readByte());a=e.bitwiseOr(a,e.leftShift(e.bitwiseAnd(d,y),c));c=e.add(c,w);if(b("jsbi").equal(b("jsbi").bitwiseAnd(d,z),v)){if(b("jsbi").equal(c,x)&&b("jsbi").notEqual(d,u))throw new Error("result exceeded 64 bit limit");break}if(b("jsbi").greaterThan(c,t))throw new Error("result exceeded 64 bit limit")}return a};c.readString=function(){return b("Utf8ToString").Utf8ToString(this.readBinary())};c.getLastFieldId=function(){return this.$3};c.getLastField=function(){return this.$2};c.getBooleanFieldInfo=function(){return this.$4};c.getBooleanValue=function(){return this.$5};c.$9=function(a){return i[a]};c.$10=function(a){switch(a){case g.CT_STOP:return b("ThriftTypes").STOP;case g.CT_BOOLEAN_FALSE:case g.CT_BOOLEAN_TRUE:return b("ThriftTypes").BOOL;case g.CT_BYTE:return b("ThriftTypes").BYTE;case g.CT_I16:return b("ThriftTypes").I16;case g.CT_I32:return b("ThriftTypes").I32;case g.CT_I64:return b("ThriftTypes").I64;case g.CT_DOUBLE:return b("ThriftTypes").DOUBLE;case g.CT_FLOAT:return b("ThriftTypes").FLOAT;case g.CT_BINARY:return b("ThriftTypes").STRING;case g.CT_LIST:return b("ThriftTypes").LIST;case g.CT_SET:return b("ThriftTypes").SET;case g.CT_MAP:return b("ThriftTypes").MAP;case g.CT_STRUCT:return b("ThriftTypes").STRUCT;default:throw new Error("don't know what type")}};return a}();e.exports=c}),null);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();e.exports=a}),null);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();e.exports=a}),null);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f){"use strict";f.deserialize=g;f.deserializeNoThrow=a;f.serialize=h;f.serializeNoThrow=c;function g(a,c){a=new(b("TReadBuffer"))(a);a=new(b("TCompactProtocolPolyfill"))(a);return c(a)}function a(a,b,c){try{return g(a,b)}catch(a){c!=null&&c(a)}return null}function h(a,c,d){d===void 0&&(d=!1);if(d){d=new(b("TNoOpWriteBuffer"))();var e=new(b("TCompactProtocolPolyfill"))(d);c(a,e);e=new(b("TWriteBuffer"))(d.currentSize())}else e=new(b("TWriteBuffer"))();d=new(b("TCompactProtocolPolyfill"))(e);c(a,d);return d.toByteArray()}function c(a,b,c,d){c===void 0&&(c=!1);try{return h(a,b,c)}catch(a){d!=null&&d(a)}return null}}),null);
__d("DGWRequestStreamUtils",["Base64"],(function(a,b,c,d,e,f){"use strict";f.convertHeaders=a;f.getAuxIdFromPayload=c;function a(a,c,d,e){var f={};a=Object.entries(a);for(var g=0;g<a.length;g++){var h=a[g],i=h[0];h=h[1];typeof h=="string"?f["XRSS-"+i]=h:typeof h=="number"?f["XRSN-"+i]=h.toString():typeof h=="boolean"?f["XRSB-"+i]=h.toString():typeof h=="object"&&h!=null&&(f["XRSO-"+i]=b("Base64").encode(JSON.stringify(h)))}c&&(f["xrs-body"]="true");d!=null&&d.length>0&&(f["xrs-instrumentation"]=b("Base64").encode(d));f["XRS-Accept-Ack"]="RSAck";e!=null&&e.ackTimeoutSec!=null&&(f["XRS-SRAck-Timeout"]=e.ackTimeoutSec.toString());return f}function c(a){if(a.response&&a.response.instrumentation_data!=null&&a.response.instrumentation_data.length>0)try{a=JSON.parse(new TextDecoder("utf-8").decode(a.response.instrumentation_data));return a.auxId}catch(a){}return null}}),null);
__d("DGWStreamGroupHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(a){};b.onStreamGroupMustDrain=function(a){};b.onStreamGroupTransportClose=function(){};return a}();e.exports=a}),null);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","DGWStreamGroupType","FBLogger"],(function(a,b,c,d,e,f){"use strict";var g="realtime";a=function(){function a(){}var c=a.prototype;c.establishStream=function(a,c,d,e){e===void 0&&(e=b("DGWStreamGroupType").DGWStreamGroupType.NONE);switch(e){case b("DGWStreamGroupType").DGWStreamGroupType.SINGLE:b("FBLogger")("DGWStreamFactory").warn("stream group being used for "+((e=a.method)!=null?e:"unknown"));return b("DGWClient")().createStreamGroup(new(b("DGWStreamGroupHandler"))(),{loggingId:d.loggingId,serviceId:g,streamGroupAppHeaders:{}}).establishStream({loggingId:d.loggingId,groupedStreamHeaders:a},c);default:return b("DGWClient")().establishDGWStream(a,g,c,d)}};return a}();e.exports=a}),null);
__d("DGWStreamFactorySingleton",["DGWStreamFactory"],(function(a,b,c,d,e,f){"use strict";a=new(b("DGWStreamFactory"))();e.exports=a}),null);
__d("DGWStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d){this.$2=a,this.$3=b,this.$4=c,this.$5=d,this.$1=!0}var b=a.prototype;b.onClose=function(a){if(!this.$1)return;this.$2(a)};b.onDataReceived=function(a){if(!this.$1)return;this.$3(a)};b.onError=function(a){if(!this.$1)return;this.$4(a)};b.onStreamMustDrain=function(a,b){if(!this.$1)return;this.$5(a,b)};b.onServerHasFinishedSendingData=function(a){};b.stop=function(){this.$1=!1};b.isStopped=function(){return!this.$1};return a}();e.exports=a}),null);
__d("InflightAmends",["Deferred","err"],(function(a,b,c,d,e,f){"use strict";var g="inflight_amends_timeout",h="inflight_amends_duplicate_id";a=function(){function a(a,b,c){this.$1=a,this.$3=b,this.$4=c,this.$2=new Map()}var c=a.prototype;c.add=function(a){var c=this;if(this.$2.has(a))throw b("err")(h);var d=new(b("Deferred"))(),e=Date.now(),f=setTimeout(function(){c.$2.has(a)&&c.reject(a,b("err")(g))},this.$1);this.$2.set(a,{id:a,deferred:d,createdTimestampMs:e,timeoutId:f});return d.getPromise()};c.getPromise=function(a){return(a=this.$5(a))==null?void 0:a.deferred.getPromise()};c.resolve=function(a,b){a=this.$5(a);a&&(a.deferred.resolve==null?void 0:a.deferred.resolve(b),this.$3(a.id,Date.now()-a.createdTimestampMs),this.$6(a))};c.reject=function(a,b){a=this.$5(a);a&&(a.deferred.reject==null?void 0:a.deferred.reject(b),this.$4(a.id,b),this.$6(a))};c.$6=function(a){clearTimeout(a.timeoutId),this.$2["delete"](a.id)};c.$5=function(a){return this.$2.get(a)};return a}();e.exports=a}),null);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f){"use strict";a=function(){return{}};c=function(){return{bytes:Uint8Array.of()}};d=function(){return{message:""}};f=function(){return{reason:b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}};var g=function(){return{}},h=function(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}},i=function(){return{caller_timestamp_ms:"0"}},j=function(){return{original_ping_timestamp_ms:"0"}},k=function(){return{}},l=function(a,c){c.writeStructBegin("ResponseRewriteRequest"),a.new_headers!=null&&(c.writeFieldBegin({fname:"new_headers",ftype:b("ThriftTypes").STRING,fid:1}),c.writeString(a.new_headers)),a.new_body!=null&&(c.writeFieldBegin({fname:"new_body",ftype:b("ThriftTypes").STRING,fid:2}),c.writeBinary(a.new_body)),a.patch_headers!=null&&(c.writeFieldBegin({fname:"patch_headers",ftype:b("ThriftTypes").STRING,fid:3}),c.writeString(a.patch_headers)),a.kill_body!=null&&(c.writeFieldBegin({fname:"kill_body",ftype:b("ThriftTypes").BOOL,fid:4}),c.writeBool(a.kill_body)),a.temporary!=null&&(c.writeFieldBegin({fname:"temporary",ftype:b("ThriftTypes").BOOL,fid:5}),c.writeBool(a.temporary)),c.writeFieldStop(),c.writeStructEnd()},m=function(a,c){c.writeStructBegin("ResponseData");c.writeFieldBegin({fname:"bytes",ftype:b("ThriftTypes").STRING,fid:1});if(a.bytes!=null)c.writeBinary(a.bytes);else{var d=Uint8Array.of();c.writeBinary(d)}a.metadata!=null&&(c.writeFieldBegin({fname:"metadata",ftype:b("ThriftTypes").STRING,fid:2}),c.writeString(a.metadata));c.writeFieldStop();c.writeStructEnd()},n=function(a,c){c.writeStructBegin("LogMessage");c.writeFieldBegin({fname:"message",ftype:b("ThriftTypes").STRING,fid:1});if(a.message!=null)c.writeString(a.message);else{a="";c.writeString(a)}c.writeFieldStop();c.writeStructEnd()},o=function(a,c){c.writeStructBegin("Termination");c.writeFieldBegin({fname:"reason",ftype:b("ThriftTypes").I32,fid:1});if(a.reason!=null){var d;c.writeI32((d=a.reason)!=null?d:0)}else{d=b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);c.writeI32((d=d)!=null?d:0)}a.message!=null&&(c.writeFieldBegin({fname:"message",ftype:b("ThriftTypes").STRING,fid:2}),c.writeString(a.message));a.retry_delay_ms!=null&&(c.writeFieldBegin({fname:"retry_delay_ms",ftype:b("ThriftTypes").I64,fid:3}),c.writeI64(b("jsbi").BigInt(a.retry_delay_ms)));c.writeFieldStop();c.writeStructEnd()},p=function(a,c){c.writeStructBegin("AmendStreamAck"),a.amendment_id!=null&&(c.writeFieldBegin({fname:"amendment_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.amendment_id))),a.accepted!=null&&(c.writeFieldBegin({fname:"accepted",ftype:b("ThriftTypes").BOOL,fid:2}),c.writeBool(a.accepted)),a.result!=null&&(c.writeFieldBegin({fname:"result",ftype:b("ThriftTypes").STRING,fid:3}),c.writeBinary(a.result)),c.writeFieldStop(),c.writeStructEnd()},q=function(a,c){c.writeStructBegin("StreamCheck");c.writeFieldBegin({fname:"stream_id",ftype:b("ThriftTypes").I64,fid:1});if(a.stream_id!=null)c.writeI64(b("jsbi").BigInt(a.stream_id));else{var d="0";c.writeI64(b("jsbi").BigInt(d))}c.writeFieldBegin({fname:"last_sequencer",ftype:b("ThriftTypes").I32,fid:2});if(a.last_sequencer!=null)c.writeI32(a.last_sequencer);else{d=0;c.writeI32(d)}c.writeFieldBegin({fname:"amendment_count",ftype:b("ThriftTypes").I32,fid:4});if(a.amendment_count!=null)c.writeI32(a.amendment_count);else{d=0;c.writeI32(d)}c.writeFieldBegin({fname:"last_status",ftype:b("ThriftTypes").I32,fid:3});if(a.last_status!=null){c.writeI32((d=a.last_status)!=null?d:0)}else{a=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);c.writeI32((d=a)!=null?d:0)}c.writeFieldStop();c.writeStructEnd()},r=function(a,c){c.writeStructBegin("Ping");c.writeFieldBegin({fname:"caller_timestamp_ms",ftype:b("ThriftTypes").I64,fid:1});if(a.caller_timestamp_ms!=null)c.writeI64(b("jsbi").BigInt(a.caller_timestamp_ms));else{var d="0";c.writeI64(b("jsbi").BigInt(d))}if(a.streams_to_check!=null){c.writeFieldBegin({fname:"streams_to_check",ftype:b("ThriftTypes").LIST,fid:2});c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:a.streams_to_check.length});for(var d=a.streams_to_check,a=Array.isArray(d),e=0,d=a?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(a){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;q(f,c)}}c.writeFieldStop();c.writeStructEnd()},s=function(a,c){c.writeStructBegin("Pong");c.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:b("ThriftTypes").I64,fid:1});if(a.original_ping_timestamp_ms!=null)c.writeI64(b("jsbi").BigInt(a.original_ping_timestamp_ms));else{var d="0";c.writeI64(b("jsbi").BigInt(d))}if(a.stream_ids_missing!=null){c.writeFieldBegin({fname:"stream_ids_missing",ftype:b("ThriftTypes").LIST,fid:2});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_missing.length});for(var d=a.stream_ids_missing,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.writeI64(b("jsbi").BigInt(g))}}if(a.stream_ids_behind!=null){c.writeFieldBegin({fname:"stream_ids_behind",ftype:b("ThriftTypes").LIST,fid:3});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_behind.length});for(var g=a.stream_ids_behind,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}d=d;c.writeI64(b("jsbi").BigInt(d))}}if(a.stream_ids_with_lost_amendments!=null){c.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:b("ThriftTypes").LIST,fid:4});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_with_lost_amendments.length});for(var d=a.stream_ids_with_lost_amendments,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.writeI64(b("jsbi").BigInt(g))}}if(a.stream_ids_with_wrong_status!=null){c.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:b("ThriftTypes").LIST,fid:5});c.writeListBegin({etype:b("ThriftTypes").I64,size:a.stream_ids_with_wrong_status.length});for(var g=a.stream_ids_with_wrong_status,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}a=d;c.writeI64(b("jsbi").BigInt(a))}}c.writeFieldStop();c.writeStructEnd()},t=function(a,c){c.writeStructBegin("StreamResponseDelta");if(a.flow_status!=null){var d;c.writeFieldBegin({fname:"flow_status",ftype:b("ThriftTypes").I32,fid:1});c.writeI32((d=a.flow_status)!=null?d:0);c.writeFieldStop();c.writeStructEnd();return}if(a.log!=null){c.writeFieldBegin({fname:"log",ftype:b("ThriftTypes").STRUCT,fid:2});n(a.log,c);c.writeFieldStop();c.writeStructEnd();return}if(a.rewrite!=null){c.writeFieldBegin({fname:"rewrite",ftype:b("ThriftTypes").STRUCT,fid:3});l(a.rewrite,c);c.writeFieldStop();c.writeStructEnd();return}if(a.data!=null){c.writeFieldBegin({fname:"data",ftype:b("ThriftTypes").STRUCT,fid:4});m(a.data,c);c.writeFieldStop();c.writeStructEnd();return}if(a.termination!=null){c.writeFieldBegin({fname:"termination",ftype:b("ThriftTypes").STRUCT,fid:5});o(a.termination,c);c.writeFieldStop();c.writeStructEnd();return}if(a.amend_ack!=null){c.writeFieldBegin({fname:"amend_ack",ftype:b("ThriftTypes").STRUCT,fid:6});p(a.amend_ack,c);c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()},u=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.new_headers=a.readString():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.new_body=a.readBinary():a.skip(e);break;case 3:e===b("ThriftTypes").STRING?c.patch_headers=a.readString():a.skip(e);break;case 4:e===b("ThriftTypes").BOOL?c.kill_body=a.readBool():a.skip(e);break;case 5:e===b("ThriftTypes").BOOL?c.temporary=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c},v=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.bytes=a.readBinary():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.metadata=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.bytes===void 0&&(c.bytes=Uint8Array.of());return c},w=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.message===void 0&&(c.message="");return c},x=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I32?c.reason=b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(a.readI32()):a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.message=a.readString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.retry_delay_ms=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.reason===void 0&&(c.reason=b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0));return c},y=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").BOOL?c.accepted=a.readBool():a.skip(e);break;case 3:e===b("ThriftTypes").STRING?c.result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c},z=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.stream_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.last_sequencer=a.readI32():a.skip(e);break;case 4:e===b("ThriftTypes").I32?c.amendment_count=a.readI32():a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.last_status=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.stream_id===void 0&&(c.stream_id="0");c.last_sequencer===void 0&&(c.last_sequencer=0);c.amendment_count===void 0&&(c.amendment_count=0);c.last_status===void 0&&(c.last_status=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0));return c},A=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.caller_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===b("ThriftTypes").LIST){c.streams_to_check=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=z(a);c.streams_to_check.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.caller_timestamp_ms===void 0&&(c.caller_timestamp_ms="0");return c},B=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.original_ping_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===b("ThriftTypes").LIST){c.stream_ids_missing=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();c.stream_ids_missing.push(g)}}else a.skip(e);break;case 3:if(e===b("ThriftTypes").LIST){c.stream_ids_behind=[];g=a.readListBegin();for(var f=0;f<g.size;f++){d=a.readI64().toString();c.stream_ids_behind.push(d)}}else a.skip(e);break;case 4:if(e===b("ThriftTypes").LIST){c.stream_ids_with_lost_amendments=[];d=a.readListBegin();for(var f=0;f<d.size;f++){g=a.readI64().toString();c.stream_ids_with_lost_amendments.push(g)}}else a.skip(e);break;case 5:if(e===b("ThriftTypes").LIST){c.stream_ids_with_wrong_status=[];g=a.readListBegin();for(var f=0;f<g.size;f++){d=a.readI64().toString();c.stream_ids_with_wrong_status.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.original_ping_timestamp_ms===void 0&&(c.original_ping_timestamp_ms="0");return c},C=function(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").I32)if(c==null)d.flow_status=b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()),c="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+c);else a.skip(f);break;case 2:if(f===b("ThriftTypes").STRUCT)if(c==null)d.log=w(a),c="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+c);else a.skip(f);break;case 3:if(f===b("ThriftTypes").STRUCT)if(c==null)d.rewrite=u(a),c="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+c);else a.skip(f);break;case 4:if(f===b("ThriftTypes").STRUCT)if(c==null)d.data=v(a),c="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+c);else a.skip(f);break;case 5:if(f===b("ThriftTypes").STRUCT)if(c==null)d.termination=x(a),c="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+c);else a.skip(f);break;case 6:if(f===b("ThriftTypes").STRUCT)if(c==null)d.amend_ack=y(a),c="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d};e.exports={AmendStreamAck$DefaultConstructor:g,LogMessage$DefaultConstructor:d,Ping$DefaultConstructor:i,Pong$DefaultConstructor:j,ResponseData$DefaultConstructor:c,ResponseRewriteRequest$DefaultConstructor:a,StreamCheck$DefaultConstructor:h,StreamResponseDelta$DefaultConstructor:k,Termination$DefaultConstructor:f,deserializeAmendStreamAck:y,deserializeLogMessage:w,deserializePing:A,deserializePong:B,deserializeResponseData:v,deserializeResponseRewriteRequest:u,deserializeStreamCheck:z,deserializeStreamResponseDelta:C,deserializeTermination:x,serializeAmendStreamAck:p,serializeLogMessage:n,serializePing:r,serializePong:s,serializeResponseData:m,serializeResponseRewriteRequest:l,serializeStreamCheck:q,serializeStreamResponseDelta:t,serializeTermination:o}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500});c=b("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});e.exports={Ack:a,Payload$Types:c}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f){"use strict";a=function(){return{}};c=function(){return{body:Uint8Array.of()}};d=function(){return{amendment:Uint8Array.of()}};f=function(){return{ack:b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}};var g=function(){return{delta:[]}},h=function(){return{}},i=function(a,c){c.writeStructBegin("RequestStreamHeaders"),a.headers!=null&&(c.writeFieldBegin({fname:"headers",ftype:b("ThriftTypes").STRING,fid:1}),c.writeBinary(a.headers)),a.instrumentation_data!=null&&(c.writeFieldBegin({fname:"instrumentation_data",ftype:b("ThriftTypes").STRING,fid:2}),c.writeBinary(a.instrumentation_data)),c.writeFieldStop(),c.writeStructEnd()},j=function(a,c){c.writeStructBegin("RequestStreamBody");c.writeFieldBegin({fname:"body",ftype:b("ThriftTypes").STRING,fid:1});if(a.body!=null)c.writeBinary(a.body);else{a=Uint8Array.of();c.writeBinary(a)}c.writeFieldStop();c.writeStructEnd()},k=function(a,c){c.writeStructBegin("AmendStream");a.amendment_id!=null&&(c.writeFieldBegin({fname:"amendment_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.amendment_id)));c.writeFieldBegin({fname:"amendment",ftype:b("ThriftTypes").STRING,fid:2});if(a.amendment!=null)c.writeBinary(a.amendment);else{var d=Uint8Array.of();c.writeBinary(d)}a.is_query!=null&&(c.writeFieldBegin({fname:"is_query",ftype:b("ThriftTypes").BOOL,fid:3}),c.writeBool(a.is_query));a.instrumentation_data!=null&&(c.writeFieldBegin({fname:"instrumentation_data",ftype:b("ThriftTypes").STRING,fid:4}),c.writeBinary(a.instrumentation_data));c.writeFieldStop();c.writeStructEnd()},l=function(a,c){c.writeStructBegin("StreamResponseAck");a.response_id!=null&&(c.writeFieldBegin({fname:"response_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.response_id)));c.writeFieldBegin({fname:"ack",ftype:b("ThriftTypes").I32,fid:2});if(a.ack!=null){var d;c.writeI32((d=a.ack)!=null?d:0)}else{d=b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);c.writeI32((d=d)!=null?d:0)}a.query_result!=null&&(c.writeFieldBegin({fname:"query_result",ftype:b("ThriftTypes").STRING,fid:3}),c.writeBinary(a.query_result));c.writeFieldStop();c.writeStructEnd()},m=function(a,c){c.writeStructBegin("StreamResponse");a.response_id!=null&&(c.writeFieldBegin({fname:"response_id",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(b("jsbi").BigInt(a.response_id)));c.writeFieldBegin({fname:"delta",ftype:b("ThriftTypes").LIST,fid:2});if(a.delta!=null){c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:a.delta.length});for(var d=a.delta,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(g,c)}}else{g=[];c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:g.length});for(var f=0;f<g.length;f++){e=g[f];b("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,c)}}if(a.ack_level!=null){c.writeFieldBegin({fname:"ack_level",ftype:b("ThriftTypes").I32,fid:3});c.writeI32((d=a.ack_level)!=null?d:0)}a.query_request!=null&&(c.writeFieldBegin({fname:"query_request",ftype:b("ThriftTypes").STRING,fid:4}),c.writeBinary(a.query_request));a.instrumentation_data!=null&&(c.writeFieldBegin({fname:"instrumentation_data",ftype:b("ThriftTypes").STRING,fid:5}),c.writeBinary(a.instrumentation_data));c.writeFieldStop();c.writeStructEnd()},n=function(a,c){c.writeStructBegin("Payload");if(a.request_headers!=null){c.writeFieldBegin({fname:"request_headers",ftype:b("ThriftTypes").STRUCT,fid:1});i(a.request_headers,c);c.writeFieldStop();c.writeStructEnd();return}if(a.request_body!=null){c.writeFieldBegin({fname:"request_body",ftype:b("ThriftTypes").STRUCT,fid:2});j(a.request_body,c);c.writeFieldStop();c.writeStructEnd();return}if(a.amend!=null){c.writeFieldBegin({fname:"amend",ftype:b("ThriftTypes").STRUCT,fid:3});k(a.amend,c);c.writeFieldStop();c.writeStructEnd();return}if(a.ack!=null){c.writeFieldBegin({fname:"ack",ftype:b("ThriftTypes").STRUCT,fid:4});l(a.ack,c);c.writeFieldStop();c.writeStructEnd();return}if(a.response!=null){c.writeFieldBegin({fname:"response",ftype:b("ThriftTypes").STRUCT,fid:5});m(a.response,c);c.writeFieldStop();c.writeStructEnd();return}if(a.ping!=null){c.writeFieldBegin({fname:"ping",ftype:b("ThriftTypes").STRUCT,fid:6});b("RequestStreamCommonRequestStreamCommonSerializers").serializePing(a.ping,c);c.writeFieldStop();c.writeStructEnd();return}if(a.pong!=null){c.writeFieldBegin({fname:"pong",ftype:b("ThriftTypes").STRUCT,fid:7});b("RequestStreamCommonRequestStreamCommonSerializers").serializePong(a.pong,c);c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()},o=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.headers=a.readBinary():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c},p=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.body=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.body===void 0&&(c.body=Uint8Array.of());return c},q=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.amendment=a.readBinary():a.skip(e);break;case 3:e===b("ThriftTypes").BOOL?c.is_query=a.readBool():a.skip(e);break;case 4:e===b("ThriftTypes").STRING?c.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.amendment===void 0&&(c.amendment=Uint8Array.of());return c},r=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.response_id=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.ack=b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(a.readI32()):a.skip(e);break;case 3:e===b("ThriftTypes").STRING?c.query_result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.ack===void 0&&(c.ack=b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0));return c},s=function(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.response_id=a.readI64().toString():a.skip(e);break;case 2:if(e===b("ThriftTypes").LIST){c.delta=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=b("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(a);c.delta.push(g)}}else a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.ack_level=b("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(a.readI32()):a.skip(e);break;case 4:e===b("ThriftTypes").STRING?c.query_request=a.readBinary():a.skip(e);break;case 5:e===b("ThriftTypes").STRING?c.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.delta===void 0&&(c.delta=[]);return c},t=function(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").STRUCT)if(c==null)d.request_headers=o(a),c="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+c);else a.skip(f);break;case 2:if(f===b("ThriftTypes").STRUCT)if(c==null)d.request_body=p(a),c="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+c);else a.skip(f);break;case 3:if(f===b("ThriftTypes").STRUCT)if(c==null)d.amend=q(a),c="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+c);else a.skip(f);break;case 4:if(f===b("ThriftTypes").STRUCT)if(c==null)d.ack=r(a),c="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+c);else a.skip(f);break;case 5:if(f===b("ThriftTypes").STRUCT)if(c==null)d.response=s(a),c="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+c);else a.skip(f);break;case 6:if(f===b("ThriftTypes").STRUCT)if(c==null)d.ping=b("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(a),c="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+c);else a.skip(f);break;case 7:if(f===b("ThriftTypes").STRUCT)if(c==null)d.pong=b("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(a),c="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d};e.exports={AmendStream$DefaultConstructor:d,Payload$DefaultConstructor:h,RequestStreamBody$DefaultConstructor:c,RequestStreamHeaders$DefaultConstructor:a,StreamResponse$DefaultConstructor:g,StreamResponseAck$DefaultConstructor:f,deserializeAmendStream:q,deserializePayload:t,deserializeRequestStreamBody:p,deserializeRequestStreamHeaders:o,deserializeStreamResponse:s,deserializeStreamResponseAck:r,serializeAmendStream:k,serializePayload:n,serializeRequestStreamBody:j,serializeRequestStreamHeaders:i,serializeStreamResponse:m,serializeStreamResponseAck:l}}),null);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(a,b,c,d,e,f){"use strict";f.getNextState=a;function a(a,c){switch(c){case b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:return a.seenAccepted?a:{flowStatus:b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:if(!a.seenAccepted||a.flowStatus===c)return a;else return{flowStatus:c,seenAccepted:!0}}}}),null);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamFactorySingleton","DGWStreamHandler","FBLogger","InflightAmends","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","err","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=4,h=0,i=5e3,j="requeststream-web",k="dgw_stream_send_ack_failure";function l(a){if(!a){a=b("err")(k);a.stack;throw a}}function m(a,b){if(a==null||a.length===0)return null;a=JSON.parse(a);a.auxId=b;return new TextEncoder().encode(JSON.stringify(a))}a=function(){function a(a,c,d,e,f){var h=this;this.$7={};this.$10=!1;this.$15=0;this.$16=0;this.$1=a;this.$2=c;this.$3=d;this.$4=e;this.$5=f;this.$12=g;this.$9=!1;this.$14=!1;this.$6=b("RequestStreamE2ELogger").createStreamLogger(a,this.$5,b("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE);this.$6&&this.$1.method!=="Falco"&&(this.$7.loggingId=this.$6.getRequestId());e&&e.overrideUrl!=null&&(this.$7.overrideUrl=e.overrideUrl);this.$8={flowStatus:b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1};this.$17=new(b("InflightAmends"))(i,function(a,c){var d;(d=h.$6)==null?void 0:d.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{latency:c.toString()},a)},function(a,c){if(c.message!==k){var d;(d=h.$6)==null?void 0:d.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:c.message},a)}});(d=this.$6)==null?void 0:d.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(a=c==null?void 0:(f=c.length)==null?void 0:f.toString())!=null?a:"0"},"0")}var c=a.prototype;c.amendWithAck=function(a){a=this.$18(a,!0);return a===null||a===void 0?b("Promise").resolve(!1):this.$17.getPromise(a)||b("Promise").resolve(!1)};c.amendWithoutAck=function(a){this.$18(a,!1)};c.cancel=function(){var a;(a=this.$6)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").CANCEL,b("RequestStreamE2EClientLoggerEvent").RECEIVED);this.$9=!0;this.$19(b("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)};c.start=function(a){var c=this;a===void 0&&(a=!1);var d=String(this.$15++),e=Date.now();return this.$20(d).then(function(){var a;c.$14=!1;var f=(Date.now()-e).toString();(a=c.$6)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:f},d)})["catch"](function(e){var f;e.stack;if(e.message===k&&c.$10)return;b("FBLogger")(j).catching(e).warn("failed to start dgw stream");(f=c.$6)==null?void 0:f.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},d);c.$14=!1;c.$19(a?b("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:b("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,e.message,!0);throw e})};c.getFlowStatus=function(){return this.$8.flowStatus};c.shouldTerminateOrRetry=function(a,c,d,e){var f=this;if(this.$14)return;var g=c;this.$12||(g="cannot retry for error: "+c+" because of hit max retry limitation");c=d&&this.$12;this.$19(a,g,!c);if(c){var i=(d=e)!=null?d:h;this.$14=!0;if(i>0)return new(b("Promise"))(function(a){return setTimeout(a,i)}).then(function(){return f.$21()});else return this.$21()}};c.$22=function(){return this.$11!=null};c.$18=function(a,c){var d,e=this,f=new TextEncoder().encode(a),g=String(this.$16++);(d=this.$6)==null?void 0:d.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(a=a==null?void 0:(d=a.length)==null?void 0:d.toString())!=null?a:"0"},g);d=m(this.$5,g);a={amend:{amendment:f,instrumentation_data:d}};c&&a.amend&&(a.amend.amendment_id=g);f=b("CompactSerializerPolyfill").serialize(a,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var h=Date.now();if(this.$23()&&this.$11!=null){c&&this.$17.add(g);this.$11.send(f).then(function(a){var c;l(a);a=(Date.now()-h).toString();(c=e.$6)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:a},g)})["catch"](function(a){var c;(c=e.$6)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:a.message},g);e.$17.reject(g,a)});(d=this.$6)==null?void 0:d.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").SENT,{},g);return g}else{(a=this.$6)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").AMENDMENT,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},g);b("FBLogger")(j).warn("amendWithoutAck when stream has not started")}};c.$20=function(a){var c,d,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:if(this.$9){j.next=24;break}j.prev=1;e=this.$24();this.$13=e;f=b("DGWRequestStreamUtils").convertHeaders(this.$1,this.$2!=null,this.$5);j.next=7;return b("regeneratorRuntime").awrap(b("DGWStreamFactorySingleton").establishStream(f,e,this.$7,(d=this.$4)==null?void 0:d.streamGroupType));case 7:this.$11=j.sent;j.next=13;break;case 10:j.prev=10;j.t0=j["catch"](1);throw j.t0;case 13:if(!this.$9){j.next=15;break}throw new Error("stream_already_canceled");case 15:g=new Uint8Array([]);this.$2!=null&&(h={request_body:{body:new TextEncoder().encode(this.$2)}},g=b("CompactSerializerPolyfill").serialize(h,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload));if(this.$11){j.next=19;break}throw new Error("dgwstream_is_null");case 19:i=this.$11.send(g).then(l);(c=this.$6)==null?void 0:c.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,b("RequestStreamE2EClientLoggerEvent").SENT,{},a);return j.abrupt("return",i);case 24:throw new Error("stream_already_canceled");case 25:case"end":return j.stop()}},null,this,[[1,10]])};c.$23=function(){return this.$8.flowStatus===b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted};c.$19=function(a,c,d){var e;this.$11&&a!==b("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&a!==b("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close();(e=this.$13)==null?void 0:e.stop();this.$11=null;this.$10=!0;this.$25(b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);d&&!this.$9&&this.$3.onTermination("terminate stream because "+a+" with msg : "+c)};c.$25=function(a){var c=this.$8;this.$8=b("RequestStreamState").getNextState(c,a);return c!==this.$8};c.$21=function(){this.$12--;return this.start(!0)["catch"](function(a){b("FBLogger")(j).catching(a).warn("failed to restart dgw stream: "+a.message)})};c.$26=function(a){var c=this;a=b("CompactSerializerPolyfill").deserialize(a,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(a.response){var d=b("DGWRequestStreamUtils").getAuxIdFromPayload(a);if(!this.$22()){var e;b("FBLogger")("requeststream-web").warn("get data after stream is closed");(e=this.$6)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},d);return}(e=this.$6)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").RECEIVED,{},d);e=a.response.delta;e.forEach(function(a){if(a.data)c.$8.flowStatus!==b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?b("FBLogger")("requeststream-web").warn("get data when status is not started"):c.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes));else if(a.flow_status){var d=a.flow_status;c.$25(d)&&c.$3.onFlowStatus(d)}else if(a.termination){d=(d=a.termination.message)!=null?d:"unknown termination msg";c.shouldTerminateOrRetry(b("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,d,a.termination.reason===b("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,a.termination.retry_delay_ms!=null?parseInt(a.termination.retry_delay_ms,10):null)}else if(a.log)c.$3.onLog(a.log.message);else if(a.amend_ack){d=a.amend_ack.amendment_id;if(d!=null){a.amend_ack.accepted==null&&b("FBLogger")(j).warn("missing accepted in amend_ack delta");var e=a.amend_ack.accepted||!1;c.$17.resolve(d,e)}else b("FBLogger")(j).warn("missing amendment_id in amend_ack delta")}else b("FBLogger")(j).warn("not support other delta type now: "+Object.keys(a).join(","))});(e=this.$6)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").SENT,{},d);a.response.ack_level===b("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&a.response.response_id!=null&&this.$27(a.response.response_id,d)}else{b("FBLogger")(j).warn("Unexpected Payload type");(e=this.$6)==null?void 0:e.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"})}};c.$27=function(a,c){a={ack:{response_id:a,ack:b("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}};a=b("CompactSerializerPolyfill").serialize(a,b("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){this.$11.send(a);(a=this.$6)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,b("RequestStreamE2EClientLoggerEvent").SENT,{},c)}else{(a=this.$6)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},c)}};c.$24=function(){return new(b("DGWStreamHandler"))(this.$28.bind(this),this.$29.bind(this),this.$30.bind(this),this.$31.bind(this))};c.$28=function(a){this.$19(b("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)};c.$29=function(a){try{this.$26(a)}catch(c){(a=this.$6)==null?void 0:a.logE2EEvent(b("RequestStreamE2EClientLoggerMessageType").RESPONSE,b("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:c.message});this.shouldTerminateOrRetry(b("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,c.message,!1)}};c.$30=function(a){var c="",d=!1;switch(a){case b("DGWStream").StreamError.GOING_AWAY:d=!0;c="StreamError: GOING_AWAY";break;case b("DGWStream").StreamError.ABNORMAL_CLOSURE:d=!0;c="StreamError: ABNORMAL_CLOSURE";break;case b("DGWStream").StreamError.SERVER_INTERNAL_ERROR:c="StreamError: Received SERVER_INTERNAL_ERROR";break;default:c="StreamError: unknown error"}this.shouldTerminateOrRetry(b("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,c,d)};c.$31=function(a,c){this.shouldTerminateOrRetry(b("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,c,!0)};return a}();e.exports=a}),null);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","Promise","RequestStreamE2ESampling"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.createStream=function(a,c,d,e,f){return b("Promise").resolve(new(b("DGWRequestStreamRef"))(a,c,e,f,b("RequestStreamE2ESampling").validateInstrumentationData(a,d)))};return a}();e.exports=a}),null);
__d("ContextualConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a=1e3;f.ANALYTICS_SAMPLE_RATE=a;b=", ";f.BUCKET_DELIMITER=b;c={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"};f.CONTEXT_BUCKET_STRATEGY=c;d={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"};f.CONFIG_TYPE=d;e=[];f.EMPTY_RESOLVED_CONTEXTS=e;a=[];f.EMPTY_RESOLVED_MONITORS=a;b=[];f.EMPTY_RESULT_PARAMS=b;c={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"};f.ERROR=c;d=10;f.JSON_SUB_SAMPLE_RATE=d;e=", ";f.LIST_DELIMITER=e;a={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};f.TYPE=a}),null);
__d("ContextualConfigResolvedContextsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.bucketIndex;if(e==void 0)break;b.push(e)}return b};f.getBucketIndices=a;b=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.bucketName;if(e===void 0)break;b.push(e)}return b};f.getBucketNames=b;var g=function(a){return a.name};c=function(a){return a.map(g)};f.getContextNames=c;d=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.value;if(e===void 0)break;b.push(e)}return b};f.getContextValues=d}),null);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=["cfg_ver_timestamp","policy_id","version","sample_rate"],h=function(a){return a.join(b("ContextualConfigConstants").LIST_DELIMITER)},i=function(a,b){for(var c=0;c<g.length;c++){var d=g[c];b[d]!=null&&(a[d]=b[d])}b.name&&(a.config_name=b.name)},j=function(a,c){var d=c[0],e=c[1],f=c[2];c=c[3];d!=null&&(a.exception=d.message);a.result=h(e.map(function(a){return a.value}))||"INVALID";a.context=h(b("ContextualConfigResolvedContextsUtils").getContextNames(f));a.context_value=h(b("ContextualConfigResolvedContextsUtils").getContextValues(f));a.bucket_name=h(b("ContextualConfigResolvedContextsUtils").getBucketNames(f));a.monitor=h(b("ContextualConfigResolvedContextsUtils").getContextNames(c));a.monitor_value=h(b("ContextualConfigResolvedContextsUtils").getContextValues(c))};function a(a,c,d){var e={sample_rate:b("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};i(e,a);j(e,c);d&&(e.config_contents=JSON.stringify(a));return e}}),null);
__d("ContextualConfigExposureEvent",["Random"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){this.$2=a,this.$4=b("Random").random()<1/a.sample_rate,this.$3=c,this.$1=d}var c=a.prototype;c.getData=function(){return this.$2};c.log=function(a){var b=this.$2,c=this.$3,d=this.$4;a&&c(b);d&&this.$1(b);return this};c.isSampled=function(){return this.$4};return a}();e.exports=a}),null);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=function(){function a(a,b){this.$2=a,this.$1=b}var c=a.prototype;c.createEvent=function(a){var c=this.$1,d=this.$2;a=new(b("ContextualConfigExposureEvent"))(a,d,c);return a};return a}();function a(a,b){return new g(a,b)}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(a,b,c,d,e,f){"use strict";a=function(a){};c=function(a){b("MarauderLogger").log("contextual_config_exposure","",a)};d=b("ContextualConfigExposureLoggerFactory")(a,c);e.exports=d}),null);
__d("ContextualConfigAssert",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){if(a===!1)throw new Error(b)}}),null);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";a=function(a){return Array.isArray(a)};f.isArray=a;c=function(a){return typeof a==="boolean"};f.isBoolean=c;d=function(a){return a!=null};f.isDefined=d;e=function(a){return function(b){return Object.prototype.hasOwnProperty.call(a,b)}};f.isKey=e;a=function(a){return g(a)&&a%1===0};f.isInteger=a;c=function(a){return h(a)&&a.length>0};f.isNonEmptyString=c;var g=function(a){return typeof a==="number"&&!isNaN(a)&&a!==Infinity&&a!==-Infinity};f.isNumber=g;var h=function(a){return typeof a==="string"};f.isString=h;d=function(a){switch(a){case b("ContextualConfigConstants").TYPE.BOOL:case b("ContextualConfigConstants").TYPE.FLOAT:case b("ContextualConfigConstants").TYPE.INT:case b("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};f.isType=d}),null);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){switch(a.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(b("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}}),null);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){var d;switch(c){case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var e=b("ContextualConfigParseBoolean")(a);d=function(a){return a===e};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:d=function(a){return a==null};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:d=function(a){return a!=null};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:d=function(a){return!0};break;default:throw new Error(b("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(a){return d(a)}}}),null);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,i=function(a){return h.test(a)};function a(a){(g||(g=b("ContextualConfigAssert")))(i(a),b("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseFloat(a);g(b("ContextualConfigValidators").isNumber(a),b("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}}),null);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=/^[-\+]?([1-9]\d*|0)$/,i=function(a){return h.test(a)};function a(a){(g||(g=b("ContextualConfigAssert")))(i(a),b("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseInt(a,10);g(b("ContextualConfigValidators").isNumber(a),b("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}}),null);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){return(g||(g=b("ContextualConfigAssert")))(a>0,b("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};f.assertHasValues=a;c=function(a,c){return(g||(g=b("ContextualConfigAssert")))(a===c,b("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};f.assertNumberOfValues=c;d=function(a,c){return(g||(g=b("ContextualConfigAssert")))(a<c,b("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};f.assertValueOrder=d}),null);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a,c,d,e){var f=d.map(e?b("ContextualConfigParseInteger"):g||(g=b("ContextualConfigParseFloat"))),h;switch(c){case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var i=e?b("ContextualConfigParseInteger")(a):(g||(g=b("ContextualConfigParseFloat")))(a);h=function(a){return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a===i};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:h=function(a){return a==null};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:h=function(a){return a!=null};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:h=function(a){return!0};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:b("ContextualConfigPredAssertions").assertNumberOfValues(f.length,2);b("ContextualConfigPredAssertions").assertValueOrder(f[0],f[1]);h=function(a){if(typeof a!=="number")return!1;return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a>=f[0]&&a<f[1]};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:b("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);h=function(a){if(typeof a!=="number")return!1;return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a<f[0]};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:b("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);h=function(a){if(typeof a!=="number")return!1;return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a<=f[0]};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:b("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);h=function(a){if(typeof a!=="number")return!1;return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a===f[0]};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:b("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);h=function(a){if(typeof a!=="number")return!1;return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a!==f[0]};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:b("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);h=function(a){if(typeof a!=="number")return!1;return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a>f[0]};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:b("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);h=function(a){if(typeof a!=="number")return!1;return e&&!b("ContextualConfigValidators").isInteger(a)?!1:a>=f[0]};break;default:throw new Error(b("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(a){return h(a)}}}),null);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=/^\/(.+)\/(.*)$/;function a(a){try{var c=a.match(g);if(c!=null)return new RegExp(c[1],c[2]);else return new RegExp(a)}catch(a){throw new Error(b("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}}),null);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=function(a){if(typeof a!=="string")throw new Error(b("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return a},h=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b.push(g(e))}return b};function a(a,c,d){var e=h(d),f;switch(c){case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:f=function(b){return typeof b!=="string"?!1:b===a};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:f=function(a){return a==null};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:f=function(a){return a!=null};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:f=function(a){return!0};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:b("ContextualConfigPredAssertions").assertHasValues(e.length);f=function(a){return typeof a!=="string"?!1:e.indexOf(a)!==-1};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:b("ContextualConfigPredAssertions").assertHasValues(e.length);f=function(a){return typeof a!=="string"?!1:e.indexOf(a)===-1};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:b("ContextualConfigPredAssertions").assertNumberOfValues(e.length,1);f=function(a){return typeof a!=="string"?!1:a.indexOf(e[0])!==-1};break;case b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:b("ContextualConfigPredAssertions").assertNumberOfValues(e.length,1);var g=b("ContextualConfigParseRegExp")(e[0]);f=function(a){return typeof a!=="string"?!1:g.test(a)};break;default:throw new Error(b("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(a){return f(a)}}}),null);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},j=b("ContextualConfigValidators").isKey(b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),k=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isString(a)&&j(a.toUpperCase()),b("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},l=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},m=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isNonEmptyString(a),b("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},n=function(a,c){var d=c.name;m(d);var e=c.strategy;k(e);c=c.values||[];l(c);switch(a){case b("ContextualConfigConstants").TYPE.BOOL:return b("ContextualConfigParsePredBoolean")(d,e);case b("ContextualConfigConstants").TYPE.FLOAT:return b("ContextualConfigParsePredNumeric")(d,e,c,!1);case b("ContextualConfigConstants").TYPE.INT:return b("ContextualConfigParsePredNumeric")(d,e,c,!0);case b("ContextualConfigConstants").TYPE.STRING:return b("ContextualConfigParsePredString")(d,e,c);default:throw new Error(b("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},o=function(a,b){h(b);var c=b.name;m(c);return{name:c,pred:n(a,b)}};function a(a,b){i(b);return b.map(function(b){return o(a,b)})}}),null);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a)&&a.length>0,b("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},j=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isNonEmptyString(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},k=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isType(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){h(a);var c=a.name,d=a.type;a=a.buckets;j(c);k(d);return{name:c,type:d,buckets:b("ContextualConfigParseContextBuckets")(d,a)}};function a(a){i(a);return a.map(l)}}),null);
__d("ContextualConfigIsEqualParams",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c+=1){var d=a[c],e=b[c];if(d.name!==e.name||d.type!==e.type)return!1}return!0}}),null);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isString(a),b("ContextualConfigConstants").ERROR.INVALID_STRING)};function a(a,c){i(c);switch(a){case b("ContextualConfigConstants").TYPE.BOOL:return b("ContextualConfigParseBoolean")(c);case b("ContextualConfigConstants").TYPE.FLOAT:return(h||(h=b("ContextualConfigParseFloat")))(c);case b("ContextualConfigConstants").TYPE.INT:return b("ContextualConfigParseInteger")(c);case b("ContextualConfigConstants").TYPE.STRING:return c;default:throw new Error(b("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}}),null);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.MISSING_RESULTS)},j=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},k=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isNonEmptyString(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},l=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isType(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(a,c){for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.name===c)return f.type}throw new Error(b("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},n=function(a){return function(c){j(c);var d=c.name;k(d);var e=m(a,d);l(e);c=(h||(h=b("ContextualConfigParseResultParamValue")))(e,c.value);return{name:d,type:e,value:c}}};function a(a,b){i(b);return b.map(n(a))}}),null);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=function(a,c){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigIsEqualParams")(a,c),b("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function a(a,c){c=b("ContextualConfigParseResultParams")(a,c.map(function(b,c){return{name:a[c].name,value:b}}));h(a,c);return c}}),null);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){try{return b("ContextualConfigParseDenseResultParams")(a,c)}catch(a){throw new Error(b("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}}),null);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},j=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isNonEmptyString(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},k=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isType(a),b("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){h(a);var b=a.name;a=a.type;j(b);k(a);return{name:b,type:a}};function a(a){i(a);return a.map(l)}}),null);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){e.exports=a;var g,h=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isType(a),b("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},j=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isNonEmptyString(a),b("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},k=function(a){return(g||(g=b("ContextualConfigAssert")))(l(a),b("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},l=function(a){var b={};for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b[e.name])return!1;b[e.name]=!0}return!0},m=function(a){j(a.name);i(a.type);return a};function a(a){h(a);a=a.map(m);k(a);return a}}),null);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.MISSING_VECTOR)},j=function(a,c){return(g||(g=b("ContextualConfigAssert")))(a===c,b("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},k=function(a,c){j(a.length,c.length);for(var d=0;d<a.length;d+=1){var e=a[d].type,f=c[d];(h||(h=b("ContextualConfigParseResultParamValue")))(e,f)}},l=function(a){return a.reduce(function(a,b){b=b.buckets;return a*b.length},1)};function a(a,b,c){i(c);b=l(b);var d=a.length;j(b*d,c.length);for(var e=0;e<b;e+=1){var f=e*d;k(a,c.slice(f,f+d))}return c}}),null);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];try{if(d.pred(b))return[d.name,c]}catch(a){return null}}return null};function a(a,c,d){var e=null;a=a.map(function(a){var f=a.name,h={name:f};if(e!=null)return h;var i;d[f]!=null?i=d[f]:c[f]!=null?i=c[f]():i=null;h.value=i;if(a.buckets!=null){f=g(a.buckets,i);if(f==null){e=new Error(b("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH);return h}a=f[0];i=f[1];h.bucketName=a;h.bucketIndex=i}return h});return[e,a]}}),null);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.BAD_CONFIG)},i=function(a){var b=[],c=1;for(var d=a.length-1;d>=0;d-=1)b.push(c),c*=a[d].buckets.length;return b.reverse()},j=function(a,c,d,e){try{c=c.slice(d,d+a.length);return[null,b("ContextualConfigParseDenseResultParams")(a,c)]}catch(a){return[a,e]}},k=function(a,c,d){try{d=d.reduce(function(c,d,e){(g||(g=b("ContextualConfigAssert")))(e<a.length,"Auxillery index out of range.");return c+a[e]*d},0);return[null,d*c]}catch(a){return[a,-1]}};a=function(){function a(a,c){h(a);this.globalContextProviders=babelHelpers["extends"]({},c);c=b("ContextualConfigParseOutputParams")(a.outputs);var d=b("ContextualConfigParseContexts")(a.contexts);this.aux=i(d);this.contexts=d;this.defaults=b("ContextualConfigParseDenseDefaults")(c,a.vectorDefaults);this.monitors=a.monitors!=null?b("ContextualConfigParseMonitors")(a.monitors):[];this.outputs=c;this.vector=b("ContextualConfigParseVector")(c,d,a.vector)}var c=a.prototype;c.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};c.unsafeResolve=function(a){var c=this.aux,d=this.globalContextProviders,e=this.contexts,f=this.defaults,g=this.monitors,h=this.outputs,i=this.vector;e=b("ContextualConfigResolveContexts")(e,d,a);var l=e[0];e=e[1];if(l!=null)return[l,f,e,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];l=k(c,h.length,b("ContextualConfigResolvedContextsUtils").getBucketIndices(e));c=l[0];l=l[1];if(c!=null)return[c,f,e,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];c=j(h,i,l,f);h=c[0];i=c[1];if(h!=null)return[h,i,e,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];l=b("ContextualConfigResolveContexts")(g,d,a);f=l[0];c=l[1];return f!=null?[f,i,e,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,i,e,c]};return a}();e.exports=a}),null);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,c){h(a);this.globalContextProviders=babelHelpers["extends"]({},c);c=b("ContextualConfigParseOutputParams")(a.outputs);this.monitors=a.monitors!=null?b("ContextualConfigParseMonitors")(a.monitors):[];this.values=b("ContextualConfigParseResultParams")(c,a.values)}var c=a.prototype;c.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.values,b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};c.unsafeResolve=function(a){var c=this.globalContextProviders,d=this.monitors,e=this.values;d=b("ContextualConfigResolveContexts")(d,c,a);c=d[0];a=d[1];return c!=null?[c,e,b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,e,b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,a]};return a}();e.exports=a}),null);
__d("ContextualConfigMergePartialResultParams",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){var c={};for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;c[f.name]=f}f=[];for(var e=a,d=Array.isArray(e),b=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(b>=e.length)break;a=e[b++]}else{b=e.next();if(b.done)break;a=b.value}a=a;var g=c[a.name];f.push(g!=null&&g.name===a.name&&g.type===a.type?g:a)}return f}}),null);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=function(a,c){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigIsEqualParams")(a,c),b("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function a(a,c){c=b("ContextualConfigParseResultParams")(a,c);h(a,c);return c}}),null);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.MISSING_TABLE)},i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.MISSING_TABLE)},j=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isNonEmptyString(a),b("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},k=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isArray(a),b("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},l=function(a,c){i(c);var d=c.bucket;c=c.values;j(d);k(c);return{bucket:d,values:b("ContextualConfigParseResultParams")(a,c)}};function a(a,b){h(b);return b.reduce(function(b,c){c=l(a,c);b[c.bucket]=c.values;return b},{})}}),null);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=[],i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a),b("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,c){i(a);this.globalContextProviders=babelHelpers["extends"]({},c);c=b("ContextualConfigParseOutputParams")(a.outputs);this.contexts=b("ContextualConfigParseContexts")(a.contexts);this.defaults=b("ContextualConfigParseDefaults")(c,a.defaults);this.monitors=a.monitors!=null?b("ContextualConfigParseMonitors")(a.monitors):[];this.table=b("ContextualConfigParseTable")(c,a.table)}var c=a.prototype;c.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};c.unsafeResolve=function(a){var c=this.globalContextProviders,d=this.contexts,e=this.defaults,f=this.monitors,g=this.table;d=b("ContextualConfigResolveContexts")(d,c,a);var i=d[0];d=d[1];if(i!=null)return[i,e,d,[]];i=b("ContextualConfigResolvedContextsUtils").getBucketNames(d).join(b("ContextualConfigConstants").BUCKET_DELIMITER);g=g[i]||h;i=b("ContextualConfigMergePartialResultParams")(e,g);e=b("ContextualConfigResolveContexts")(f,c,a);g=e[0];f=e[1];return g!=null?[g,i,d,[]]:[null,i,d,f]};return a}();e.exports=a}),null);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=[1],i=function(a){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigValidators").isDefined(a)&&b("ContextualConfigValidators").isDefined(a.version),b("ContextualConfigConstants").ERROR.BAD_CONFIG)},j=function(a){return(g||(g=b("ContextualConfigAssert")))(h.indexOf(a)!==-1,b("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function a(a,c){i(a);j(a.version);switch(a.cctype){case b("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(b("DenseContextualConfig"))(a,c);case b("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(b("MultiOutputResolvedContextualConfig"))(a,c);case b("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(b("TableContextualConfig"))(a,c);default:throw new Error(b("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}}),null);
__d("ContextualConfigWarn",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){}}),null);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a.reduce(function(a,b){var c=b.name;b=b.value;a[c]=b;return a},{}),this.$2=a}var c=a.prototype;c.get=function(a,c){try{a=this.$1[a];if(typeof a!==typeof c){b("ContextualConfigWarn")(b("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND);return c}return a}catch(a){b("ContextualConfigWarn")(a.message);return c}};c.getParams=function(){return this.$2};return a}();e.exports=a}),null);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.error=a}var c=a.prototype;c.resolve=function(a){return[this.error,b("ContextualConfigConstants").EMPTY_RESULT_PARAMS,b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]};return a}();e.exports=a}),null);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],(function(a,b,c,d,e,f){"use strict";var g=1/b("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,h=1;a=function(){function a(a,b){b===void 0&&(b={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=a,this.$2=b}var c=a.prototype;c.$5=function(){if(this.$1)return this.$1;var a=this.$2,c=this.$4;try{c=b("ContextualConfigParseConfig")(c,a)}catch(a){c=new(b("ErrorContextualConfig"))(a)}this.$1=c;return c};c.$6=function(a){var c=this.isDebugLoggingEnabled,d=this.$4,e=this.$3;e=!e&&b("Random").random()<g;e&&(this.$3=!0);d=b("ContextualConfigCollateExposureData")(d,a,e);a=b("ContextualConfigExposureLogger").createEvent(d);a.log(c)};c.resolve=function(a){a===void 0&&(a={});var c=this.$1||this.$5();c=c.resolve(a);this.$6(c);return new(b("ContextualConfigResult"))(c[h])};return a}();e.exports=a}),null);
__d("EventsActionsSrCoreFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1845787");c=b("FalcoLoggerInternal").create("events_actions_sr_core",a);e.exports=c}),null);
__d("LynxAsyncCallbackFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743887");c=b("FalcoLoggerInternal").create("lynx_async_callback",a);e.exports=c}),null);
__d("FleetBeaconStates",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getName=function(){return"initial"};b.getFleetBeaconRunner=function(){return this.$1};b.prepareFleetBeaconSucceed=function(){throw new Error("Invalid transition")};b.prepareFleetBeaconFailed=function(){throw new Error("Invalid transition")};b.subscribeIssued=function(){throw new Error("Invalid transition")};b.subscribeSuccessSignalReceived=function(){throw new Error("Invalid transition")};b.publishIssued=function(){throw new Error("Invalid transition")};b.publishFailed=function(){throw new Error("Invalid transition")};b.payloadReceived=function(){throw new Error("Invalid transition")};b.waitForPublishTimeout=function(){throw new Error("Invalid transition")};b.subscribeTimeout=function(){throw new Error("Invalid transition")};b.payloadTimeout=function(){throw new Error("Invalid transition")};b.cleanUpFinish=function(){throw new Error("Invalid transition")};return a}();f.FleetBeaconState=a;b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getName=function(){return"preparing"};c.prepareFleetBeaconSucceed=function(){var b=this;return{newState:new g(a.prototype.getFleetBeaconRunner.call(this)),action:function(){a.prototype.getFleetBeaconRunner.call(b).runFleetBeaconTest()}}};c.prepareFleetBeaconFailed=function(){var b=this;return{newState:new m(a.prototype.getFleetBeaconRunner.call(this)),action:function(){b.getFleetBeaconRunner().cleanUpFleetBeacon()}}};return b}(a);f.FleetBeaconPreparingState=b;var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"before_subscribe"};c.subscribeIssued=function(){var a=this;return{newState:new h(b.prototype.getFleetBeaconRunner.call(this)),action:function(){b.prototype.getFleetBeaconRunner.call(a).startSubscribeTimer()}}};return a}(a);f.FleetBeaconBeforeSubscribeState=g;var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"subscribe_issued"};c.subscribeSuccessSignalReceived=function(){var a=this;return{newState:new i(b.prototype.getFleetBeaconRunner.call(this)),action:function(){b.prototype.getFleetBeaconRunner.call(a).waitForNextPublish()}}};c.subscribeTimeout=function(){var a=this;return{newState:new k(b.prototype.getFleetBeaconRunner.call(this)),action:function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}}};return a}(a);f.FleetBeaconSubscribedIssuedState=h;var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"waiting_to_publish"};c.waitForPublishTimeout=function(){var a=this;return{newState:new j(b.prototype.getFleetBeaconRunner.call(this)),action:function(){b.prototype.getFleetBeaconRunner.call(a).publish(),b.prototype.getFleetBeaconRunner.call(a).startPayloadTimer()}}};return a}(a);f.FleetBeaconWaitingToPublishState=i;var j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"publish_issued"};c.publishFailed=function(){var a=this;return{newState:new m(b.prototype.getFleetBeaconRunner.call(this)),action:function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}}};c.payloadReceived=function(){var a=this,c,d;(function(){});b.prototype.getFleetBeaconRunner.call(this).isLastPayload()?(c=new l(b.prototype.getFleetBeaconRunner.call(this)),d=function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}):(c=new i(b.prototype.getFleetBeaconRunner.call(this)),d=function(){b.prototype.getFleetBeaconRunner.call(a).waitForNextPublish()});return{newState:c,action:d}};c.payloadTimeout=function(){var a=this;return{newState:new k(b.prototype.getFleetBeaconRunner.call(this)),action:function(){a.getFleetBeaconRunner().cleanUpFleetBeacon()}}};return a}(a);f.FleetBeaconPublishIssuedState=j;var k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"failed"};c.cleanUpFinish=function(){return{newState:new n(b.prototype.getFleetBeaconRunner.call(this)),action:function(){}}};return a}(a);f.FleetBeaconFailedState=k;var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"succeed"};c.cleanUpFinish=function(){return{newState:new n(b.prototype.getFleetBeaconRunner.call(this)),action:function(){}}};return a}(a);f.FleetBeaconSucceedState=l;var m=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"aborted"};c.cleanUpFinish=function(){return{newState:new n(b.prototype.getFleetBeaconRunner.call(this)),action:function(){}}};return a}(a);f.FleetBeaconAbortedState=m;var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getName=function(){return"finish"};return a}(a);f.FleetBeaconFinishState=n}),null);
__d("FleetBeaconRunner",["FleetBeaconStates","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a;this.$2=new(b("FleetBeaconStates").FleetBeaconState)(this);var c=new(b("FleetBeaconStates").FleetBeaconPreparingState)(this);this.$1.cleanPreviousFleetBeaconResult();this.$6(function(){return{newState:c,action:function(){}}});this.$3=0;this.$1.setFleetBeaconRunner(this)}var c=a.prototype;c.getPublishTimes=function(){return this.$3};c.prepareFleetBeaconTest=function(){this.$1.prepareFleetBeaconTest()};c.runFleetBeaconTest=function(){var a=this;this.$6(function(){return a.$2.subscribeIssued()});this.$7()};c.$7=function(){this.$1.subscribe()};c.publish=function(){this.$1.publish()};c.isLastPayload=function(){return this.$3>=this.$1.publishWaitIntervalsMS().length};c.waitForNextPublish=function(){var a=this,c=this.$1.publishWaitIntervalsMS()[this.$3];this.$3+=1;c===0?this.$8():b("setTimeout")(function(){a.$8()},c)};c.startSubscribeTimer=function(){var a=this,c=this.$1.subscribeTimeoutIntervalMS();this.$4=b("setTimeout")(function(){a.$9()},c)};c.startPayloadTimer=function(){var a=this,c=this.$1.payloadTimeoutIntervalMS();this.$5=b("setTimeout")(function(){a.$10()},c)};c.cleanUpFleetBeacon=function(){this.$1.cleanUpFleetBeacon()};c.onCleanUpFinish=function(){var a=this;this.$6(function(){return a.$2.cleanUpFinish()})};c.$8=function(){var a=this;this.$6(function(){return a.$2.waitForPublishTimeout()})};c.$9=function(){var a=this;this.$6(function(){return a.$2.subscribeTimeout()})};c.$10=function(){var a=this;this.$6(function(){return a.$2.payloadTimeout()})};c.onPrepareFleetBeaconSuccess=function(){var a=this;this.$6(function(){return a.$2.prepareFleetBeaconSucceed()})};c.onPrepareFleetBeaconFailed=function(){var a=this;this.$6(function(){return a.$2.prepareFleetBeaconFailed()})};c.onSubscribe=function(){var a=this;b("clearTimeout")(this.$4);this.$6(function(){return a.$2.subscribeSuccessSignalReceived()})};c.onPayloadReceived=function(){var a=this;b("clearTimeout")(this.$5);this.$6(function(){return a.$2.payloadReceived()})};c.onPublishFailed=function(){var a=this;b("clearTimeout")(this.$5);this.$6(function(){return a.$2.publishFailed()})};c.$6=function(a){a=a();var b=this.$2;this.$2=a.newState;var c=this.$2;this.$11(b,c);a.action()};c.$11=function(a,b){this.$1.onFleetBeaconStateTransition(a,b)};return a}();e.exports=a}),null);
__d("FleetBeaconStateTransitionListener",[],(function(a,b,c,d,e,f){a=function(){function a(){}var b=a.prototype;b.onFleetBeaconStateTransition=function(a,b,c,d){throw new Error("Require implementation")};b.cleanState=function(){throw new Error("Require implementation")};return a}();e.exports=a}),null);
__d("FleetBeaconTestBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=null,this.$2=[]}var b=a.prototype;b.addStateTransitionListener=function(a){this.$2.push(a)};b.cleanPreviousFleetBeaconResult=function(){this.$2.forEach(function(a){a.cleanState()})};b.getNumberOfPublishers=function(){var a;return(a=(a=this.$1)==null?void 0:a.getPublishTimes())!=null?a:-1};b.getTestID=function(){throw new Error("Require implementation")};b.setFleetBeaconRunner=function(a){this.$1=a};b.prepareFleetBeaconTest=function(){throw new Error("Require implementation")};b.onPrepareFleetBeaconSuccess=function(){var a;(a=this.$1)==null?void 0:a.onPrepareFleetBeaconSuccess()};b.onPrepareFleetBeaconFailed=function(){var a;(a=this.$1)==null?void 0:a.onPrepareFleetBeaconFailed()};b.subscribe=function(){throw new Error("Require implementation")};b.onSubscribe=function(){var a;(a=this.$1)==null?void 0:a.onSubscribe()};b.publish=function(){throw new Error("Require implementation")};b.cleanUpFleetBeacon=function(){throw new Error("Require implementation")};b.onCleanUpFinish=function(){var a;(a=this.$1)==null?void 0:a.onCleanUpFinish()};b.onPublishFailed=function(){var a;(a=this.$1)==null?void 0:a.onPublishFailed()};b.onPayloadReceived=function(){var a;(a=this.$1)==null?void 0:a.onPayloadReceived()};b.subscribeTimeoutIntervalMS=function(){return 1e4};b.payloadTimeoutIntervalMS=function(){return 2e4};b.publishWaitIntervalsMS=function(){return[1e4,5e3]};b.shouldStartTime=function(){return!0};b.onFleetBeaconStateTransition=function(a,b){var c=this,d=Date.now();this.$2.forEach(function(e){e.onFleetBeaconStateTransition(a,b,d,c)})};return a}();e.exports=a}),null);
__d("FleetBeaconTestUIAnnouncer",["FleetBeaconStateTransitionListener"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$FleetBeaconTestUIAnnouncer1=[];b.$FleetBeaconTestUIAnnouncer3=!1;b.$FleetBeaconTestUIAnnouncer4=!1;b.$FleetBeaconTestUIAnnouncer5=!1;b.$FleetBeaconTestUIAnnouncer6=!1;b.$FleetBeaconTestUIAnnouncer7=-1;b.$FleetBeaconTestUIAnnouncer8=-1;b.$FleetBeaconTestUIAnnouncer9=0;b.$FleetBeaconTestUIAnnouncer10=0;b.$FleetBeaconTestUIAnnouncer11=[];b.$FleetBeaconTestUIAnnouncer12=-1;b.$FleetBeaconTestUIAnnouncer13=-1;b.$FleetBeaconTestUIAnnouncer14=-1;return b}var c=b.prototype;c.cleanState=function(){this.$FleetBeaconTestUIAnnouncer3=!1,this.$FleetBeaconTestUIAnnouncer4=!1,this.$FleetBeaconTestUIAnnouncer5=!1,this.$FleetBeaconTestUIAnnouncer6=!1,this.$FleetBeaconTestUIAnnouncer7=-1,this.$FleetBeaconTestUIAnnouncer8=-1,this.$FleetBeaconTestUIAnnouncer9=0,this.$FleetBeaconTestUIAnnouncer10=0,this.$FleetBeaconTestUIAnnouncer11=[],this.$FleetBeaconTestUIAnnouncer12=-1,this.$FleetBeaconTestUIAnnouncer13=-1,this.$FleetBeaconTestUIAnnouncer14=-1};c.addSubscriber=function(a){this.$FleetBeaconTestUIAnnouncer1.push(a)};c.onFleetBeaconStateTransition=function(a,b,c,d){var e=d.getTestID(),f={oldState:a,newState:b,testID:e,timestamp:c,extra:{}};this.$FleetBeaconTestUIAnnouncer2==null&&(this.$FleetBeaconTestUIAnnouncer2=d);e="NONE";switch(b.getName()){case"initial":break;case"preparing":this.$FleetBeaconTestUIAnnouncer12=Date.now();this.$FleetBeaconTestUIAnnouncer3=!0;f.extra=babelHelpers["extends"]({},f.extra,{createIssued:!0});break;case"before_subscribe":this.$FleetBeaconTestUIAnnouncer13=Date.now();this.$FleetBeaconTestUIAnnouncer4=!0;f.extra=babelHelpers["extends"]({},f.extra,{createSuccess:!0});break;case"subscribe_issued":this.$FleetBeaconTestUIAnnouncer5=!0;f.extra=babelHelpers["extends"]({},f.extra,{subscribeIssued:!0,subscribeTimestamp:this.$FleetBeaconTestUIAnnouncer13,subscribeTimeoutIntervalMS:(d=(c=this.$FleetBeaconTestUIAnnouncer2)==null?void 0:c.subscribeTimeoutIntervalMS())!=null?d:-1});break;case"waiting_to_publish":a.getName()==="subscribe_issued"&&(this.$FleetBeaconTestUIAnnouncer6=!0,this.$FleetBeaconTestUIAnnouncer7=Date.now()-this.$FleetBeaconTestUIAnnouncer13,f.extra=babelHelpers["extends"]({},f.extra,{subscribeSuccess:!0,subscribeLatencyMS:this.$FleetBeaconTestUIAnnouncer7}));a.getName()==="publish_issued"&&this.$FleetBeaconTestUIAnnouncer15(f);break;case"publish_issued":this.$FleetBeaconTestUIAnnouncer9+=1;this.$FleetBeaconTestUIAnnouncer14=Date.now();f.extra=babelHelpers["extends"]({},f.extra,{publishIssued:!0,payloadTimeoutInterval:(c=(b=this.$FleetBeaconTestUIAnnouncer2)==null?void 0:b.payloadTimeoutIntervalMS())!=null?c:-1});break;case"failed":a.getName()==="subscribe_issued"&&(e="SUBSCRIBE_FAILED");a.getName()==="publish_issued"&&(e="RECEIVE_PUBLISH_FAILED");this.$FleetBeaconTestUIAnnouncer16(f,"FAILURE",e);break;case"succeed":a.getName()==="publish_issued"&&this.$FleetBeaconTestUIAnnouncer15(f);this.$FleetBeaconTestUIAnnouncer16(f,"SUCCESS","NONE");break;case"aborted":a.getName()==="preparing"&&(e="CREATE_TEST_FAILED");a.getName()==="publish_issued"&&(e="MUTATE_FIELD_FAILED");this.$FleetBeaconTestUIAnnouncer16(f,"ABORT",e);break;case"finish":f.extra=babelHelpers["extends"]({},f.extra,{cleanUpFinish:!0});break;default:}this.$FleetBeaconTestUIAnnouncer1.forEach(function(a){a(f)})};c.$FleetBeaconTestUIAnnouncer15=function(a){this.$FleetBeaconTestUIAnnouncer10+=1;var b=Date.now()-this.$FleetBeaconTestUIAnnouncer14;this.$FleetBeaconTestUIAnnouncer11.push(b);a.extra=babelHelpers["extends"]({},a.extra,{payloadSuccess:!0,payloadSuccessCnt:this.$FleetBeaconTestUIAnnouncer10,payloadLatency:b})};c.$FleetBeaconTestUIAnnouncer16=function(a,b,c){a.extra=babelHelpers["extends"]({},a.extra,{testResult:b,failureReason:c})};return b}(b("FleetBeaconStateTransitionListener"));e.exports=a}),null);
__d("FleetBeaconSubscriptionNetwork",["CurrentUser","FleetBeaconSubscriptionNetwork_LogMutation.graphql","FleetBeaconSubscriptionNetwork_PublishMutation.graphql","FleetBeaconSubscriptionNetwork_Subscription.graphql","Promise","RelayModern","regeneratorRuntime","uuid"],(function(a,b,c,d,e,f){"use strict";var g,h,i;a=function(){function a(a){this.environment=a}var c=a.prototype;c.subscribe=function(a,c){return b("RelayModern").requestSubscription(this.environment,{subscription:g!==void 0?g:g=b("FleetBeaconSubscriptionNetwork_Subscription.graphql"),variables:{input:{test_id:a}},onError:c.onError,onNext:c.onNext})};c.publish=function(a){var c=this;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:return d.abrupt("return",new(b("Promise"))(function(d,e){b("RelayModern").commitMutation(c.environment,{mutation:h!==void 0?h:h=b("FleetBeaconSubscriptionNetwork_PublishMutation.graphql"),variables:{input:{client_mutation_id:b("uuid")(),actor_id:b("CurrentUser").getAccountID(),test_id:a}},onCompleted:function(a){return d()},onError:e})}));case 1:case"end":return d.stop()}},null,this)};c.log=function(a){var c=this;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:return d.abrupt("return",new(b("Promise"))(function(d,e){b("RelayModern").commitMutation(c.environment,{mutation:i!==void 0?i:i=b("FleetBeaconSubscriptionNetwork_LogMutation.graphql"),variables:{input:a},onCompleted:function(a){return d()},onError:e})}));case 1:case"end":return d.stop()}},null,this)};return a}();e.exports=a}),null);
__d("FleetBeaconTestSubscriptionLogger",["CurrentUser","FleetBeaconStateTransitionListener","RelayRTIUtils","uuid"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d){var e;e=a.call(this)||this;e.$FleetBeaconTestSubscriptionLogger1=null;e.$FleetBeaconTestSubscriptionLogger2=b;e.$FleetBeaconTestSubscriptionLogger3=!1;e.$FleetBeaconTestSubscriptionLogger4=!1;e.$FleetBeaconTestSubscriptionLogger5=!1;e.$FleetBeaconTestSubscriptionLogger6=!1;e.$FleetBeaconTestSubscriptionLogger7=-1;e.$FleetBeaconTestSubscriptionLogger8=-1;e.$FleetBeaconTestSubscriptionLogger9=0;e.$FleetBeaconTestSubscriptionLogger10=0;e.$FleetBeaconTestSubscriptionLogger11=[];e.$FleetBeaconTestSubscriptionLogger12=-1;e.$FleetBeaconTestSubscriptionLogger13=-1;e.$FleetBeaconTestSubscriptionLogger14=-1;e.$FleetBeaconTestSubscriptionLogger15=c;e.$FleetBeaconTestSubscriptionLogger16=d;return e}var d=c.prototype;d.cleanState=function(){this.$FleetBeaconTestSubscriptionLogger3=!1,this.$FleetBeaconTestSubscriptionLogger4=!1,this.$FleetBeaconTestSubscriptionLogger5=!1,this.$FleetBeaconTestSubscriptionLogger6=!1,this.$FleetBeaconTestSubscriptionLogger7=-1,this.$FleetBeaconTestSubscriptionLogger8=-1,this.$FleetBeaconTestSubscriptionLogger9=0,this.$FleetBeaconTestSubscriptionLogger10=0,this.$FleetBeaconTestSubscriptionLogger11=[],this.$FleetBeaconTestSubscriptionLogger12=-1,this.$FleetBeaconTestSubscriptionLogger13=-1,this.$FleetBeaconTestSubscriptionLogger14=-1};d.onFleetBeaconStateTransition=function(a,b,c,d){this.$FleetBeaconTestSubscriptionLogger1==null&&(this.$FleetBeaconTestSubscriptionLogger1=d);c="NONE";switch(b.getName()){case"initial":break;case"preparing":this.$FleetBeaconTestSubscriptionLogger12=Date.now();this.$FleetBeaconTestSubscriptionLogger3=!0;break;case"before_subscribe":this.$FleetBeaconTestSubscriptionLogger13=Date.now();this.$FleetBeaconTestSubscriptionLogger4=!0;break;case"subscribe_issued":this.$FleetBeaconTestSubscriptionLogger5=!0;break;case"waiting_to_publish":a.getName()==="subscribe_issued"&&(this.$FleetBeaconTestSubscriptionLogger6=!0,this.$FleetBeaconTestSubscriptionLogger7=Date.now()-this.$FleetBeaconTestSubscriptionLogger13);a.getName()==="publish_issued"&&this.$FleetBeaconTestSubscriptionLogger17();break;case"publish_issued":this.$FleetBeaconTestSubscriptionLogger9+=1;this.$FleetBeaconTestSubscriptionLogger14=Date.now();break;case"failed":a.getName()==="subscribe_issued"&&(c="SUBSCRIBE_FAILED");a.getName()==="publish_issued"&&(c="RECEIVE_PUBLISH_FAILED");this.$FleetBeaconTestSubscriptionLogger18("FAILURE",c);break;case"succeed":a.getName()==="publish_issued"&&this.$FleetBeaconTestSubscriptionLogger17();this.$FleetBeaconTestSubscriptionLogger18("SUCCESS","NONE");break;case"aborted":a.getName()==="preparing"&&(c="CREATE_TEST_FAILED");a.getName()==="publish_issued"&&(c="MUTATE_FIELD_FAILED");this.$FleetBeaconTestSubscriptionLogger18("ABORT",c);break;default:}};d.$FleetBeaconTestSubscriptionLogger17=function(){this.$FleetBeaconTestSubscriptionLogger10+=1;var a=Date.now()-this.$FleetBeaconTestSubscriptionLogger14;this.$FleetBeaconTestSubscriptionLogger11.push(a)};d.$FleetBeaconTestSubscriptionLogger18=function(a,c){var d,e=this,f=this.$FleetBeaconTestSubscriptionLogger12=Date.now()-this.$FleetBeaconTestSubscriptionLogger12,g=parseInt(this.$FleetBeaconTestSubscriptionLogger11.reduce(function(a,b){return a+b},0)/this.$FleetBeaconTestSubscriptionLogger10,10);d=(d=this.$FleetBeaconTestSubscriptionLogger1)==null?void 0:d.getTestID();if(d==null)return;this.$FleetBeaconTestSubscriptionLogger2.log({client_mutation_id:b("uuid")(),actor_id:b("CurrentUser").getAccountID(),test_id:d,test_name:"Web_Manual",test_result:a,failure_reason:c,subscribe_issued:this.$FleetBeaconTestSubscriptionLogger5,subscribe_success:this.$FleetBeaconTestSubscriptionLogger6,subscribe_latency_ms:this.$FleetBeaconTestSubscriptionLogger7,subscribe_timeout_interval_ms:(d=this.$FleetBeaconTestSubscriptionLogger1)==null?void 0:d.subscribeTimeoutIntervalMS(),publish_success:this.$FleetBeaconTestSubscriptionLogger10>0,publish_latency_ms:g,publish_timeout_interval_ms:(a=this.$FleetBeaconTestSubscriptionLogger1)==null?void 0:a.payloadTimeoutIntervalMS(),test_duration_ms:f,triggering_subscription:(c=this.$FleetBeaconTestSubscriptionLogger15)!=null?c:"manual",app_id:b("RelayRTIUtils").GRAPH_SERVICES_SDK_APP_ID}).then(function(a){e.$FleetBeaconTestSubscriptionLogger16(!0)})["catch"](function(a){e.$FleetBeaconTestSubscriptionLogger16(!1)})};return c}(b("FleetBeaconStateTransitionListener"));e.exports=a}),null);
__d("FleetBeaconTestSubscription",["FleetBeaconTestBase","FleetBeaconTestSubscriptionLogger","FleetBeaconTestUIAnnouncer","uuid"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;f=a.call(this)||this;f.onCleanUpFleetBeaconFinish=function(a){f.onCleanUpFinish()};f.$FleetBeaconTestSubscription1=c;f.$FleetBeaconTestSubscription3=null;f.$FleetBeaconTestSubscription4=e;f.$FleetBeaconTestSubscription6=new(b("FleetBeaconTestSubscriptionLogger"))(c,d,f.onCleanUpFleetBeaconFinish);f.$FleetBeaconTestSubscription5=new(b("FleetBeaconTestUIAnnouncer"))();a.prototype.addStateTransitionListener.call(babelHelpers.assertThisInitialized(f),f.$FleetBeaconTestSubscription6);a.prototype.addStateTransitionListener.call(babelHelpers.assertThisInitialized(f),f.$FleetBeaconTestSubscription5);f.cleanPreviousFleetBeaconResult();return f}var d=c.prototype;d.cleanPreviousFleetBeaconResult=function(){a.prototype.cleanPreviousFleetBeaconResult.call(this),this.$FleetBeaconTestSubscription2=b("uuid")()};d.getTestID=function(){return this.$FleetBeaconTestSubscription2};d.getFleetBeaconUIAnnouncer=function(){return this.$FleetBeaconTestSubscription5};d.prepareFleetBeaconTest=function(){this.onPrepareFleetBeaconSuccess()};d.subscribe=function(){var a=this,b=this.$FleetBeaconTestSubscription2;if(b==null)return;this.$FleetBeaconTestSubscription3=this.$FleetBeaconTestSubscription1.subscribe(b,{onNext:function(){a.onPayloadReceived()},onError:function(){}});this.onSubscribe()};d.publish=function(){var b=this,c=this.$FleetBeaconTestSubscription2;if(c==null)return;this.$FleetBeaconTestSubscription1.publish(c)["catch"](function(c){a.prototype.onPublishFailed.call(b)})};d.cleanUpFleetBeacon=function(){};d.$FleetBeaconTestSubscription7=function(){var a;(a=this.$FleetBeaconTestSubscription3)==null?void 0:a.dispose()};d.onFleetBeaconStateTransition=function(b,c){a.prototype.onFleetBeaconStateTransition.call(this,b,c);b=c.getName();b==="finish"&&(this.$FleetBeaconTestSubscription4(),this.$FleetBeaconTestSubscription7())};return c}(b("FleetBeaconTestBase"));e.exports=a}),null);
__d("FleetBeaconSubscriptionLauncher",["FleetBeaconRunner","FleetBeaconSubscriptionNetwork","FleetBeaconTestSubscription"],(function(a,b,c,d,e,f){"use strict";f.CreateFleetBeaconTestSubscription=a;f.LaunchFleetBeaconTestSubscription=c;function a(a,c,d){a=new(b("FleetBeaconTestSubscription"))(new(b("FleetBeaconSubscriptionNetwork"))(a),c,d);return a}function c(a){var c=new(b("FleetBeaconRunner"))(a);a.setFleetBeaconRunner(c);c.prepareFleetBeaconTest()}}),null);
__d("InstanceProxy",[],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a}var b=a.prototype;b.getInstance=function(){return this.$1};b.setInstance=function(a){this.$1=a};return a}();e.exports=a}),null);
__d("SkywalkerUtils",["CurrentLocale","RTISubscriptionManagerConfig"],(function(a,b,c,d,e,f){a={patchContext:function(a){a=a||{};a.locale=b("CurrentLocale").get();if(b("RTISubscriptionManagerConfig").assimilator){var c=b("RTISubscriptionManagerConfig").assimilator;c.tierType!=null&&(a.tierType=c.tierType);c.sandboxIP!=null&&c.sandboxPort!=null&&c.sandboxHostname!=null&&(a.sandboxIP=c.sandboxIP,a.sandboxPort=c.sandboxPort,a.sandboxHostname=c.sandboxHostname)}return a}};e.exports=a}),null);
__d("MqttLongPollingHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onPollRequestSent=function(){this.$1.forEach(function(a){a.onPollRequestSent()})};b.onPollRequestSuccess=function(){this.$1.forEach(function(a){a.onPollRequestSuccess()})};b.onPollResponse=function(a){this.$1.forEach(function(b){b.onPollResponse(a)})};b.onPollFinish=function(){this.$1.forEach(function(a){a.onPollFinish()})};b.onPollRequestFailed=function(a){this.$1.forEach(function(b){b.onPollRequestFailed(a)})};return a}();e.exports=a}),null);
__d("PromiseResult",["Promise"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.promise=new(b("Promise"))(function(b,c){a.$1=b,a.$2=c})}var c=a.prototype;c.resolve=function(a){this.$1(a)};c.reject=function(a){this.$2(a)};return a}();e.exports=a}),null);
__d("MqttFetchClient",["MqttEnv","MqttProtocolCodec","MqttUtils","Promise","PromiseResult"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttProtocolCodec").WireMessage,i=b("MqttProtocolCodec").decodeByteMessages,j=b("MqttProtocolCodec").MESSAGE_TYPE,k="fetch_pull",l="fetch_pull_finish",m="fetch_",n=6e4,o="action",p="chunked",q="send",r="true",s=5,t=20,u=10,v=5e3;a=function(){function a(){this.$1="",this.$2=g.getLoggerInstance(),this.$3=0,this.$4="",this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}a.isSupported=function(){return typeof fetch==="function"};var c=a.prototype;c.run=function(a,c,d,e,f,g,h,i){this.$1=b("MqttUtils").endpointWithSessionId(a,c),this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$20()};c.isTopicSupported=function(a){return!0};c.publish=function(a,c){if(this.$14!=="ReceivingData"){this.$2.bumpCounter(m+"publish."+a+".invalidstate");return b("Promise").reject("not connected")}else{this.$2.bumpCounter(m+"publish."+a+".publish");var d=new(b("PromiseResult"))();a={topic:a,payload:c,promiseResult:d};this.$15.push(a);this.$21();return d.promise}};c.abort=function(){this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){}};c.$22=function(a){var b=this;a.forEach(function(a){b.$2.bumpCounter(m+"publish."+a.topic+".resolved"),a.promiseResult.resolve()});this.$12+=a.length};c.$23=function(a,b){var c=this;a.forEach(function(a){c.$2.bumpCounter(m+"publish."+a.topic+".rejected"),a.promiseResult.reject(b)})};c.$24=function(a,b,c,d){var e=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+e+", retry:"+c);this.$2.bumpCounter(m+"publish_request_failed");this.$14!="ReceivingData"||c===s?(this.$23(a,d),this.$18=!1,this.$2.bumpCounter(m+"publish_request_failed_final"),this.$21()):this.$25(a,b,c+1)};c.$26=function(a,b,c,d){if(!d.ok){this.$2.bumpCounter(m+"publish_request_failed.http."+d.status);if(d.status===409){this.$19++;if(this.$19>=u){this.$2.bumpCounter(m+"409_reset");this.$27(new Error("Too many 409 errors"));return}}this.$24(a,b,c,this.$28(d));return}this.$2.bumpCounter(m+"publish_request_success");b=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+b+", retry:"+c);this.$22(a);this.$18=!1;this.$21()};c.$21=function(){if(this.$14!="ReceivingData")return;if(this.$18)return;if(this.$15.length==0&&this.$16.length==0)return;this.$18=!0;var a=this.$15.slice(0,t);this.$15=this.$15.slice(t,this.$15.length);clearTimeout(this.$17);this.$17=null;var b=this.$16.slice(0,t);this.$16=this.$16.slice(t,this.$16.length);this.$25(a,b,0)};c.$25=function(a,c,d){var e=this,f=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+f+", retry:"+d);f=b("MqttUtils").endpointWithExtraParameter(this.$1,o,q);var h=a.map(function(a){return{topic:a.topic,payload:a.payload,qos:0,messageId:g.random()}});h=this.$5.gen(this.$3,[],h,c);this.$2.bumpCounter(m+"publish_request");b("MqttUtils").promiseDoneWithTimeout(fetch(f,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:h,keepalive:!1}),function(b){return e.$26(a,c,d,b)},function(b){return e.$24(a,c,d,b)},n)};c.$29=function(a){a=a.message;this.$2.debugTrace("FetchClient","Fetch request failed with error:"+a);this.$9(a);this.$30(!1,a);this.$2.bumpCounter(m+"error");this.$14="Error"};c.$31=function(a){var b=this;this.$2.debugTrace("FetchClient","Fetch response data received");a=i(new Uint8Array(a));a=a.messages;var c=a.filter(function(a){return a.messageType===j.PINGREQ});a=a.filter(function(a){return a.messageType===j.PUBLISH}).map(function(a){if(!(a instanceof h.Publish))return{};a=a;a.qos===1&&a.messageIdentifier!=null&&(b.$16.push(a.messageIdentifier),b.$17==null&&(b.$17=g.setTimeout(function(){b.$21()},v)));return{topic:a.topic,payload:a.payloadMessage.payloadString,qos:a.qos}});for(var d=a,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(e){if(f>=d.length)break;k=d[f++]}else{f=d.next();if(f.done)break;k=f.value}k=k;this.$2.bumpCounter(m+"response_"+k.topic)}a&&a.length>0&&(this.$13+=a.length,this.$7(a));c&&c.length>0&&this.$32()};c.$32=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(m+"ping")};c.$27=function(a){this.$2.debugTrace("FetchClient","Fetch request ended: "+a.toString()),this.$2.bumpCounter(m+"done"),this.$33(a.message),this.$8(),this.$14="Done"};c.$34=function(a,c,d){var e=this;if(d!==null&&d!==void 0)try{this.$31(d)}catch(a){this.$27(a);this.$2.bumpCounter(m+"dataDecodeException");return}if(c){this.$27(new Error("EOF"));return}b("MqttUtils").promiseDone(a.read(),function(c){var b=c.done;c=c.value;return e.$34(a,b,c)},function(a){return e.$27(a)})};c.$35=function(a){if(!a.ok){this.$2.bumpCounter(m+"error.http."+a.status);this.$29(this.$28(a));return}a=a.body;if(!a){this.$29(new Error("Empty body"));return}a=a.getReader();this.$6();this.$2.bumpCounter(m+"success");this.$30(!0,null);this.$11=Date.now();this.$14="ReceivingData";this.$2.debugTrace("FetchClient","Fetch request success");this.$34(a,!1,null)};c.$33=function(a){this.$2.eventLogPullFinish({pullEventName:l,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:a,publishReceived:this.$13,publishSent:this.$12})};c.$30=function(a,b){this.$2.eventLogPull({pullEventName:k,sessionID:this.$3,status:a,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:b})};c.$20=function(){var a=this;if(this.$14!="Ready")return;this.$2.debugTrace("FetchClient","Sending fetch request");this.$2.bumpCounter(m+"request");this.$10=Date.now();var c=b("MqttUtils").endpointWithExtraParameter(this.$1,p,r);b("MqttUtils").promiseDoneWithTimeout(fetch(c,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(b){return a.$35(b)},function(b){return a.$29(b)},n)};c.$28=function(a){return new Error("Http error, status="+a.status)};return a}();e.exports=a}),null);
__d("MqttLongPollingClient",["MqttEnv","MqttProtocolCodec","Promise","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttProtocolCodec").WireMessage,i=b("MqttProtocolCodec").decodeByteMessages,j=120*1e3,k="simple_pull";a=function(){function a(){this.$3="",this.$4=0,this.$2=g.getLoggerInstance(),this.$1="Ready",this.$5="",this.$7=function(){},this.$8=function(a){},this.$9=function(){},this.$10=function(a){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var c=a.prototype;c.run=function(a,b,c,d,e,f,g,h){this.$3=a,this.$4=b,this.$5=c,this.$6=d,this.$7=e,this.$8=f,this.$9=g,this.$10=h,this.$14(this.$5)};c.isTopicSupported=function(a){return this.$13.has(a)};c.publish=function(a,c){return b("Promise").reject("not supported")};c.abort=function(){this.$12!=null&&this.$12.abort("Disconnected")};c.$15=function(a,b){if(this.$1===a)return;this.$1=a;a=="Error"&&b!=null&&this.$10(b)};c.$16=function(a){if(this.$1!="RequestSend")return;if(!a){this.$17("EmptyResponse",null);return}this.$7();this.$18(!0,null);this.$15("ResponseReceived");a=i(new Uint8Array(a));a=a.messages.filter(function(a){return a instanceof h.Publish}).map(function(a){if(a instanceof h.Publish){a=a;return{topic:a.topic,payload:a.payloadMessage.payloadString,qos:a.qos}}else return{}});this.$8(a);this.$9()};c.$17=function(a,b){b=b!=null?b.message:"null";this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+a+", errorMsg:"+b);this.$18(!1,a+":"+b);this.$15("Error",a)};c.$18=function(a,b){this.$2.eventLogPull({pullEventName:k,sessionID:this.$4,status:a,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:b})};c.$14=function(a){var c=this;if(this.$1!="Ready"||this.$12)return;try{this.$11=Date.now(),this.$12=new(b("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(a).setTransportBuilder(b("getCrossOriginTransport").withCredentials).setResponseHandler(function(a){return c.$16(a)}).setNetworkFailureHandler(function(a){c.$17("Network",a)}).setErrorHandler(function(a){c.$17("Error",a)}).setAbortHandler(function(a){c.$17("Abort",null)}).setTimeoutHandler(function(){c.$17("Timeout",null)}).setTimeout(j).send(),this.$15("RequestSend")}catch(a){this.$17("Error",a)}};return a}();e.exports=a}),null);
__d("MqttLongPollingRunner",["MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","Promise","exponentialBackoff"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames,i=b("MqttTypes").MqttChannelError,j=4,k=1e3,l=3e3,m="mqtt_should_longpoll",n="last_lp",o="yes",p="no";a=function(){function a(a,c,d,e,f,j,k,l,m){var n=this;this.$23=function(){try{if(!n.$29())return;var a=n.$30();n.$14=a;var c=n.$9(),d=n.$10();c=c.filter(function(b){return a.isTopicSupported(b)});d=d.filter(function(b){return a.isTopicSupported(b.topic)});if(c.length==0&&d.length==0){n.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do");n.$14=null;g.setTimeout(function(){n.$23()},1e3);return}var e=b("MqttUtils").generateSessionId();a.run(n.$6,e,n.$7.gen(e,c,d),n.$7,function(){return n.$31()},function(a){return n.$32(a)},function(){return n.$33()},function(a){return n.$34(a)});n.$19.onPollRequestSent();e=c.join(",");c=d.map(function(a){return a.topic}).join(",");n.$5.debugTrace("LongPollingRunner","Making a poll request to "+n.$6+". SubscribedTopics:"+e+". Publishes:"+c)}catch(a){a&&n.$5.logErrorWarn(a,"lp_js_error"),n.$11(new i(!1,"js error lp",a)),n.$34("lp_js_error")}};this.$6=a;this.$7=c;this.$1=e;this.$2=0;this.$3=d;this.$4=b("MqttUtils").hasWSSupport();this.$5=g.getLoggerInstance();this.$8=f;this.$9=j;this.$10=k;this.$11=l;this.$12=m;this.$13=!1;this.$14=null;this.$15="LPInactive";this.$16="NotSent";this.$17=0;this.$19=new(b("MqttLongPollingHookCollection"))();this.$18=new(b("exponentialBackoff"))(this.$23,this);this.$20=0;this.$21=p;a=g.genGk(h.mqtt_lp_use_fetch);c=b("MqttFetchClient").isSupported();a?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail");c?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported");this.$22=a&&c}var c=a.prototype;c.addHook=function(a){this.$19.addHook(a)};c.start=function(){var a=this;this.$21=g.configRead(n,p);this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21);this.$20=Date.now();this.$23();g.setTimeout(function(){a.$23()},k+100);g.setTimeout(function(){a.$23()},l+100)};c.canPublish=function(){return this.$15==="LPActive"&&this.$16==="ReceivingData"};c.publish=function(a,c,d){return g.genGk(h.mqtt_enable_publish_over_polling)&&(this.$14&&this.$14.isTopicSupported(a))?this.$14.publish(a,c):b("Promise").reject()};c.onConnectAttempt=function(){};c.onConnectFailure=function(){this.$2++,this.$23()};c.onConnected=function(){};c.onConnectSuccess=function(){this.$1=!0,g.configWrite(n,null)};c.onConnectionLost=function(){};c.onSubscribe=function(a){};c.onUnsubscribe=function(a){};c.onPublish=function(a){};c.onMessage=function(a){};c.onWSFatal=function(){this.$3=!0,this.$23()};c.getStatus=function(){return this.$15};c.getRequestStatus=function(){return this.$16};c.$24=function(a){a!=this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+a+" from "+this.$15),this.$15=a,this.$12(this.$15,this.$16))};c.$25=function(a){if(!this.$22)return;a!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+a+" from "+this.$16),this.$16=a,this.$12(this.$15,this.$16))};c.$26=function(){this.$17=0};c.$27=function(){this.$17++,this.$17>=j&&this.$24("LPError")};c.$28=function(){var a=g.genGk(h.mqtt_lp_no_delay),b=g.genGk(h.mqtt_ws_polling_enabled),c=g.genGk(h.mqtt_fast_lp);this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(a)+" enabled:"+String(b)+" fastPoll:"+String(c)+" hasWSSupport:"+String(this.$4)+" hasSuccess:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3));if(!b)return!1;if(a){this.$5.bumpCounter(m+".nd");return!0}if(!this.$4){this.$5.bumpCounter(m+".na");return!0}if(this.$3){this.$5.bumpCounter(m+".fatal");return!0}if(this.$1)return!1;if(c){b=Date.now()-this.$20;if(this.$21===o){if(this.$2>=1)return!0;if(b>k){this.$5.bumpCounter(m+".fastdelay");return!0}}else if(b>l){this.$5.bumpCounter(m+".regulardelay");return!0}}if(this.$2>=3){this.$5.bumpCounter(m+".failure");return!0}return!1};c.$29=function(){if(this.$14!=null)return!1;var a=this.$28();!this.$13&&a&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$24("LPActive"),this.$26());this.$13&&!a&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$24("LPInactive"),this.$26());return a};c.$30=function(){if(this.$22){this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API");return new(b("MqttFetchClient"))()}else{this.$5.debugTrace("LongPollingRunner","Creating regular Polling client");return new(b("MqttLongPollingClient"))()}};c.$31=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$24("LPActive"),this.$26(),g.configWrite(n,o),this.$25("ReceivingData")};c.$32=function(a){var b=a.map(function(a){return a.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+b);for(var b=0;b<a.length;b++){var c=a[b];this.$19.onPollResponse(c.topic);this.$8(c.topic,c.payload,c.qos)}};c.$33=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$25("NotSent")};c.$34=function(a){this.$19.onPollRequestFailed(a),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$27(),this.$25("NotSent")};return a}();e.exports=a}),null);